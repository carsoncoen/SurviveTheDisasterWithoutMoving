[{"className":"Part","name":"Right Leg","parentId":"9525","path":"ReplicatedStorage/Assets/WinnerRig/Right Leg","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":151},"CFrame":{"type":"CFrame","value":{"position":[14.99609375,-395.5,-138.56881713867188],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.4980392158031464,"g":0.4980392158031464,"r":0.4980392158031464}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":1,"y":2,"z":1}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Studs"}},"Transparency":{"type":"float","value":0}},"referenceId":"9766"},{"className":"Attachment","name":"RightFootAttachment","parentId":"9766","path":"ReplicatedStorage/Assets/WinnerRig/Right Leg/RightFootAttachment","properties":{"CFrame":{"type":"CFrame","value":{"position":[0,-1,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Capabilities":{"type":"SecurityCapabilities","value":0},"Visible":{"type":"bool","value":false}},"referenceId":"9265"},{"className":"Part","name":"HumanoidRootPart","parentId":"9525","path":"ReplicatedStorage/Assets/WinnerRig/HumanoidRootPart","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[14.49609375,-393.5,-138.56881713867188],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":2,"y":2,"z":1}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":1}},"referenceId":"9767"},{"className":"Attachment","name":"RootAttachment","parentId":"9767","path":"ReplicatedStorage/Assets/WinnerRig/HumanoidRootPart/RootAttachment","properties":{"CFrame":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Capabilities":{"type":"SecurityCapabilities","value":0},"Visible":{"type":"bool","value":false}},"referenceId":"9266"},{"className":"Motor6D","name":"RootJoint","parentId":"9767","path":"ReplicatedStorage/Assets/WinnerRig/HumanoidRootPart/RootJoint","properties":{"C0":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[-1,0,0,0,0,1,0,1,-0.0]}},"C1":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[-1,0,0,0,0,1,0,1,-0.0]}},"Capabilities":{"type":"SecurityCapabilities","value":0},"DesiredAngle":{"type":"float","value":0},"Enabled":{"type":"bool","value":true},"MaxVelocity":{"type":"float","value":0.10000000149011612},"Part0":{"type":"Ref","value":"9767"},"Part1":{"type":"Ref","value":"9762"}},"referenceId":"9721"},{"className":"Model","name":"WinnerStand","parentId":"9352","path":"ReplicatedStorage/Assets/WinnerStand","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LevelOfDetail":{"type":"Enum","value":{"enumType":"ModelLevelOfDetail","value":"Automatic"}},"ModelStreamingMode":{"type":"Enum","value":{"enumType":"ModelStreamingMode","value":"Default"}},"PrimaryPart":{"type":"nil"}},"referenceId":"9526"},{"className":"Model","name":"ThreeDTextObject","parentId":"9526","path":"ReplicatedStorage/Assets/WinnerStand/ThreeDTextObject","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LevelOfDetail":{"type":"Enum","value":{"enumType":"ModelLevelOfDetail","value":"Automatic"}},"ModelStreamingMode":{"type":"Enum","value":{"enumType":"ModelStreamingMode","value":"Default"}},"PrimaryPart":{"type":"Ref","value":"9770"}},"referenceId":"9527","tags":["ThreeDTextObject"]},{"className":"StringValue","name":"ThreeDTextParams","parentId":"9527","path":"ReplicatedStorage/Assets/WinnerStand/ThreeDTextObject/ThreeDTextParams","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Value":{"type":"string","value":"{\"fontId\":\"PressStart2P\",\"up\":3,\"color\":\"0.250000,0.737226,1.000000\",\"text\":\"1\",\"leading\":0,\"thickness\":2,\"zAlign\":1,\"partMode\":0,\"scale\":8,\"right\":1,\"material\":16,\"tracking\":0,\"xAlign\":1}"}},"referenceId":"12200"},{"className":"Part","name":"ThreeDTextHandle","parentId":"9527","path":"ReplicatedStorage/Assets/WinnerStand/ThreeDTextObject/ThreeDTextHandle","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Inlet"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[14.24609375,-397.8499755859375,-215.31881713867188],"rotation":[-1,0,0,0,1,0,0,0,-1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":0.05000000074505806,"y":0.05000000074505806,"z":0.05000000074505806}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Studs"}},"Transparency":{"type":"float","value":1}},"referenceId":"9770"},{"className":"MeshPart","name":"one","parentId":"9527","path":"ReplicatedStorage/Assets/WinnerStand/ThreeDTextObject/one","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":1024},"CFrame":{"type":"CFrame","value":{"position":[14.24609375,-393.3499755859375,-216.25631713867188],"rotation":[-1,0,0,0,1,0,0,0,-1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":1,"g":0.8588235378265381,"r":0.6509804129600525}},"CustomPhysicalProperties":{"type":"nil"},"DoubleSided":{"type":"bool","value":false},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"SmoothPlastic"}},"MeshId":{"originalType":"ContentId","type":"string","value":"rbxassetid://3663013623"},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RenderFidelity":{"type":"Enum","value":{"enumType":"RenderFidelity","value":"Precise"}},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":6,"y":7,"z":1.625}},"TextureContent":{"type":"Content"},"TextureID":{"originalType":"ContentId","type":"string","value":""},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":0}},"referenceId":"9521"},{"className":"Part","name":"ThreeDTextBoundingBox","parentId":"9527","path":"ReplicatedStorage/Assets/WinnerStand/ThreeDTextObject/ThreeDTextBoundingBox","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Inlet"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[14.24609375,-393.8624877929688,-215.31881713867188],"rotation":[-1,0,0,0,1,0,0,0,-1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":6,"y":8.024999618530273,"z":2}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Studs"}},"Transparency":{"type":"float","value":1}},"referenceId":"9771","tags":["ThreeDTextObjectBoundingBox"]},{"className":"Part","name":"Stand","parentId":"9526","path":"ReplicatedStorage/Assets/WinnerStand/Stand","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Inlet"}},"BrickColor":{"type":"BrickColor","value":26},"CFrame":{"type":"CFrame","value":{"position":[14.37109375,-398.125,-214.19381713867188],"rotation":[-1,0,-8.742277657347587e-8,0,1,0,8.742277657347587e-8,0,-1]}},"CanCollide":{"type":"bool","value":true},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.2078431397676468,"g":0.16470588743686676,"r":0.10588235408067705}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":8.25,"y":2.5,"z":7.75}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Studs"}},"Transparency":{"type":"float","value":0}},"referenceId":"9768"},{"className":"SurfaceGui","name":"ScreenGUI","parentId":"9768","path":"ReplicatedStorage/Assets/WinnerStand/Stand/ScreenGUI","properties":{"Active":{"type":"bool","value":true},"Adornee":{"type":"nil"},"AlwaysOnTop":{"type":"bool","value":false},"AutoLocalize":{"type":"bool","value":true},"Brightness":{"type":"float","value":1},"CanvasSize":{"type":"Vector2","value":{"x":800,"y":600}},"Capabilities":{"type":"SecurityCapabilities","value":0},"ClipsDescendants":{"type":"bool","value":true},"Enabled":{"type":"bool","value":true},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"LightInfluence":{"type":"float","value":1},"MaxDistance":{"type":"float","value":1000},"PixelsPerStud":{"type":"float","value":50},"ResetOnSpawn":{"type":"bool","value":true},"RootLocalizationTable":{"type":"nil"},"SelectionBehaviorDown":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorLeft":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorRight":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorUp":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionGroup":{"type":"bool","value":false},"SizingMode":{"type":"Enum","value":{"enumType":"SurfaceGuiSizingMode","value":"PixelsPerStud"}},"ToolPunchThroughDistance":{"type":"float","value":0},"ZIndexBehavior":{"type":"Enum","value":{"enumType":"ZIndexBehavior","value":"Sibling"}},"ZOffset":{"type":"float","value":0}},"referenceId":"12207"},{"className":"Frame","name":"Container","parentId":"12207","path":"ReplicatedStorage/Assets/WinnerStand/Stand/ScreenGUI/Container","properties":{"Active":{"type":"bool","value":false},"AnchorPoint":{"type":"Vector2","value":{"x":0,"y":0}},"AutoLocalize":{"type":"bool","value":true},"AutomaticSize":{"type":"Enum","value":{"enumType":"AutomaticSize","value":"None"}},"BackgroundColor3":{"type":"Color3","value":{"b":1,"g":0.8588235378265381,"r":0.6509804129600525}},"BackgroundTransparency":{"type":"float","value":0},"BorderColor3":{"type":"Color3","value":{"b":0,"g":0,"r":0}},"BorderMode":{"type":"Enum","value":{"enumType":"BorderMode","value":"Outline"}},"BorderSizePixel":{"type":"int","value":0},"Capabilities":{"type":"SecurityCapabilities","value":0},"ClipsDescendants":{"type":"bool","value":false},"Interactable":{"type":"bool","value":true},"LayoutOrder":{"type":"int","value":0},"NextSelectionDown":{"type":"nil"},"NextSelectionLeft":{"type":"nil"},"NextSelectionRight":{"type":"nil"},"NextSelectionUp":{"type":"nil"},"Position":{"type":"UDim2","value":{"x":{"offset":0,"scale":0.05000000074505806},"y":{"offset":0,"scale":0.10000000149011612}}},"RootLocalizationTable":{"type":"nil"},"Rotation":{"type":"float","value":0},"Selectable":{"type":"bool","value":false},"SelectionBehaviorDown":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorLeft":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorRight":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorUp":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionGroup":{"type":"bool","value":false},"SelectionImageObject":{"type":"nil"},"SelectionOrder":{"type":"int","value":0},"Size":{"type":"UDim2","value":{"x":{"offset":0,"scale":0.8999999761581421},"y":{"offset":0,"scale":0.800000011920929}}},"SizeConstraint":{"type":"Enum","value":{"enumType":"SizeConstraint","value":"RelativeXY"}},"Style":{"type":"Enum","value":{"enumType":"FrameStyle","value":"Custom"}},"Visible":{"type":"bool","value":true},"ZIndex":{"type":"int","value":1}},"referenceId":"9432"},{"className":"TextLabel","name":"WinnerName","parentId":"9432","path":"ReplicatedStorage/Assets/WinnerStand/Stand/ScreenGUI/Container/WinnerName","properties":{"Active":{"type":"bool","value":false},"AnchorPoint":{"type":"Vector2","value":{"x":0,"y":0}},"AutoLocalize":{"type":"bool","value":true},"AutomaticSize":{"type":"Enum","value":{"enumType":"AutomaticSize","value":"None"}},"BackgroundColor3":{"type":"Color3","value":{"b":1,"g":0.8588235378265381,"r":0.6509804129600525}},"BackgroundTransparency":{"type":"float","value":1},"BorderColor3":{"type":"Color3","value":{"b":0,"g":0,"r":0}},"BorderMode":{"type":"Enum","value":{"enumType":"BorderMode","value":"Outline"}},"BorderSizePixel":{"type":"int","value":0},"Capabilities":{"type":"SecurityCapabilities","value":0},"ClipsDescendants":{"type":"bool","value":false},"FontFace":{"type":"Font","value":{"family":"rbxasset://fonts/families/FredokaOne.json","style":"Normal","weight":"Regular"}},"Interactable":{"type":"bool","value":true},"LayoutOrder":{"type":"int","value":0},"LineHeight":{"type":"float","value":1},"MaxVisibleGraphemes":{"type":"int","value":-1},"NextSelectionDown":{"type":"nil"},"NextSelectionLeft":{"type":"nil"},"NextSelectionRight":{"type":"nil"},"NextSelectionUp":{"type":"nil"},"OpenTypeFeatures":{"type":"string","value":""},"Position":{"type":"UDim2","value":{"x":{"offset":0,"scale":0},"y":{"offset":0,"scale":0}}},"RichText":{"type":"bool","value":false},"RootLocalizationTable":{"type":"nil"},"Rotation":{"type":"float","value":0},"Selectable":{"type":"bool","value":false},"SelectionBehaviorDown":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorLeft":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorRight":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionBehaviorUp":{"type":"Enum","value":{"enumType":"SelectionBehavior","value":"Escape"}},"SelectionGroup":{"type":"bool","value":false},"SelectionImageObject":{"type":"nil"},"SelectionOrder":{"type":"int","value":0},"Size":{"type":"UDim2","value":{"x":{"offset":0,"scale":1},"y":{"offset":0,"scale":1}}},"SizeConstraint":{"type":"Enum","value":{"enumType":"SizeConstraint","value":"RelativeXY"}},"Text":{"type":"string","value":""},"TextColor3":{"type":"Color3","value":{"b":0,"g":0,"r":0}},"TextDirection":{"type":"Enum","value":{"enumType":"TextDirection","value":"Auto"}},"TextScaled":{"type":"bool","value":true},"TextSize":{"type":"float","value":14},"TextStrokeColor3":{"type":"Color3","value":{"b":0,"g":0,"r":0}},"TextStrokeTransparency":{"type":"float","value":1},"TextTransparency":{"type":"float","value":0},"TextTruncate":{"type":"Enum","value":{"enumType":"TextTruncate","value":"None"}},"TextWrapped":{"type":"bool","value":true},"TextXAlignment":{"type":"Enum","value":{"enumType":"TextXAlignment","value":"Center"}},"TextYAlignment":{"type":"Enum","value":{"enumType":"TextYAlignment","value":"Center"}},"Visible":{"type":"bool","value":true},"ZIndex":{"type":"int","value":1}},"referenceId":"12270"},{"className":"UIPadding","name":"UIPadding","parentId":"12270","path":"ReplicatedStorage/Assets/WinnerStand/Stand/ScreenGUI/Container/WinnerName/UIPadding","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"PaddingBottom":{"type":"UDim","value":{"offset":0,"scale":0.10000000149011612}},"PaddingLeft":{"type":"UDim","value":{"offset":0,"scale":0.10000000149011612}},"PaddingRight":{"type":"UDim","value":{"offset":0,"scale":0.10000000149011612}},"PaddingTop":{"type":"UDim","value":{"offset":0,"scale":0.10000000149011612}}},"referenceId":"12488"},{"className":"Part","name":"CharacterSpawn","parentId":"9768","path":"ReplicatedStorage/Assets/WinnerStand/Stand/CharacterSpawn","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Inlet"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[14.37109375,-396.6875,-212.75631713867188],"rotation":[-1,0,-8.742277657347587e-8,0,1,0,8.742277657347587e-8,0,-1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":1.25,"y":0.375,"z":1.375}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Studs"}},"Transparency":{"type":"float","value":1}},"referenceId":"9769"},{"className":"Snap","name":"Snap","parentId":"9769","path":"ReplicatedStorage/Assets/WinnerStand/Stand/CharacterSpawn/Snap","properties":{"C0":{"type":"CFrame","value":{"position":[0,-0.1875,0],"rotation":[1,0,0,0,0,-1,0,1,0]}},"C1":{"type":"CFrame","value":{"position":[0,1.25,-1.4375],"rotation":[1,0,0,0,0,-1,0,1,0]}},"Capabilities":{"type":"SecurityCapabilities","value":0},"Enabled":{"type":"bool","value":true},"Part0":{"type":"Ref","value":"9769"},"Part1":{"type":"Ref","value":"9768"}},"referenceId":"12145"},{"className":"MeshPart","name":"IceCube","parentId":"9352","path":"ReplicatedStorage/Assets/IceCube","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":false},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":11},"CFrame":{"type":"CFrame","value":{"position":[13.99609375,-398.3758544921875,-168.25631713867188],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.8588235378265381,"g":0.7333333492279053,"r":0.501960813999176}},"CustomPhysicalProperties":{"type":"nil"},"DoubleSided":{"type":"bool","value":false},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Glass"}},"MeshId":{"originalType":"ContentId","type":"string","value":"rbxassetid://2784482070"},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RenderFidelity":{"type":"Enum","value":{"enumType":"RenderFidelity","value":"Precise"}},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":2.783252000808716,"y":1.998295545578003,"z":2.7279839515686035}},"TextureContent":{"type":"Content"},"TextureID":{"originalType":"ContentId","type":"string","value":""},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":1}},"referenceId":"9520"},{"className":"Folder","name":"RemoteFunctions","parentId":"12109","path":"ReplicatedStorage/RemoteFunctions","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9353"},{"className":"Folder","name":"Items","parentId":"9353","path":"ReplicatedStorage/RemoteFunctions/Items","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9354"},{"className":"RemoteFunction","name":"GetShopData","parentId":"9354","path":"ReplicatedStorage/RemoteFunctions/Items/GetShopData","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"12107"},{"className":"RemoteFunction","name":"PurchaseItem","parentId":"9354","path":"ReplicatedStorage/RemoteFunctions/Items/PurchaseItem","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"12108"},{"className":"ReplicatedFirst","name":"ReplicatedFirst","parentId":"121922","path":"ReplicatedFirst","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"7084"},{"className":"ServerScriptService","name":"ServerScriptService","parentId":"121922","path":"ServerScriptService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"12131"},{"className":"Folder","name":"Server","parentId":"12131","path":"ServerScriptService/Server","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9355"},{"attributes":{"_rbxsync_source":{"type":"string","value":"ServerScriptService/Server/Start"}},"className":"Script","name":"Start","parentId":"9355","path":"ServerScriptService/Server/Start","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Disabled":{"type":"bool","value":false},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"RunContext":{"type":"Enum","value":{"enumType":"RunContext","value":"Legacy"}},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- START SERVER SCRIPT \n-- @carsondev7\n----------------------------------------\n\n\n----------------------------\n-- SERVICES --\n----------------------------\nlocal ServerScriptService = game:GetService(\"ServerScriptService\")\n\n\n----------------------------\n-- VARIABLES --\n----------------------------\nlocal serviceFolder = ServerScriptService.Server.Services\n\n\n----------------------------\n-- PRIVATE FUNCTIONS --\n----------------------------\nlocal function safeRequire(moduleScript)\n\tlocal ok, result = pcall(require, moduleScript)\n\tif not ok then\n\t\twarn(\"[Init] Failed to load module:\", moduleScript:GetFullName())\n\t\twarn(result)\n\tend\n\treturn ok, result\nend\n\n\n-- Initiate every server module script service\nfunction Init()\n\tfor _, serviceFolder in pairs(serviceFolder:GetChildren()) do\n\t\tif serviceFolder:IsA(\"Folder\") then\n\t\t\tfor _, service in pairs(serviceFolder:GetChildren()) do\n\t\t\t\tif service:IsA(\"ModuleScript\") then\n\t\t\t\t\tsafeRequire(service)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\n\n----------------------------\n-- PUBLIC FUNCTIONS --\n----------------------------\n\n\n----------------------------\n-- MAIN --\n----------------------------\nInit()"}},"referenceId":"12125"},{"className":"Folder","name":"Services","parentId":"9355","path":"ServerScriptService/Server/Services","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9356"},{"className":"Folder","name":"Game","parentId":"9356","path":"ServerScriptService/Server/Services/Game","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9357"},{"className":"ModuleScript","name":"RoundService","parentId":"9357","path":"ServerScriptService/Server/Services/Game/RoundService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"---------------------------------------------\n-- ROUND SERVICE MODULE SCRIPT --\n-- @carsondev7\n---------------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\n\n-- MODULES --\nlocal MovementService = require(game.ServerScriptService.Server.Services.Player.MovementService)\nlocal TeleportService = require(game.ServerScriptService.Server.Services.Game.TeleportService)\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal DisasterService = require(game.ServerScriptService.Server.Services.Disasters.DisasterService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\nlocal DataService = require(game.ServerScriptService.Server.Services.Player.DataService)\nlocal WeldService = require(game.ServerScriptService.Server.Services.Game.WeldService)\nlocal TweenerService = require(game.ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\n\n-- ENUMS --\nlocal UIType = require(ReplicatedStorage.Shared.Modules.Enums.UIType)\nlocal SoundType\t= require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n-- UTILS --\nlocal winnerStand = ReplicatedStorage:WaitForChild(\"Assets\"):WaitForChild(\"WinnerStand\"):WaitForChild(\"Stand\")\nlocal winnerStandText = winnerStand.ScreenGUI.Container.WinnerName\nlocal winnerRig = ReplicatedStorage:WaitForChild(\"Assets\"):WaitForChild(\"WinnerRig\")\n\n-- CONFIGURATION --\nlocal Config = {\n\t-- Timing\n\tINTERMISSION_TIME = 100,\n\tMAX_DISASTER_CHANGE_TIME = 15,\n\tMIN_DISASTER_CHANGE_TIME = 5,\n\tLATE_JOIN_THRESHOLD = 5,\n\tWINNER_DISPLAY_TIME = 8,\n\tMAP_DISPLAY_TIME = 3,\n\n\t-- Game Rules\n\tMIN_PLAYERS_TO_START = 2,\t\t-- Minimum players required to start a round\n\tMIN_PLAYERS_TO_END = 1,\t\t\t-- Players remaining before round ends\n\tPLAYTESTING_MODE = true,\t\t-- Set to false for release\n\t\n\t-- Rewards\n\tBASE_TOKENS_PER_ROUND = 5,\t\t-- Tokens awarded per round\n\tTOKEN_RATE = 5,\t\t\t\t\t-- (rate * round number)\n\tTOKENS_FOR_WINNING = 100,\t\t-- Tokens for winning\n}\n\n-- STATE --\nlocal gameActive = false\nlocal currentDisaster = nil\nlocal currentMap = nil\nlocal currentPlayersThisGame = {}\nlocal currentGameStartTime = 0\nlocal currentRound = 0\nlocal PlayerImages = {}\n\nlocal RoundService = {}\n\n--------------------------------------------------------------------------------\n-- INITIALIZATION\n--------------------------------------------------------------------------------\n\nfunction RoundService:Init()\n\ttask.spawn(function()\n\t\tself:SetupPlayerEvents()\n\t\tself:StartRoundLoop()\n\tend)\nend\n\nfunction RoundService:SetupPlayerEvents()\n\tPlayers.PlayerAdded:Connect(function(player)\n\t\tplayer.CharacterAdded:Connect(function(character)\n\t\t\tself:OnCharacterAdded(player, character)\n\t\tend)\n\tend)\n\n\tPlayers.PlayerRemoving:Connect(function(player)\n\t\tself:HandlePlayerRemoving(player)\n\tend)\nend\n\n--------------------------------------------------------------------------------\n-- MAIN GAME LOOP\n--------------------------------------------------------------------------------\n\nfunction RoundService:StartRoundLoop()\n\ttask.spawn(function()\n\t\twhile true do\n\t\t\t-- Wait for minimum players (production only)\n\t\t\tif not Config.PLAYTESTING_MODE then\n\t\t\t\tself:WaitForPlayers()\n\t\t\tend\n\n\t\t\tlocal hasEnoughPlayers = self:StartIntermission()\n\t\t\tif not hasEnoughPlayers then\n\t\t\t\tcontinue\n\t\t\tend\n\n\t\t\thasEnoughPlayers = self:ChooseMap()\n\t\t\tif not hasEnoughPlayers then\n\t\t\t\tself:CleanUpMap()\n\t\t\t\tcontinue\n\t\t\tend\n\n\t\t\tself:StartRound()\n\t\t\tself:EndRound()\n\t\tend\n\tend)\nend\n\nfunction RoundService:WaitForPlayers()\n\twhile #Players:GetPlayers() < Config.MIN_PLAYERS_TO_START do\n\t\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t\tNetworkService:SendUIEvent(player, {\n\t\t\t\tuiType = UIType.WaitingForPlayers,\n\t\t\t\tplayersNeeded = Config.MIN_PLAYERS_TO_START,\n\t\t\t\tcurrentPlayers = #Players:GetPlayers(),\n\t\t\t})\n\t\tend\n\t\ttask.wait(1)\n\tend\nend\n\nfunction RoundService:StartIntermission()\n\tfor i = Config.INTERMISSION_TIME, 1, -1 do\n\t\t-- Check if we still have enough players\n\t\tif not Config.PLAYTESTING_MODE and #Players:GetPlayers() < Config.MIN_PLAYERS_TO_START then\n\t\t\treturn false\n\t\tend\n\n\t\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t\tNetworkService:SendUIEvent(player, {\n\t\t\t\tuiType = UIType.Intermission,\n\t\t\t\ttimeLeft = i,\n\t\t\t})\n\t\tend\n\t\ttask.wait(1)\n\tend\n\n\treturn true\nend\n\nfunction RoundService:ChooseMap()\n\tself:InitMap()\n\tif not currentMap then \n\t\twarn(\"Could not find map\") \n\t\treturn false\n\tend\n\n\tfor i = Config.MAP_DISPLAY_TIME, 1, -1 do\n\t\t-- Check if we still have enough players\n\t\tif not Config.PLAYTESTING_MODE and #Players:GetPlayers() < Config.MIN_PLAYERS_TO_START then\n\t\t\treturn false\n\t\tend\n\n\t\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t\tNetworkService:SendUIEvent(player, {\n\t\t\t\tuiType = UIType.MapDisplay,\n\t\t\t\tmapName = currentMap.Name,\n\t\t\t})\n\t\tend\n\t\ttask.wait(1)\n\tend\n\n\treturn true\nend\n\nfunction RoundService:StartRound()\n\t-- Final check before starting round\n\tif not Config.PLAYTESTING_MODE and #Players:GetPlayers() < Config.MIN_PLAYERS_TO_START then\n\t\tgameActive = false\n\t\treturn\n\tend\n\t\n\tgameActive = true\n\tcurrentGameStartTime = tick()\n\n\t-- Setup\n\tself:InitPlayers()\n\tTeleportService:TeleportPlayersToMap(currentMap)\n\n\t-- Disaster cycle loop\n\twhile gameActive do\n\t\tself:StartDisasterCycle()\n\t\tif not self:CheckRoundConditions() then \n\t\t\tbreak \n\t\tend\n\t\ttask.wait(0.1)\n\tend\nend\n\nfunction RoundService:EndRound()\n\tgameActive = false\n\n\t-- Teleport and show results\n\tTeleportService:TeleportPlayersToLobby()\n\tlocal resultsTable = self:HandleResults()\n\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tif player and player.Character then\n\t\t\tNetworkService:SendUIEvent(player, {\n\t\t\t\tuiType = UIType.RoundOver,\n\t\t\t\tresults = resultsTable,\n\t\t\t})\n\t\tend\n\tend\n\t\n\t-- Update winner stand\n\t--self:UpdateWinnerStand(resultsTable[1])\n\n\t-- Cleanup\n\tStateService:ResetAllStates()\n\tTweenerService:ResetPlayerTweenEffects()\n\tDisasterService:ResetDisasters(currentMap)\n\tself:CleanUpMap()\n\n\tcurrentRound = 0\n\tcurrentPlayersThisGame = {}\n\n\ttask.wait(Config.WINNER_DISPLAY_TIME)\nend\n\n--------------------------------------------------------------------------------\n-- DISASTER MANAGEMENT\n--------------------------------------------------------------------------------\n\nfunction RoundService:StartDisasterCycle()\n\tif not gameActive then return end\n\t\n\tlocal numPlayersAlive = #self:GetPlayersInRound()\n\t\n\t-- Choose and initialize disaster\n\tcurrentDisaster = DisasterService:ChooseRandomDisaster(numPlayersAlive)\n\tif not currentDisaster then \n\t\twarn(\"Could not find disaster\") \n\t\treturn \n\tend\n\t\n\tDisasterService:InitializeDisaster(currentDisaster, currentMap)\n\tcurrentRound += 1\n\n\t-- Calculate countdown time (gets shorter each round)\n\tlocal countdownTime = math.max(\n\t\tConfig.MAX_DISASTER_CHANGE_TIME - currentRound, \n\t\tConfig.MIN_DISASTER_CHANGE_TIME\n\t)\n\t\n\t-- Countdown before disaster starts\n\tfor i = countdownTime, 1, -1 do\n\t\tif not gameActive then break end\n\t\t\n\t\t-- Start freeze effect only when countdown reaches 5\n\t\tif i == 3 then\n\t\t\tlocal playersInRound = self:GetPlayersInRound()\n\t\t\tTweenerService:FadeFreezeEffect(playersInRound, 5)\n\t\tend\n\n\t\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t\tNetworkService:SendUIEvent(player, {\n\t\t\t\tuiType = UIType.NewDisasterStarting,\n\t\t\t\ttimeLeft = i,\n\t\t\t\tdisasterType = currentDisaster.Name,\n\t\t\t})\n\t\tend\n\t\ttask.wait(1)\n\tend\n\n\tself:StartNewDisaster()\nend\n\nfunction RoundService:StartNewDisaster()\n\tif not gameActive then return end\n\n\t-- Start disaster\n\tMovementService:FreezePlayers()\n\t\n\t-- Send audio of freeze to all players\n\tlocal playersInRound = self:GetPlayersInRound()\n\tfor _, player in ipairs(playersInRound) do\n\t\tNetworkService:SendSoundEffect(player, {soundType = SoundType.Freeze})\n\tend\n\t\n\tDisasterService:StartDisaster(currentDisaster, currentMap)\n\n\t-- Disaster duration countdown\n\tfor i = currentDisaster.Duration, 1, -1 do\n\t\tif not gameActive then break end\n\n\t\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t\tNetworkService:SendUIEvent(player, {\n\t\t\t\tuiType = UIType.DisasterInProgress,\n\t\t\t\ttimeLeft = i,\n\t\t\t})\n\t\tend\n\t\ttask.wait(1)\n\tend\n\t\n\t-- Tokens to add to all surviving players\n\tlocal tokensToAdd = self:CalculateTokensForRound()\n\n\t-- Update rounds stats for all players (local and datastore data)\n\tfor player, data in pairs(currentPlayersThisGame) do\n\t\tif player and player.Character and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\tdata.RoundsSurvived = currentRound\n\t\t\t\n\t\t\t-- Update round survivals\n\t\t\tlocal success, err = pcall(function()\n\t\t\t\tDataService.UpdateRoundSurvivals(player, currentDisaster)\n\t\t\tend)\n\t\t\tif not success then\n\t\t\t\twarn(\"Failed to update round survivals for \" .. player.Name .. \": \" .. err)\n\t\t\tend\n\t\t\t\n\t\t\t-- Update tokens\n\t\t\tlocal success, err = pcall(function()\n\t\t\t\tDataService.AddTokens(player, tokensToAdd, \"Round Survived\")\n\t\t\tend)\n\t\t\tif not success then\n\t\t\t\twarn(\"Failed to update tokens for \" .. player.Name .. \": \" .. err)\n\t\t\tend\n\t\tend\n\tend\n\n\t-- End disaster\n\tDisasterService:EndDisaster(currentDisaster, currentMap)\n\tcurrentDisaster = nil\n\tMovementService:UnfreezePlayers()\n\t\n\t-- Fade out the freeze visual effect for players\n\tlocal playersInRound = self:GetPlayersInRound()\n\tTweenerService:FadeUnfreezeEffect(playersInRound, 0.5)\nend\n\n--------------------------------------------------------------------------------\n-- GAME CONDITIONS\n--------------------------------------------------------------------------------\n\nfunction RoundService:CheckRoundConditions()\n\tif not gameActive then return false end\n\n\tlocal playersInGame = 0\n\tlocal playersAlive = 0\n\n\t-- Count players in this game\n\tfor player in pairs(currentPlayersThisGame) do\n\t\tif player then\n\t\t\tplayersInGame += 1\n\t\tend\n\tend\n\n\t-- Count alive players\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tif player and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\tplayersAlive += 1\n\t\tend\n\tend\n\n\t-- PLAYTESTING MODE: Single player never ends until they die\n\tif Config.PLAYTESTING_MODE and playersInGame == 1 then\n\t\treturn playersAlive > 0\n\tend\n\n\t-- Normal mode: End when too few players remain\n\tprint(\"Players alive:\", playersAlive)\n\treturn playersAlive > Config.MIN_PLAYERS_TO_END\nend\n\n--------------------------------------------------------------------------------\n-- RESULTS & SCORING\n--------------------------------------------------------------------------------\n\nfunction RoundService:HandleResults()\n\tlocal survivors = {}\n\tlocal dead = {}\n\n\t-- Categorize players\n\tfor player, data in pairs(currentPlayersThisGame) do\n\t\tif not player or not player.Character then continue end\n\n\t\tlocal entry = {\n\t\t\tPlayer = player,\n\t\t\tName = player.Name,\n\t\t\tImage = PlayerImages[player.UserId],\n\t\t\tRoundsSurvived = data.RoundsSurvived,\n\t\t\tDeathTime = data.DeathTime,\n\t\t\tTokensEarned = self:CalculateTokensForGame(data.RoundsSurvived),\n\t\t}\n\n\t\tif data.DeathTime == 0 and player.Character and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\ttable.insert(survivors, entry)\n\t\telse\n\t\t\ttable.insert(dead, entry)\n\t\tend\n\tend\n\n\t-- Sort dead players by death time (latest death = higher rank)\n\ttable.sort(dead, function(a, b)\n\t\treturn a.DeathTime > b.DeathTime\n\tend)\n\n\t-- Build final results table\n\tlocal results = {}\n\tlocal rank = 1\n\n\t-- Add survivors (they win)\n\tfor _, entry in ipairs(survivors) do\n\t\tentry.Rank = rank\n\t\trank += 1\n\t\t\n\t\t-- Add tokens for winnings\n\t\tentry.TokensEarned += Config.TOKENS_FOR_WINNING\n\t\t\n\t\tlocal success, err = pcall(function()\n\t\t\tDataService.AddWin(entry.Player)\n\t\t\tDataService.AddTokens(entry.Player, Config.TOKENS_FOR_WINNING, \"Won Game\")\n\t\tend)\n\t\t\n\t\tif not success then\n\t\t\twarn(\"Failed to add win for player:\", entry.Player.Name, err)\n\t\tend\n\t\t\n\t\ttable.insert(results, entry)\n\tend\n\n\t-- Add dead players\n\tfor _, entry in ipairs(dead) do\n\t\t-- If no survivors, last person alive wins\n\t\tif rank == 1 then\n\t\t\t-- Add tokens for winning\n\t\t\tentry.TokensEarned += Config.TOKENS_FOR_WINNING\n\t\t\t\n\t\t\tlocal success, err = pcall(function()\n\t\t\t\tDataService.AddWin(entry.Player)\n\t\t\t\tDataService.AddTokens(entry.Player, Config.TOKENS_FOR_WINNING, \"Won Game\")\n\t\t\tend)\n\n\t\t\tif not success then\n\t\t\t\twarn(\"Failed to add win for player:\", entry.Player.Name, err)\n\t\t\tend\n\t\tend\n\t\tentry.Rank = rank\n\t\trank += 1\n\t\ttable.insert(results, entry)\n\tend\n\n\treturn results\nend\n\nfunction RoundService:UpdateWinnerStand(winner)\n\tif not winner or not winner.Player then return end\n\n\t-- Clear old winner if exists\n\tlocal existingWinner = winnerStand:FindFirstChildOfClass(\"Model\")\n\tif existingWinner then\n\t\texistingWinner:Destroy()\n\tend\n\n\t-- Clone new winner rig\n\tlocal winnerClone = winnerRig:Clone()\n\twinnerClone.Parent = winnerStand\n\n\tlocal rootPart = winnerClone:FindFirstChild(\"HumanoidRootPart\")\n\tlocal humanoid = winnerClone:FindFirstChild(\"Humanoid\")\n\n\tif rootPart and humanoid then\n\t\t-- Get spawn position\n\t\tlocal spawnCFrame = winnerStand.CharacterSpawn.CFrame\n\n\t\t-- Offset by hip height so feet are on the ground\n\t\tlocal heightOffset = humanoid.HipHeight\n\t\tlocal offsetCFrame = spawnCFrame + Vector3.new(0, heightOffset, 0)\n\n\t\trootPart.CFrame = offsetCFrame\n\t\t\n\t\trootPart.Anchored = true\n\t\t\n\t\t-- Update winner text\n\t\twinnerStandText.Text = winner.Player.Name\n\n\t\t-- Apply winner's appearance\n\t\ttask.spawn(function()\n\t\t\tlocal success, winnerDesc = pcall(function()\n\t\t\t\treturn Players:GetHumanoidDescriptionFromUserIdAsync(winner.Player.UserId)\n\t\t\tend)\n\n\t\t\tif success and winnerDesc then\n\t\t\t\thumanoid:ApplyDescriptionAsync(winnerDesc)\n\t\t\telse\n\t\t\t\twarn(\"Failed to get description for winner:\", winner.Player.Name)\n\t\t\tend\n\t\tend)\n\tend\nend\n\n--------------------------------------------------------------------------------\n-- PLAYER MANAGEMENT\n--------------------------------------------------------------------------------\n\nfunction RoundService:InitPlayers()\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tlocal character = player.Character\n\t\tlocal humanoid = character and character:FindFirstChild(\"Humanoid\")\n\n\t\tif humanoid and humanoid.Health > 0 then\n\t\t\tStateService:ChangeState(player, StateDefinitions.PLAYING, true)\n\t\t\tStateService:AddForceField(player)\n\n\t\t\tcurrentPlayersThisGame[player] = {\n\t\t\t\tRoundsSurvived = 0,\n\t\t\t\tDeathTime = 0,\n\t\t\t}\n\t\tend\n\tend\nend\n\nfunction RoundService:OnCharacterAdded(player, character)\n\tself:HandleDeath(player, character)\n\tself:HandleLateJoin(player)\n\tself:GetPlayerImage(player)\nend\n\nfunction RoundService:HandleLateJoin(player)\n\t-- Only allow late joins if game just started\n\tif currentRound == 0 or not currentMap then return end\n\n\tlocal timeSinceStart = tick() - currentGameStartTime\n\tif timeSinceStart >= Config.LATE_JOIN_THRESHOLD then return end\n\n\tlocal isPlaying = StateService:GetState(player, StateDefinitions.PLAYING)\n\tif isPlaying then return end\n\n\t-- Validate player state\n\tlocal character = player.Character\n\tlocal humanoid = character and character:FindFirstChild(\"Humanoid\")\n\tif not humanoid or humanoid.Health <= 0 then return end\n\n\t-- Add player to game\n\tprint(\"Late joiner detected:\", player.Name)\n\tStateService:ChangeState(player, StateDefinitions.PLAYING, true)\n\tStateService:AddForceField(player)\n\n\tcurrentPlayersThisGame[player] = {\n\t\tRoundsSurvived = 0,\n\t\tDeathTime = 0,\n\t}\n\n\tTeleportService:TeleportPlayerToMap(player, currentMap)\nend\n\nfunction RoundService:HandlePlayerRemoving(player)\n\t-- If player was in active game\n\tif gameActive and currentPlayersThisGame[player] and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t-- Mark as dead\n\t\tcurrentPlayersThisGame[player].DeathTime = tick()\n\n\t\t-- Check if round should end\n\t\tgameActive = self:CheckRoundConditions()\n\tend\nend\n\nfunction RoundService:HandleDeath(player, character)\n\tlocal humanoid = character:WaitForChild(\"Humanoid\")\n\n\thumanoid.Died:Connect(function()\n\t\tif gameActive and currentPlayersThisGame[player] and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t-- Mark death time\n\t\t\tcurrentPlayersThisGame[player].DeathTime = tick()\n\t\t\tStateService:ResetStates(player)\n\t\t\t\n\t\t\t-- Update player data store stats\n\t\t\tlocal success, err = pcall(function()\n\t\t\t\tDataService.UpdateRoundDeaths(player, currentDisaster)\n\t\t\tend)\n\t\t\t\n\t\t\tif not success then\n\t\t\t\twarn(\"Failed to update round deaths for\", player.Name, \":\", err)\n\t\t\tend\n\n\t\t\t-- Check if round should end\n\t\t\tgameActive = self:CheckRoundConditions()\n\t\t\t\n\t\t\t-- Send death notification to all clients\n\t\t\tfor _, otherPlayer in ipairs(Players:GetPlayers()) do\n\t\t\t\tNetworkService:SendUIEvent(otherPlayer, {\n\t\t\t\t\tuiType = UIType.DeathFeed,\n\t\t\t\t\tplayerName = player.Name,\n\t\t\t\t})\n\t\t\tend\n\t\telse\n\t\t\tStateService:ResetStates(player)\n\t\tend\n\tend)\nend\n\nfunction RoundService:GetPlayerImage(player)\n\tlocal success, image = pcall(function()\n\t\treturn Players:GetUserThumbnailAsync(\n\t\t\tplayer.UserId,\n\t\t\tEnum.ThumbnailType.HeadShot,\n\t\t\tEnum.ThumbnailSize.Size420x420\n\t\t)\n\tend)\n\n\tPlayerImages[player.UserId] = success and image or \"rbxassetid://0\"\n\n\tif not success then\n\t\twarn(\"Failed to get thumbnail for\", player.Name)\n\tend\nend\n\n-- Helper function to get players in the current round\nfunction RoundService:GetPlayersInRound()\n\tlocal playersInGame = {}\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\ttable.insert(playersInGame, player)\n\t\tend\n\tend\n\treturn playersInGame\nend\n\n-- Helper function to calculate total coins for specific round\nfunction RoundService:CalculateTokensForRound()\n\treturn ((currentRound * Config.TOKEN_RATE) + Config.BASE_TOKENS_PER_ROUND)\t\nend\n\n-- Helper function to calculate total coins for entire game\nfunction RoundService:CalculateTokensForGame(roundsSurvived)\n\tlocal tokens = 0\n\tfor i = 1, roundsSurvived do\n\t\ttokens += self:CalculateTokensForRound(i)\n\tend\n\treturn tokens\nend\n\n--------------------------------------------------------------------------------\n-- MAP MANAGEMENT\n--------------------------------------------------------------------------------\n\nfunction RoundService:InitMap()\n\tlocal maps = ServerStorage.Maps:GetChildren()\n\tif #maps == 0 then \n\t\twarn(\"No maps found\") \n\t\treturn \n\tend\n\n\t-- Choose random map\n\tlocal selectedMap = maps[math.random(1, #maps)]\n\t--local selectedMap = ServerStorage.Maps[\"Research Center\"] -- For testing specific map\n\n\tlocal map = selectedMap:Clone()\n\tmap.Parent = workspace\n\tcurrentMap = map\nend\n\nfunction RoundService:CleanUpMap()\n\tif currentMap then\n\t\tcurrentMap:Destroy()\n\t\tcurrentMap = nil\n\tend\nend\n\n\n--------------------------------------------------------------------------------\n-- START SERVICE\n--------------------------------------------------------------------------------\nRoundService:Init()\n\nreturn RoundService"}},"referenceId":"9684"},{"className":"ModuleScript","name":"TeleportService","parentId":"9357","path":"ServerScriptService/Server/Services/Game/TeleportService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- TELEPORT SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal MovementService = require(game.ServerScriptService.Server.Services.Player.MovementService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- REMOTES --\n\n-- VARIABLES --\nlocal TeleportService = {}\n\n-- FUNCTIONS --\n-- Teleport players to map spawn part\nfunction TeleportService:TeleportPlayersToMap(map)\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tlocal char = player.Character\n\t\tif char then\n\t\t\tMovementService:ForceStand(player)\n\t\t\tlocal mapSpawn = map.SpawnPart\n\t\t\tlocal randomX = math.random(-10, 10)\n\t\t\tlocal randomZ = math.random(-10, 10)\n\t\t\tlocal randomY = math.random(0, 0)\n\t\t\tlocal randomPos = Vector3.new(mapSpawn.Position.X + randomX, mapSpawn.Position.Y + 3, mapSpawn.Position.Z + randomZ)\n\t\t\tchar:PivotTo(CFrame.new(randomPos))\n\t\tend\n\tend\nend\n\n-- Teleport single player to map spawn part\nfunction TeleportService:TeleportPlayerToMap(player, map)\n\tif player and map then\n\t\tlocal char = player.Character\n\t\tif char then\n\t\t\tMovementService:ForceStand(player)\n\t\t\tlocal mapSpawn = map.SpawnPart\n\t\t\tlocal randomX = math.random(-10, 10)\n\t\t\tlocal randomZ = math.random(-10, 10)\n\t\t\tlocal randomY = math.random(0, 0)\n\t\t\tlocal randomPos = Vector3.new(mapSpawn.Position.X + randomX, mapSpawn.Position.Y + 3, mapSpawn.Position.Z + randomZ)\n\t\t\tchar:PivotTo(CFrame.new(randomPos))\n\t\tend\n\tend\nend\n\n-- Teleport players to lobby spawn part\nfunction TeleportService:TeleportPlayersToLobby()\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t-- Only teleport is player is still in the map\n\t\tlocal isPlaying = StateService:GetState(player, StateDefinitions.PLAYING)\n\t\tif not isPlaying then continue end\n\t\t\n\t\tlocal char = player.Character\n\t\tif char then\n\t\t\tMovementService:ForceStand(player)\n\t\t\tlocal lobbySpawn = workspace.Lobby.SpawnLocation\n\t\t\tlocal randomX = math.random(-10, 10)\n\t\t\tlocal randomZ = math.random(-10, 10)\n\t\t\tlocal randomY = math.random(0, 0)\n\t\t\tlocal randomPos = Vector3.new(lobbySpawn.Position.X + randomX, lobbySpawn.Position.Y + 3, lobbySpawn.Position.Z + randomZ)\n\t\t\tchar:PivotTo(CFrame.new(randomPos))\n\t\tend\n\tend\nend\n\n\nreturn TeleportService\n"}},"referenceId":"9685"},{"className":"ModuleScript","name":"StructureService","parentId":"9357","path":"ServerScriptService/Server/Services/Game/StructureService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- STRUCTURE SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal CollectionService = game:GetService(\"CollectionService\")\n\n-- MODULES --\n\n-- ENUMS --\n\n-- REMOTES --\n\n-- VARIABLES --\nlocal StructureService = {}\n\n-- FUNCTIONS --\n\n\nfunction StructureService:Collapse(part, applyImpulse)\n\t-- Check if part is a support part\n\tlocal isSupportPart = StructureService:CheckForSupportPart(part)\n\tif isSupportPart then\n\t\t-- If no remaining support parts, collapse structure\n\t\tif not StructureService:CheckForRemainingSupports(part) then\n\t\t\tStructureService:CollapseStructure(part, applyImpulse)\n\t\tend\n\telse\n\t\tStructureService:CollapsePart(part, applyImpulse)\n\tend\nend\n\n-- Check if structure has a support part\nfunction StructureService:CheckForSupportPart(part)\n\tif part then\n\t\tif CollectionService:HasTag(part, \"Support\") then\n\t\t\tCollectionService:RemoveTag(part, \"Support\")\n\t\t\treturn true\n\t\tend\n\tend\n\treturn false\nend\n\n-- Check if any remaining support parts exist in structure\nfunction StructureService:CheckForRemainingSupports(part)\n\tif part and part.Parent then\n\t\tfor _, child in ipairs(part.Parent:GetChildren()) do\n\t\t\tif CollectionService:HasTag(child, \"Support\") then\n\t\t\t\treturn true\n\t\t\tend\n\t\tend\n\tend\n\treturn false\nend\n\n-- Collapse entire structure\nfunction StructureService:CollapseStructure(part, applyImpulse)\n\tif part and part.Parent then\n\t\tfor _, child in ipairs(part.Parent:GetDescendants()) do\t\n\t\t\tif child:IsA(\"BasePart\") then\n\t\t\t\t-- Unanchor all parts\n\t\t\t\tchild.Anchored = false\n\n\t\t\t\tif applyImpulse then\n\t\t\t\t\tself:ApplyImpulse(part)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\n-- Collapse singular part\nfunction StructureService:CollapsePart(part, applyImpulse)\n\tif part and part:IsA(\"BasePart\") then\n\t\t-- Unanchor part\n\t\tpart.Anchored = false\n\n\t\tif applyImpulse then\n\t\t\tself:ApplyImpulse(part)\n\t\tend\n\tend\nend\n\nfunction StructureService:ApplyImpulse(part)\n\tif part and part:IsA(\"BasePart\") then\n\t\t-- Add small force to part\n\t\tpart.AssemblyLinearVelocity = Vector3.new(math.random(-10, 10), math.random(10, 20), math.random(-10, 10))\n\t\tpart.AssemblyAngularVelocity = Vector3.new(math.random(-10, 10), math.random(-10, 10), math.random(-10, 10))\n\tend\nend\n\n\nreturn StructureService\n"}},"referenceId":"9686"},{"className":"ModuleScript","name":"PurchaseService","parentId":"9357","path":"ServerScriptService/Server/Services/Game/PurchaseService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- MARKETPLACE SERVICE\n-- @carsondev7\n-- Handles ALL developer product purchases\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal MarketplaceService = game:GetService(\"MarketplaceService\")\n\n-- MODULES --\nlocal DataService = require(game.ServerScriptService.Server.Services.Player.DataService)\nlocal BadgeService = require(game.ServerScriptService.Server.Services.Game.BadgeService)\nlocal ItemDefinitions = require(game.ServerScriptService.Server.Services.Items.ItemDefinitions)\n\n-- VARIABLES --\nlocal MarketplaceHandler = {}\n\nlocal remoteEvents = ReplicatedStorage.RemoteEvents\nlocal purchaseSuccessful = remoteEvents.Purchasing.PurchaseSuccessful\n\n--------------------------------------------------------------------------------\n-- PRODUCT REGISTRIES\n--------------------------------------------------------------------------------\n\n-- Donation products\nlocal donationProducts = {\n\t[\"3524509583\"] = { Value = 5 },\n\t[\"3524543479\"] = { Value = 10 },\n\t[\"3524545312\"] = { Value = 25 },\n\t[\"3524546393\"] = { Value = 50 },\n\t[\"3524546814\"] = { Value = 100 },\n\t[\"3524547268\"] = { Value = 250 },\n}\n\n-- Shop item products (productId -> itemId)\n-- Build this automatically from ItemDefinitions\nlocal shopProducts = {}\nfor itemId, item in pairs(ItemDefinitions) do\n\tif item.DeveloperProductId then\n\t\tshopProducts[tostring(item.DeveloperProductId)] = itemId\n\tend\nend\n\n--------------------------------------------------------------------------------\n-- RECEIPT HANDLER\n--------------------------------------------------------------------------------\n\nMarketplaceService.ProcessReceipt = function(receiptInfo)\n\tlocal productId = tostring(receiptInfo.ProductId)\n\tlocal player = Players:GetPlayerByUserId(receiptInfo.PlayerId)\n\n\t-- Player might have left - still need to process\n\tif not player then\n\t\treturn Enum.ProductPurchaseDecision.NotProcessedYet\n\tend\n\n\t-- Get player data\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then\n\t\treturn Enum.ProductPurchaseDecision.NotProcessedYet\n\tend\n\n\t-- Check if it's a donation\n\tlocal donationProduct = donationProducts[productId]\n\tif donationProduct then\n\t\tlocal success = MarketplaceHandler:ProcessDonation(player, profile, donationProduct)\n\t\tif success then\n\t\t\treturn Enum.ProductPurchaseDecision.PurchaseGranted\n\t\telse\n\t\t\treturn Enum.ProductPurchaseDecision.NotProcessedYet\n\t\tend\n\tend\n\n\t-- Check if it's a shop item\n\tlocal itemId = shopProducts[productId]\n\tif itemId then\n\t\tlocal success = MarketplaceHandler:ProcessShopPurchase(player, profile, itemId)\n\t\tif success then\n\t\t\tpurchaseSuccessful:FireClient(player, itemId, true)\n\t\t\treturn Enum.ProductPurchaseDecision.PurchaseGranted\n\t\telse\n\t\t\tpurchaseSuccessful:FireClient(player, itemId, false)\n\t\t\treturn Enum.ProductPurchaseDecision.NotProcessedYet\n\t\tend\n\tend\n\n\t-- Unknown product - still grant it so player isnt charged twice\n\twarn(\"Unknown product ID:\", productId)\n\treturn Enum.ProductPurchaseDecision.PurchaseGranted\nend\n\n--------------------------------------------------------------------------------\n-- PROCESSORS\n--------------------------------------------------------------------------------\n\nfunction MarketplaceHandler:ProcessDonation(player, profile, donationProduct)\n\tlocal success, err = pcall(function()\n\t\tlocal donationAmount = donationProduct.Value\n\t\tprint(\"Donation of\", donationAmount, \"received from\", player.Name)\n\n\t\tDataService.AddDonation(player, donationAmount)\n\t\tBadgeService:AwardBadge(player, BadgeService.badgeAssetIds.Supporter)\n\tend)\n\n\tif not success then\n\t\twarn(\"Failed to process donation:\", err)\n\t\treturn false\n\tend\n\n\treturn true\nend\n\nfunction MarketplaceHandler:ProcessShopPurchase(player, profile, itemId)\n\tlocal item = ItemDefinitions[itemId]\n\tif not item then\n\t\twarn(\"Shop item not found:\", itemId)\n\t\treturn false\n\tend\n\n\tlocal result = true\n\n\tlocal success, err = pcall(function()\n\t\tprint(\"Shop purchase:\", item.Name, \"for\", player.Name)\n\n\t\tif item.Category == \"Consumable\" then\n\t\t\tlocal currentAmount = profile.Data.Inventory.Consumables[itemId] or 0\n\t\t\tif currentAmount < item.MaxStack then\n\t\t\t\tprofile.Data.Inventory.Consumables[itemId] = currentAmount + 1\n\t\t\telse\n\t\t\t\tresult = false \n\t\t\tend\n\n\t\telseif item.Category == \"Gear\" then\n\t\t\tif not table.find(profile.Data.Inventory.Gear, itemId) then\n\t\t\t\ttable.insert(profile.Data.Inventory.Gear, itemId)\n\t\t\telse\n\t\t\t\tresult = false\n\t\t\tend\n\n\t\telseif item.Category == \"Cosmetic\" then\n\t\t\tif not table.find(profile.Data.Inventory.Cosmetics, itemId) then\n\t\t\t\ttable.insert(profile.Data.Inventory.Cosmetics, itemId)\n\t\t\t\tif not profile.Data.Inventory.EquippedCosmetics[item.Category] then\n\t\t\t\t\tprofile.Data.Inventory.EquippedCosmetics[item.Category] = itemId\n\t\t\t\tend\n\t\t\telse\n\t\t\t\tresult = false\n\t\t\tend\n\n\t\telse\n\t\t\twarn(\"Unknown item category:\", item.Category)\n\t\t\tresult = false\n\t\tend\n\tend)\n\n\tif not success then\n\t\twarn(\"Failed to process shop purchase:\", err)\n\t\treturn false\n\tend\n\n\treturn result\nend\n\n--------------------------------------------------------------------------------\n-- INIT\n--------------------------------------------------------------------------------\n\nfunction MarketplaceHandler:Init()\nend\n\nMarketplaceHandler:Init()\n\nreturn MarketplaceHandler"}},"referenceId":"9687"},{"className":"ModuleScript","name":"RaycastService","parentId":"9357","path":"ServerScriptService/Server/Services/Game/RaycastService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- RAYCAST SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal CollectionService = game:GetService(\"CollectionService\")\n\n-- MODULES --\n\n-- ENUMS --\n\n-- REMOTES --\n\n-- VARIABLES --\nlocal RaycastService = {}\n\n-- FUNCTIONS --\n\nfunction RaycastService:HasLineOfSight(fromChar, toChar)\n\tlocal fromHRP = fromChar:FindFirstChild(\"HumanoidRootPart\")\n\tlocal toHRP = toChar:FindFirstChild(\"HumanoidRootPart\")\n\tif not fromHRP or not toHRP then return false end\n\n\tRaycastParams.FilterDescendantsInstances = { fromChar }\n\n\tlocal direction = toHRP.Position - fromHRP.Position\n\tlocal result = workspace:Raycast(fromHRP.Position, direction, RaycastParams)\n\n\tif not result then\n\t\treturn true\n\tend\n\n\treturn result.Instance:IsDescendantOf(toChar)\nend\n\nfunction RaycastService:GetSamplePoints(part)\n\tif not part then return end\n\n\tlocal cf = part.CFrame\n\tlocal size = part.Size\n\n\treturn {\n\t\tcf.Position, -- center\n\n\t\t-- corners\n\t\tcf * Vector3.new( size.X/2, 0,  size.Z/2),\n\t\tcf * Vector3.new(-size.X/2, 0,  size.Z/2),\n\t\tcf * Vector3.new( size.X/2, 0, -size.Z/2),\n\t\tcf * Vector3.new(-size.X/2, 0, -size.Z/2),\n\t}\nend\n\nfunction RaycastService:GetExternalParts(currentMap, params)\n\tif not currentMap then return end\n\n\tlocal externalParts = {}\n\tfor _, part in currentMap.InteractiveParts:GetDescendants() do\n\t\tif part:IsA(\"BasePart\") then\n\t\t\t-- Check if part is external\n\t\t\tlocal isExternal = self:IsPartExternal(part, params)\n\t\t\tif isExternal then\n\t\t\t\ttable.insert(externalParts, part)\n\t\t\t\tCollectionService:AddTag(part, \"External\")\n\t\t\tend\n\t\tend\n\tend\n\treturn externalParts\nend\n\n\nfunction RaycastService:IsPartExternal(part, params)\n\tif not part then return end\n\t\n\t-- Check if part is already tagged as external\n\tif CollectionService:HasTag(part, \"External\") then\n\t\treturn true\n\tend\n\t\n\t-- Check if part is external\n\tlocal samplePoints = self:GetSamplePoints(part)\n\tif not samplePoints then return false end\n\t\n\tfor _, point in samplePoints do\n\t\t-- raycast up to see if part is outdoors\n\t\tlocal result = workspace:Raycast(point, Vector3.new(0, 100, 0), params)\n\t\tif result == nil then\n\t\t\treturn true\n\t\tend\n\tend\nend\n\n\nreturn RaycastService\n"}},"referenceId":"9688"},{"className":"ModuleScript","name":"BadgeService","parentId":"9357","path":"ServerScriptService/Server/Services/Game/BadgeService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- BADGE SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal BS = game:GetService(\"BadgeService\")\n\n-- MODULES --\nlocal DataService = require(script.Parent.Parent.Player.DataService)\n\n-- VARIABLES --\nlocal BadgeService = {}\n\nBadgeService.badgeAssetIds = {\n\tPlayTester = \"2136872103763951\",\n\tSupporter = \"4128222154169333\",\n}\n\n\n--------------------------------------------------------------------------------\n-- BADGE FUNCTIONS\n--------------------------------------------------------------------------------\n\n-- Listen for badges\nfunction BadgeService:AwardBadge(player, badgeId)\n\tlocal success, result = pcall(function()\n\t\tif not BS:UserHasBadgeAsync(player.UserId, badgeId) then\n\t\t\tBS:AwardBadgeAsync(player.UserId, badgeId)\n\t\tend\n\tend)\n\tif not success then\n\t\twarn(\"Failed to award badge: \" .. tostring(result))\n\tend\n\treturn success\nend\n\n\n-- Award players badges for join events\nfunction BadgeService:ListenForJoins()\n\tPlayers.PlayerAdded:Connect(function(player)\n\t\t-- Award play tester badges \n\t\tif not BS:UserHasBadgeAsync(player.UserId, self.badgeAssetIds.PlayTester) then\n\t\t\tBS:AwardBadgeAsync(player.UserId, self.badgeAssetIds.PlayTester)\n\t\t\tprint(\"Awarded play tester badge to \" .. player.Name)\n\t\tend\n\tend)\nend\n\nPlayers.PlayerAdded:Connect(function(player)\n\t-- phantom\n\tif player.UserId == 4676059716 then\n\t\t-- Award supporter badges to these folk\n\t\tif not BS:UserHasBadgeAsync(player.UserId, BadgeService.badgeAssetIds.Supporter) then\n\t\t\tBS:AwardBadgeAsync(player.UserId, BadgeService.badgeAssetIds.Supporter)\n\t\tend\n\tend\n\t\nend)\n\n\nBadgeService:ListenForJoins()\nreturn BadgeService\n"}},"referenceId":"9689"},{"className":"ModuleScript","name":"StructureServiceINACTIVE","parentId":"9357","path":"ServerScriptService/Server/Services/Game/StructureServiceINACTIVE","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- STRUCTURE SERVICE\n-- @carsondev7\n----------------------------------------\n-- SERVICES --\nlocal CollectionService = game:GetService(\"CollectionService\")\n\n-- VARIABLES --\nlocal StructureService = {}\n\n-- FUNCTIONS --\n\n-- Add to StructureService\n\n-- Collapse multiple parts efficiently\nfunction StructureService:BatchCollapse(parts, applyImpulse)\n\tif not parts or #parts == 0 then return end\n\n\t-- Group parts by structure\n\tlocal structureGroups = {}\n\tfor _, part in ipairs(parts) do\n\t\tif part and part:IsA(\"BasePart\") and part.Anchored then\n\t\t\tlocal structure = part.Parent\n\t\t\tif structure then\n\t\t\t\tif not structureGroups[structure] then\n\t\t\t\t\tstructureGroups[structure] = {}\n\t\t\t\tend\n\t\t\t\ttable.insert(structureGroups[structure], part)\n\t\t\tend\n\t\tend\n\tend\n\n\t-- Process each structure once\n\tfor structure, structureParts in pairs(structureGroups) do\n\t\t-- Collapse all parts in this structure\n\t\tfor _, part in ipairs(structureParts) do\n\t\t\tStructureService:CollapsePart(part, applyImpulse)\n\t\tend\n\n\t\t-- Check structural integrity once per structure instead of per part\n\t\tStructureService:CheckStructuralIntegrity(structure, applyImpulse)\n\tend\nend\n\n-- Main entry point for collapsing a single part\nfunction StructureService:Collapse(part, applyImpulse)\n\tif not part or not part:IsA(\"BasePart\") then return end\n\n\tlocal structure = part.Parent\n\tif not structure then return end\n\n\t-- Collapse this specific part and break its welds\n\tStructureService:CollapsePart(part, applyImpulse)\n\n\t-- Check if any other parts lost their connection to anchored parts\n\tStructureService:CheckStructuralIntegrity(structure, applyImpulse)\nend\n\n-- Check which parts still have connection to anchored parts\nfunction StructureService:CheckStructuralIntegrity(structure, applyImpulse)\n\tif not structure then return end\n\t-- Get all non support parts (non-anchored)\n\tlocal nonSupportParts = {}\n\n\t-- Simple approach: just get all descendants once\n\tfor _, child in ipairs(structure:GetDescendants()) do\n\t\tif child:IsA(\"BasePart\") and not CollectionService:HasTag(child, \"Support\") then\n\t\t\ttable.insert(nonSupportParts, child)\n\t\tend\n\tend\n\n\t-- Collapse any parts not connected to an anchored part\n\tfor _, part in ipairs(nonSupportParts) do\n\t\tif not StructureService:IsConnectedToSupportPart(part) then\n\t\t\tStructureService:CollapsePart(part, applyImpulse)\n\t\tend\n\tend\nend\n\n-- Check if a part is connected to any anchored part via welds\nfunction StructureService:IsConnectedToSupportPart(part)\n\tif not part or not part:IsA(\"BasePart\") then return false end\n\n\t-- Get all parts connected via welds/constraints\n\tlocal connectedParts = part:GetConnectedParts(true) -- recursive = true\n\n\t-- Check if any connected part is anchored\n\tfor _, connectedPart in ipairs(connectedParts) do\n\t\tif CollectionService:HasTag(connectedPart, \"Support\") then\n\t\t\treturn true\n\t\tend\n\tend\n\n\treturn false\nend\n\n-- Collapse singular part and break all its connections\nfunction StructureService:CollapsePart(part, applyImpulse)\n\tif not part or not part:IsA(\"BasePart\") then return end\n\n\t-- Break all welds connected to this part or return early if part already collapsed\n\tlocal hasConnections = StructureService:BreakConnections(part)\n\tif not hasConnections then return end\n\n\t-- Unanchor the part\n\tpart.Anchored = false\n\n\t-- Apply physics impulse if requested\n\tif applyImpulse then\n\t\tStructureService:ApplyImpulse(part)\n\tend\nend\n\n-- Break all weld constraints connected to a part\nfunction StructureService:BreakConnections(part)\n\t\n\tlocal connectionsFound = 0 \n\t\n\t-- Destroy all constraints parented to this part\n\tfor _, child in ipairs(part:GetChildren()) do\n\t\tif child:IsA(\"WeldConstraint\") or child:IsA(\"Weld\") or child:IsA(\"Motor6D\") then\n\t\t\tconnectionsFound += 1\n\t\t\tchild:Destroy()\n\t\tend\n\tend\n\n\t-- Also destroy any joints connected to this part (covers welds parented elsewhere)\n\tfor _, joint in ipairs(part:GetJoints()) do\n\t\tconnectionsFound += 1\n\t\tjoint:Destroy()\n\tend\n\t\n\treturn connectionsFound > 0\nend\n\n-- Apply physics impulse to a part\nfunction StructureService:ApplyImpulse(part)\n\tif not part or not part:IsA(\"BasePart\") or part.Anchored then return end\n\n\tpart.AssemblyLinearVelocity = Vector3.new(\n\t\tmath.random(-10, 10), \n\t\tmath.random(10, 20), \n\t\tmath.random(-10, 10)\n\t)\n\tpart.AssemblyAngularVelocity = Vector3.new(\n\t\tmath.random(-10, 10), \n\t\tmath.random(-10, 10), \n\t\tmath.random(-10, 10)\n\t)\nend\n\nreturn StructureService"}},"referenceId":"9690"},{"className":"ModuleScript","name":"WeldService","parentId":"9357","path":"ServerScriptService/Server/Services/Game/WeldService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- WELD SERVICE\n-- @carsondev7\n----------------------------------------\n\nlocal WeldingService = {}\n\n-- Weld all structures in map\nfunction WeldingService:WeldMapStructures(map)\n\tif not map then return end\n\t\n\tfor _, structure in ipairs(map.InteractiveParts:GetDescendants()) do\n\t\tif structure:IsA(\"Model\") then\n\t\t\tself:WeldStructure(structure)\n\t\tend\n\tend\nend\n\nfunction WeldingService:WeldStructure(structure)\n\tlocal parts = {}\n\n\t-- Collect all BaseParts in the structure\n\tfor _, descendant in ipairs(structure:GetDescendants()) do\n\t\tif descendant:IsA(\"BasePart\") then\n\t\t\ttable.insert(parts, descendant)\n\t\tend\n\tend\n\n\t-- Weld each part to nearby parts using overlap detection\n\tfor i, part in ipairs(parts) do\n\t\tfor j = i + 1, #parts do\n\t\t\tlocal otherPart = parts[j]\n\n\t\t\tif WeldingService:ArePartsTouching(part, otherPart) then\n\t\t\t\t-- Create weld between these two parts\n\t\t\t\tlocal weld = Instance.new(\"WeldConstraint\")\n\t\t\t\tweld.Part0 = part\n\t\t\t\tweld.Part1 = otherPart\n\t\t\t\tweld.Parent = part\n\t\t\tend\n\t\tend\n\tend\n\t\n\t\n\t-- Weld each part to everything it's touching\n\tfor _, part in ipairs(parts) do\n\t\tlocal touching = part:GetTouchingParts()\n\n\t\tfor _, touchingPart in ipairs(touching) do\n\t\t\t-- Only weld if the touching part is also in this structure\n\t\t\tif table.find(parts, touchingPart) then\n\t\t\t\t-- Check if already welded (avoid duplicates)\n\t\t\t\tlocal alreadyWelded = false\n\t\t\t\tfor _, child in ipairs(part:GetChildren()) do\n\t\t\t\t\tif child:IsA(\"WeldConstraint\") then\n\t\t\t\t\t\tif child.Part0 == touchingPart or child.Part1 == touchingPart then\n\t\t\t\t\t\t\talreadyWelded = true\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\t\t\t\tend\n\n\t\t\t\t-- Create the weld\n\t\t\t\tif not alreadyWelded then\n\t\t\t\t\tlocal weld = Instance.new(\"WeldConstraint\")\n\t\t\t\t\tweld.Part0 = part\n\t\t\t\t\tweld.Part1 = touchingPart\n\t\t\t\t\tweld.Parent = part\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\n-- Check if two parts are touching using region overlap\nfunction WeldingService:ArePartsTouching(part1, part2)\n\tlocal tolerance = 0.5 -- Small gap tolerance\n\n\t-- Get the bounds of both parts\n\tlocal pos1, size1 = part1.Position, part1.Size\n\tlocal pos2, size2 = part2.Position, part2.Size\n\n\t-- Check if bounding boxes overlap on all axes\n\tlocal overlapX = math.abs(pos1.X - pos2.X) < (size1.X + size2.X) / 2 + tolerance\n\tlocal overlapY = math.abs(pos1.Y - pos2.Y) < (size1.Y + size2.Y) / 2 + tolerance\n\tlocal overlapZ = math.abs(pos1.Z - pos2.Z) < (size1.Z + size2.Z) / 2 + tolerance\n\n\treturn overlapX and overlapY and overlapZ\nend\n\nreturn WeldingService"}},"referenceId":"9691"},{"className":"Folder","name":"Player","parentId":"9356","path":"ServerScriptService/Server/Services/Player","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9358"},{"className":"ModuleScript","name":"MovementService","parentId":"9358","path":"ServerScriptService/Server/Services/Player/MovementService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- MOVEMENT SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal RunService = game:GetService(\"RunService\")\nlocal TweenService = game:GetService(\"TweenService\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- REMOTES --\nlocal remoteEvents = ReplicatedStorage:WaitForChild(\"RemoteEvents\")\n\n-- CONFIGS --\nlocal MIN_VELOCITY = 65\t\t\t-- Minimum velocity to start falling movement\nlocal MAX_VELOCITY = 400\t\t-- Maximum falling velocity\n\n\nlocal MovementService = {}\n\n\n\n-- Freeze all players if they are in game\nfunction MovementService:FreezePlayers()\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t\t\n\t\tlocal char = player.Character\n\t\tif char then\n\t\t\tlocal humanoid = char:FindFirstChild(\"Humanoid\")\n\t\t\tlocal rootPart = char:FindFirstChild(\"HumanoidRootPart\")\n\t\t\tif humanoid and StateService:GetState(player, StateDefinitions.PLAYING) then \n\t\t\t\t--self:CreateFreezeEffects(rootPart, char)\n\t\t\t\tStateService:ChangeState(player, StateDefinitions.FROZEN, true)\n\t\t\t\thumanoid.WalkSpeed = 0\n\t\t\t\thumanoid.JumpHeight = 0\n\t\t\tend\n\t\tend\n\tend\nend\n\n-- Unfreeze players\nfunction MovementService:UnfreezePlayers()\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tlocal char = player.Character\n\t\tif char then\n\t\t\tlocal humanoid = char:FindFirstChild(\"Humanoid\")\n\t\t\tif humanoid then \n\t\t\t\t--local ice = char:FindFirstChild(\"IceCube\")\n\t\t\t\t--if ice then\n\t\t\t\t--\tTweenService:Create(ice, TweenInfo.new(ICE_FADE_TIME), {Transparency = 1}):Play()\n\t\t\t\t--\ttask.delay(ICE_FADE_TIME, function()\n\t\t\t\t--\t\tice:Destroy()\n\t\t\t\t--\tend)\n\t\t\t\t--end\n\t\t\t\t\n\t\t\t\tStateService:ChangeState(player, StateDefinitions.FROZEN, false)\n\t\t\t\thumanoid.WalkSpeed = 16\n\t\t\t\thumanoid.JumpHeight = 7.2\n\t\t\tend\n\t\tend\n\tend\nend\n\n-- Force player to stand up if they are sitting\nfunction MovementService:ForceStand(player)\n\tif not player then return end\n\t\n\tlocal humanoid = player.Character:FindFirstChild(\"Humanoid\")\n\tif humanoid then\n\t\tif humanoid.Sit then\n\t\t\thumanoid.Sit = false\n\t\tend\n\tend\nend\n\n-- Detect if a player is falling\nfunction MovementService:DetectFalling(player)\n\tif not player then return end\n\n\tlocal character = player.Character\n\tif not character then return end\n\n\tlocal rate=1/22\n\n\tlocal damage=0\n\tlocal lastvelocity=0\n\n\twhile true do\n\t\tlocal delta=task.wait(rate)\n\t\tlocal root = character:FindFirstChild(\"HumanoidRootPart\")\n\t\tif root~=nil then\n\t\t\tlocal currentvelocity=(root.Velocity).magnitude\n\t\t\tlocal pain=currentvelocity*(rate/delta)-MIN_VELOCITY\n\t\t\tif pain>0 then\n\t\t\t\tdamage=damage+(pain/(MAX_VELOCITY-MIN_VELOCITY)*100)\n\t\t\telseif damage>0 then\n\t\t\t\tlocal h=character:FindFirstChild(\"Humanoid\")\n\t\t\t\tif h and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t\t\th:TakeDamage(damage)\n\t\t\t\t\tdamage=0\n\t\t\t\tend\t\n\t\t\tend\n\t\t\tlastvelocity=currentvelocity\n\t\tend\n\tend\nend\n\n\n\nfunction MovementService:Init()\n\tgame:GetService('Players').PlayerAdded:Connect(function(player)\n\t\tplayer.CharacterAdded:Connect(function(character)\n\t\t\tself:DetectFalling(player)\n\t\tend)\n\tend)\nend\n\n\nMovementService:Init()\nreturn MovementService\n"}},"referenceId":"9692"},{"className":"ModuleScript","name":"StateService","parentId":"9358","path":"ServerScriptService/Server/Services/Player/StateService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- STATE SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\n-- MODULES --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- VARIABLES --\nlocal playerStates = {}\n\nlocal StateService = {}\n\n-- FUNCTIONS --\n\n-- Add temporary force field to players\nfunction StateService:AddForceField(player)\n\tlocal character = player.Character\n\tif character then\n\t\tlocal forceField = Instance.new(\"ForceField\")\n\t\tforceField.Visible = false\n\t\tforceField.Parent = character\n\tend\n\t\n\ttask.delay(3, function()\n\t\tlocal forceField = character:FindFirstChildOfClass(\"ForceField\")\n\t\tif forceField then\n\t\t\tforceField:Destroy()\n\t\tend\n\tend)\nend\n\n\n-- Change player state\nfunction StateService:ChangeState(player, state, value)\n\tif not playerStates[player] then\n\t\tplayerStates[player] = {}\n\tend\n\t\n\tplayerStates[player][state] = value\n\t\n\t-- If state has a cooldown, then reset it after the cooldown\n\tif state.Cooldown then\n\t\ttask.delay(state.Cooldown, function()\n\t\t\tplayerStates[player][state] = state.Default\n\t\tend)\n\tend\nend\n\n-- Get player state\nfunction StateService:GetState(player, state)\n\tif not playerStates[player] then\n\t\tplayerStates[player] = {}\n\tend\n\t\n\treturn playerStates[player][state]\nend\n\nfunction StateService:ResetStates(player)\n\tif not playerStates[player] then\n\t\tplayerStates[player] = {}\n\tend\n\t\n\tfor _, state in pairs(StateDefinitions) do\n\t\tplayerStates[player][state] = state.Default\n\tend\nend\n\nfunction StateService:ResetAllStates()\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tself:ResetStates(player)\n\t\tself:ResetPlayer(player)\n\tend\nend\n\n-- Reset player properties\nfunction StateService:ResetPlayer(player)\n\tif player then\n\t\tlocal char = player.Character\n\t\tif char then\n\t\t\tlocal humanoid = char:FindFirstChild(\"Humanoid\")\n\t\t\tif humanoid then\n\t\t\t\thumanoid.Health = 100\n\t\t\tend\n\t\tend\n\tend\nend\n\nreturn StateService\n"}},"referenceId":"9693"},{"className":"ModuleScript","name":"StateDefinitions","parentId":"9358","path":"ServerScriptService/Server/Services/Player/StateDefinitions","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"------------------------------------------\n-- STATE DEFINITIONS\n-- @carsondev7\n------------------------------------------\n\nreturn {\n\tFROZEN = {\n\t\tDefault = false,\n\t},\n\tPLAYING = {\n\t\tDefault = false,\n\t},\n\tDAMAGED = {\n\t\tDefault = false,\n\t\tCooldown = 2,\n\t},\n\tINFECTED = {\n\t\tDefault = false,\n\t},\n}\n"}},"referenceId":"9694"},{"className":"ModuleScript","name":"DataService","parentId":"9358","path":"ServerScriptService/Server/Services/Player/DataService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- DATA SERVICE MODULE SCRIPT \n-- @carsondev7\n----------------------------------------\n\n----------------------------\n-- SERVICES --\n----------------------------\nlocal Players = game:GetService(\"Players\")\nlocal RunService = game:GetService(\"RunService\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerScriptService = game:GetService(\"ServerScriptService\")\nlocal HttpService = game:GetService(\"HttpService\")\n\n----------------------------\n-- VARIABLES --\n----------------------------\nlocal DataService = {}\n\n-- MODULES --\nlocal ProfileStore = require(script.Parent.ProfileStore)\nlocal PlayerStoreTemplate = require(script.Parent.ProfileStoreTemplate)\nlocal NetworkService = require(ServerScriptService.Server.Services.Networking.NetworkService)\n\n-- ENUMS --\nlocal UIType = require(ReplicatedStorage.Shared.Modules.Enums.UIType)\nlocal SoundType\t= require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n\n\nDataService.Profiles = {} -- Player data\n\n-- CONSTANTS --\n\n\n\n----------------------------\n-- PRIVATE FUNCTIONS --\n----------------------------\n\n\n-- Initialize player leaderstats and synchronize player data\nlocal function _initializePlayer(player: Player, profile)\n    -- Leaderstats\n    local leaderstats = Instance.new(\"Folder\", player)\n    leaderstats.Name = \"leaderstats\"\n\t\n    local wins = Instance.new(\"NumberValue\")\n\twins.Name = \"Wins\"\n\twins.Value = profile.Data.Wins\n\twins.Parent = leaderstats\n\t\n\t-- Reset inventory for now\n\tprofile.Data.Inventory.Consumables = {}\n\tprofile.Data.Inventory.Gear = {}\n\tprofile.Data.Inventory.Cosmetics = {}\n\tprofile.Data.Inventory.EquippedCosmetics = {}\n\t\n\tprint(profile.Data.Inventory)\n\t\n\t-- Update ui\n\tNetworkService:SendUIEvent(player, {\n\t\tuiType = UIType.UpdateTokens,\t\t-- UI Type\n\t\ttotalTokens = profile.Data.Tokens,\t-- Total tokens\n\t})\nend\n\n-- Creates and stores player profile\nlocal function _playerAdded(player: Player, PlayerStore)\n    local profile = PlayerStore:StartSessionAsync(\"Player_\" .. player.UserId, {\n        Cancel = function()\n            return player.Parent ~= Players\n        end\n    })\n\n    -- Sanity check for player existence\n    if profile ~= nil then\n        profile:AddUserId(player.UserId) -- GGPR compliance\n        profile:Reconcile() -- Fill in missing data variables from template (if template changes between sessions)\n\n        -- Player left/joined different server (session locking)\n        profile.OnSessionEnd:Connect(function()\n            DataService.Profiles[player] = nil\n            player:Kick(\"Data error occured. Please rejoin.\")\n        end)\n\n        -- Confirmed profile exists --> store player data\n        if player.Parent == Players then\n            DataService.Profiles[player] = profile\n            _initializePlayer(player, profile) -- Initialize player leaderstats\n        else\n            profile:EndSession() \n        end\n    else\n        player:Kick(\"Data error occured. Please rejoin.\")\n    end\nend\n\n-- Remove player profile\nlocal function _playerRemoving(player: Player)\n    local profile = DataService.Profiles[player]\n    if not profile then return end -- Validate profile\n\n    profile:EndSession() -- End player profile session\n    DataService.Profiles[player] = nil -- Clear profile memory\nend\n\n----------------------------\n-- PUBLIC FUNCTIONS --\n----------------------------\n\nfunction DataService:Init()\n    -- Initialize player data store\n\tlocal PlayerStore = ProfileStore.New(self:GetStoreName(), PlayerStoreTemplate)\n    \n\tPlayers.PlayerAdded:Connect(function(player)\n        _playerAdded(player, PlayerStore)\n    end)\n\n    Players.PlayerRemoving:Connect(function(player)\n        _playerRemoving(player)\n    end)\nend\n\n-- Return the name of the correct data store given the player circumstance\nfunction DataService:GetStoreName()\n    return RunService:IsStudio() and \"Test1\" or \"LiveTest1\"\nend\n\n\n-- Helper functions for getting / updating player data\n\n-- Wait for profile to be loaded and then return it\nfunction DataService:GetProfile(player: Player)\n    while not self.Profiles[player] do\n        task.wait()\n    end\n    return self.Profiles[player]\nend\n\n\n-- Add coins to player\nfunction DataService.AddWin(player: Player)\n\tif not player then return end\n\t\n    -- Get player profile\n    local profile = DataService:GetProfile(player)\n    if not profile then return end\n\n    -- If profile is valid\n\tif profile then\n        profile.Data.Wins += 1 -- Update profile store data\n\t\t\n        -- Update leaderstats\n        local leaderstats = player:FindFirstChild(\"leaderstats\")\n        leaderstats.Wins.Value = profile.Data.Wins\n     end\nend\n\n-- Add donation to player\nfunction DataService.AddDonation(player: Player, donatedAmount: number)\n\tif not player then return end\n\n\t-- Get player profile\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return end\n\n\n\t-- If profile is valid\n\tif profile then\n\t\tprofile.Data.Donated += donatedAmount -- Update profile store data\n\tend\nend\n\n-- Add tokens to player\nfunction DataService.AddTokens(player: Player, tokenAmount: number, reason: string)\n\tif not player then return end\n\n\t-- Get player profile\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return end\n\n\n\t-- If profile is valid\n\tif profile then\n\t\tprofile.Data.Tokens += tokenAmount -- Update profile store data\n\t\t\n\t\t-- Update player ui\n\t\tNetworkService:SendUIEvent(player, {\n\t\t\tuiType = UIType.UpdateTokens,\t\t-- UI Type\n\t\t\ttotalTokens = profile.Data.Tokens,\t-- Total tokens\n\t\t\ttokenAmount = tokenAmount,\t\t\t-- Amount of tokens added\n\t\t\treason = reason,\t\t\t\t\t-- Reason for tokens added\n\t\t\ttokenType = \"Add\"\t\t\t\t\t-- Token type\n\t\t})\n\t\t\n\t\t-- Send sound effect\n\t\tNetworkService:SendSoundEffect(player, {soundType = SoundType.AddTokens})\n\tend\nend\n\n-- Add tokens to player\nfunction DataService.RemoveTokens(player: Player, tokenAmount: number, reason: string)\n\tif not player then return end\n\n\t-- Get player profile\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return end\n\n\t\n\t-- If profile is valid\n\tif profile then\n\t\tprofile.Data.Tokens -= tokenAmount -- Update profile store data\n\n\t\t-- Update player ui\n\t\tNetworkService:SendUIEvent(player, {\n\t\t\tuiType = UIType.UpdateTokens,\t\t-- UI Type\n\t\t\ttotalTokens = profile.Data.Tokens,\t-- Total tokens\n\t\t\ttokenAmount = tokenAmount,\t\t\t-- Amount of tokens added\n\t\t\treason = reason,\t\t\t\t\t-- Reason for tokens added\n\t\t\ttokenType = \"Remove\"\t\t\t\t-- Token type\n\t\t})\n\n\t\t-- Send sound effect\n\t\tNetworkService:SendSoundEffect(player, {soundType = SoundType.Purchase})\n\tend\nend\n\n-- Update player's round survivals\nfunction DataService.UpdateRoundSurvivals(player: Player, currentDisaster)\n\tif not player or not currentDisaster then return end\n\t\t\n\t-- Get player profile\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return end\n\t\n\t-- If profile is valid\n\tif profile.Data.SurvivalsByDisaster[currentDisaster.Name] then\n\t\tprofile.Data.RoundsSurvived += 1\n\t\tprofile.Data.SurvivalsByDisaster[currentDisaster.Name] += 1\n\tend\nend\n\nfunction DataService.UpdateRoundDeaths(player: Player, currentDisaster)\n\tif not player or not currentDisaster then return end\n\t\n\t-- Get player profile\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return end\n\t\n\t-- If profile is valid\n\tif profile.Data.DeathsByDisaster[currentDisaster.Name] then\n\t\tprofile.Data.DeathsByDisaster[currentDisaster.Name] += 1\n\tend\nend\n\n\n\n----------------------------\n-- MAIN --\n----------------------------\nDataService:Init()\n\n\nreturn DataService"}},"referenceId":"9695"},{"className":"ModuleScript","name":"ProfileStore","parentId":"9358","path":"ServerScriptService/Server/Services/Player/ProfileStore","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"--[[\nMAD STUDIO (by loleris)\n\n-[ProfileStore]---------------------------------------\n\n\tPeriodic DataStore saving solution with session locking\n\t\n\tWARNINGS FOR \"Profile.Data\" VALUES:\n\t \t! Do not create numeric tables with gaps - attempting to store such tables will result in an error.\n\t\t! Do not create mixed tables (some values indexed by number and others by a string key)\n\t\t\t- only numerically indexed  data will be stored.\n\t\t! Do not index tables by anything other than numbers and strings.\n\t\t! Do not reference Roblox Instances\n\t\t! Do not reference userdata (Vector3, Color3, CFrame...) - Serialize userdata before referencing\n\t\t! Do not reference functions\n\t\t\n\tMembers:\n\t\n\t\tProfileStore.IsClosing          [bool]\n\t\t\t-- Set to true after a game:BindToClose() trigger\n\t\t\t\n\t\tProfileStore.IsCriticalState    [bool]\n\t\t\t-- Set to true when ProfileStore experiences too many consecutive errors\n\t\t\n\t\tProfileStore.OnError            [Signal] (message, store_name, profile_key)\n\t\t\t-- Most ProfileStore errors will be caught and passed to this signal\n\t\t\t\n\t\tProfileStore.OnOverwrite        [Signal] (store_name, profile_key)\n\t\t\t-- Triggered when a DataStore key was likely used to store data that wasn't\n\t\t\ta ProfileStore profile or the ProfileStore structure was invalidly manually\n\t\t\taltered for that DataStore key\n\t\t\t\n\t\tProfileStore.OnCriticalToggle   [Signal] (is_critical)\n\t\t\t-- Triggered when ProfileStore experiences too many consecutive errors\n\t\t\n\t\tProfileStore.DataStoreState     [string] (\"NotReady\", \"NoInternet\", \"NoAccess\", \"Access\")\n\t\t\t-- This value resembles ProfileStore's access to the DataStore; The value starts\n\t\t\tas \"NotReady\" and will eventually change to one of the other 3 possible values.\n\t\n\tFunctions:\n\t\n\t\tProfileStore.New(store_name, template?) --> [ProfileStore]\n\t\t\tstore_name   [string] -- DataStore name\n\t\t\ttemplate     [table] or nil -- Profiles will default to given table (hard-copy) when no data was saved previously\n\t\t\t\n\t\tProfileStore.SetConstant(name, value)\n\t\t\tname    [string]\n\t\t\tvalue   [number]\n\t\t\t\t\n\tMembers [ProfileStore]:\n\t\n\t\tProfileStore.Mock   [ProfileStore]\n\t\t\t-- Reflection of ProfileStore methods, but the methods will now query a mock\n\t\t\tDataStore with no relation to the real DataStore\n\t\t\t\n\t\tProfileStore.Name   [string]\n\t\t\n\tMethods [ProfileStore]:\n\t\n\t\tProfileStore:StartSessionAsync(profile_key, params?) --> [Profile] or nil\n\t\t\tprofile_key [string] -- DataStore key\n\t\t\tparams      nil or [table]: -- Custom params; E.g. {Steal = true}\n\t\t\t\t{\n\t\t\t\t\tSteal = true, -- Pass this to disregard an existing session lock\n\t\t\t\t\tCancel = fn() -> (boolean), -- Pass this to create a request cancel condition.\n\t\t\t\t\t\t-- If the cancel function returns true, ProfileStore will stop trying to\n\t\t\t\t\t\t-- start the session and return nil\n\t\t\t\t}\n\t\t\t\n\t\tProfileStore:MessageAsync(profile_key, message) --> is_success [bool]\n\t\t\tprofile_key [string] -- DataStore key\n\t\t\tmessage     [table] -- Data to be messaged to the profile\n\t\t\t\n\t\tProfileStore:GetAsync(profile_key, version?) --> [Profile] or nil\n\t\t\t-- Reads a profile without starting a session - will not autosave\n\t\t\tprofile_key   [string] -- DataStore key\n\t\t\tversion       nil or [string] -- DataStore key version\n\n\t\tProfileStore:VersionQuery(profile_key, sort_direction?, min_date?, max_date?) --> [VersionQuery]\n\t\t\tprofile_key      [string]\n\t\t\tsort_direction   nil or [Enum.SortDirection]\n\t\t\tmin_date         nil or [DateTime]\n\t\t\tmax_date         nil or [DateTime]\n\t\t\t\n\t\tProfileStore:RemoveAsync(profile_key) --> is_success [bool]\n\t\t\t-- Completely removes profile data from the DataStore / mock DataStore with no way to recover it.\n\n\tMethods [VersionQuery]:\n\n\t\tVersionQuery:NextAsync() --> [Profile] or nil -- (Yields)\n\t\t\t-- Returned profile is similar to profiles returned by ProfileStore:GetAsync()\n\t\t\n\tMembers [Profile]:\n\t\n\t\tProfile.Data               [table]\n\t\t\t-- When the profile is active changes to this table are guaranteed to be saved\n\t\tProfile.LastSavedData      [table] (Read-only)\n\t\t\t-- Last snapshot of \"Profile.Data\" that has been successfully saved to the DataStore;\n\t\t\tUseful for proper developer product purchase receipt handling\n\t\t\n\t\tProfile.FirstSessionTime   [number] (Read-only)\n\t\t\t-- os.time() timestamp of the first profile session\n\t\t\t\n\t\tProfile.SessionLoadCount   [number] (Read-only) -- Amount of times a session was started for this profile\n\t\t\t\n\t\tProfile.Session            [table] (Read-only) {PlaceId = number, JobId = string} / nil\n\t\t\t-- Set to a table if this profile is in use by a server; nil if released\n\n\t\tProfile.RobloxMetaData     [table] -- Writable table that gets saved automatically and once the profile is released\n\t\tProfile.UserIds            [table] -- (Read-only) -- {user_id [number], ...} -- User ids associated with this profile\n\n\t\tProfile.KeyInfo            [DataStoreKeyInfo] -- Changes before OnAfterSave signal\n\t\t\n\t\tProfile.OnSave             [Signal] ()\n\t\t\t-- Triggered right before changes to Profile.Data are saved to the DataStore\n\t\t\t\n\t\tProfile.OnLastSave         [Signal] (reason [string]: \"Manual\", \"External\", \"Shutdown\")\n\t\t\t-- Triggered right before changes to Profile.Data are saved to the DataStore\n\t\t\tfor the last time; A reason is provided for the last save:\n\t\t\t\t- \"Manual\"   - Profile:EndSession() was called\n\t\t\t\t- \"Shutdown\" - The server that has ownership of this profile is shutting down\n\t\t\t\t- \"External\" - Another server has started a session for this profile\n\t\t\tNote that this event will not trigger for when a profile session is ended by\n\t\t\tanother server trying to take ownership of the session - this is impossible to\n\t\t\tdo without compromising on ProfileStore's speed.\n\t\t\t\n\t\tProfile.OnSessionEnd       [Signal] ()\n\t\t\t-- Triggered when the profile session is terminated on this server\n\t\t\n\t\tProfile.OnAfterSave        [Signal] (last_saved_data)\n\t\t\t-- Triggered after a successful save\n\t\t\tlast_saved_data [table] -- Profile.LastSavedData\n\t\t\t\n\t\tProfile.ProfileStore       [ProfileStore] -- ProfileStore object this profile belongs to\n\t\tProfile.Key                [string] -- DataStore key\n\t\t\n\tMethods [Profile]:\n\t\n\t\tProfile:IsActive() --> [bool] -- If \"true\" is returned, changes to Profile.Data are guaranteed to save;\n\t\t\tThis guarantee is only valid until code yields (e.g. task.wait() is used).\n\t\t\t\n\t\tProfile:Reconcile() -- Fills in missing (nil) [string_key] = [value] pairs to the Profile.Data structure\n\t\t\tfrom the \"template\" argument that was passed to \"ProfileStore.New()\"\n\t\t\t\n\t\tProfile:EndSession() -- Call after the server has finished working with this profile\n\t\t\te.g., after the player leaves (Profile object will become inactive)\n\n\t\tProfile:AddUserId(user_id) -- Associates user_id with profile (GDPR compliance)\n\t\t\tuser_id   [number]\n\n\t\tProfile:RemoveUserId(user_id) -- Removes user_id association with profile (safe function)\n\t\t\tuser_id   [number]\n\t\t\t\n\t\tProfile:MessageHandler(fn) -- Sets a message handler for this profile\n\t\t\tfn [function] (message [table], processed [function]())\n\t\t\t-- The handler function receives a message table and a callback function;\n\t\t\tThe callback function is to be called when a message has been processed\n\t\t\t- this will discard the message from the profile message cache; If the\n\t\t\tcallback function is not called, other message handlers will also be triggered\n\t\t\twith unprocessed message data.\n\t\t\t\n\t\tProfile:Save() -- If the profile session is still active makes an UpdateAsync call\n\t\t\tto the DataStore to immediately save profile data\n\n\t\tProfile:SetAsync() -- Forcefully saves changes to the profile; Only for profiles\n\t\t\tloaded with ProfileStore:GetAsync() or ProfileStore:VersionQuery()\n\t\t\n--]]\n\nlocal AUTO_SAVE_PERIOD = 300 -- (Seconds) Time between when changes to a profile are saved to the DataStore\nlocal LOAD_REPEAT_PERIOD = 10 -- (Seconds) Time between successive profile reads when handling a session conflict\nlocal FIRST_LOAD_REPEAT = 5 -- (Seconds) Time between first and second profile read when handling a session conflict\nlocal SESSION_STEAL = 40 -- (Seconds) Time until a session conflict is resolved with the waiting server stealing the session\nlocal ASSUME_DEAD = 630 -- (Seconds) If a profile hasn't had updates for this long, quickly assume an active session belongs to a crashed server\nlocal START_SESSION_TIMEOUT = 120 -- (Seconds) If a session can't be started for a profile for this long, stop repeating calls to the DataStore\n\nlocal CRITICAL_STATE_ERROR_COUNT = 5 -- Assume critical state if this many issues happen in a short amount of time\nlocal CRITICAL_STATE_ERROR_EXPIRE = 120 -- (Seconds) Individual issue expiration\nlocal CRITICAL_STATE_EXPIRE = 120 -- (Seconds) Critical state expiration\n\nlocal MAX_MESSAGE_QUEUE = 1000 -- Max messages saved in a profile that were sent using \"ProfileStore:MessageAsync()\"\n\n----- Dependencies -----\n\n-- local Util = require(game.ReplicatedStorage.Shared.Util)\n-- local Signal = Util.Signal\n\nlocal Signal do\n\n\tlocal FreeRunnerThread\n\n\t--[[\n\t\tYield-safe coroutine reusing by stravant;\n\t\tSources:\n\t\thttps://devforum.roblox.com/t/lua-signal-class-comparison-optimal-goodsignal-class/1387063\n\t\thttps://gist.github.com/stravant/b75a322e0919d60dde8a0316d1f09d2f\n\t--]]\n\n\tlocal function AcquireRunnerThreadAndCallEventHandler(fn, ...)\n\t\tlocal acquired_runner_thread = FreeRunnerThread\n\t\tFreeRunnerThread = nil\n\t\tfn(...)\n\t\t-- The handler finished running, this runner thread is free again.\n\t\tFreeRunnerThread = acquired_runner_thread\n\tend\n\n\tlocal function RunEventHandlerInFreeThread(...)\n\t\tAcquireRunnerThreadAndCallEventHandler(...)\n\t\twhile true do\n\t\t\tAcquireRunnerThreadAndCallEventHandler(coroutine.yield())\n\t\tend\n\tend\n\n\tlocal Connection = {}\n\tConnection.__index = Connection\n\n\tlocal SignalClass = {}\n\tSignalClass.__index = SignalClass\n\n\tfunction Connection:Disconnect()\n\n\t\tif self.is_connected == false then\n\t\t\treturn\n\t\tend\n\n\t\tlocal signal = self.signal\n\t\tself.is_connected = false\n\t\tsignal.listener_count -= 1\n\n\t\tif signal.head == self then\n\t\t\tsignal.head = self.next\n\t\telse\n\t\t\tlocal prev = signal.head\n\t\t\twhile prev ~= nil and prev.next ~= self do\n\t\t\t\tprev = prev.next\n\t\t\tend\n\t\t\tif prev ~= nil then\n\t\t\t\tprev.next = self.next\n\t\t\tend\n\t\tend\n\n\tend\n\n\tfunction SignalClass.New()\n\n\t\tlocal self = {\n\t\t\thead = nil,\n\t\t\tlistener_count = 0,\n\t\t}\n\t\tsetmetatable(self, SignalClass)\n\n\t\treturn self\n\n\tend\n\n\tfunction SignalClass:Connect(listener: (...any) -> ())\n\n\t\tif type(listener) ~= \"function\" then\n\t\t\terror(`[{script.Name}]: \\\"listener\\\" must be a function; Received {typeof(listener)}`)\n\t\tend\n\n\t\tlocal connection = {\n\t\t\tlistener = listener,\n\t\t\tsignal = self,\n\t\t\tnext = self.head,\n\t\t\tis_connected = true,\n\t\t}\n\t\tsetmetatable(connection, Connection)\n\n\t\tself.head = connection\n\t\tself.listener_count += 1\n\n\t\treturn connection\n\n\tend\n\n\tfunction SignalClass:GetListenerCount(): number\n\t\treturn self.listener_count\n\tend\n\n\tfunction SignalClass:Fire(...)\n\t\tlocal item = self.head\n\t\twhile item ~= nil do\n\t\t\tif item.is_connected == true then\n\t\t\t\tif not FreeRunnerThread then\n\t\t\t\t\tFreeRunnerThread = coroutine.create(RunEventHandlerInFreeThread)\n\t\t\t\tend\n\t\t\t\ttask.spawn(FreeRunnerThread, item.listener, ...)\n\t\t\tend\n\t\t\titem = item.next\n\t\tend\n\tend\n\n\tfunction SignalClass:Wait()\n\t\tlocal co = coroutine.running()\n\t\tlocal connection\n\t\tconnection = self:Connect(function(...)\n\t\t\tconnection:Disconnect()\n\t\t\ttask.spawn(co, ...)\n\t\tend)\n\t\treturn coroutine.yield()\n\tend\n\n\tSignal = table.freeze({\n\t\tNew = SignalClass.New,\n\t})\n\nend\n\n----- Private -----\n\nlocal ActiveSessionCheck = {} -- {[session_token] = profile, ...}\nlocal AutoSaveList = {} -- {profile, ...} -- Loaded profile table which will be circularly auto-saved\nlocal IssueQueue = {} -- {issue_time, ...}\n\nlocal DataStoreService = game:GetService(\"DataStoreService\")\nlocal MessagingService = game:GetService(\"MessagingService\")\nlocal HttpService = game:GetService(\"HttpService\")\nlocal RunService = game:GetService(\"RunService\")\n\nlocal PlaceId = game.PlaceId\nlocal JobId = game.JobId\n\nlocal AutoSaveIndex = 1 -- Next profile to auto save\nlocal LastAutoSave = os.clock()\n\nlocal LoadIndex = 0\n\nlocal ActiveProfileLoadJobs = 0 -- Number of active threads that are loading in profiles\nlocal ActiveProfileSaveJobs = 0 -- Number of active threads that are saving profiles\n\nlocal CriticalStateStart = 0 -- os.clock()\n\nlocal IsStudio = RunService:IsStudio()\nlocal DataStoreState: \"NotReady\" | \"NoInternet\" | \"NoAccess\" | \"Access\" = \"NotReady\"\n\nlocal MockStore = {}\nlocal UserMockStore = {}\nlocal MockFlag = false\n\nlocal OnError = Signal.New() -- (message, store_name, profile_key)\nlocal OnOverwrite = Signal.New() -- (store_name, profile_key)\n\nlocal UpdateQueue = { -- For stability sake, we won't do UpdateAsync calls for the same key until all previous calls finish\n\t--[[\n\t\t[session_token] = {\n\t\t\tcoroutine, ...\n\t\t},\n\t\t...\n\t--]]\n}\n\nlocal function WaitInUpdateQueue(session_token) --> next_in_queue()\n\n\tlocal is_first = false\n\n\tif UpdateQueue[session_token] == nil then\n\t\tis_first = true\n\t\tUpdateQueue[session_token] = {}\n\tend\n\n\tlocal queue = UpdateQueue[session_token]\n\n\tif is_first == false then\n\t\ttable.insert(queue, coroutine.running())\n\t\tcoroutine.yield()\n\tend\n\n\treturn function()\n\t\tlocal next_co = table.remove(queue, 1)\n\t\tif next_co ~= nil then\n\t\t\tcoroutine.resume(next_co)\n\t\telse\n\t\t\tUpdateQueue[session_token] = nil\n\t\tend\n\tend\n\nend\n\nlocal function SessionToken(store_name, profile_key, is_mock)\n\n\tlocal session_token = \"L_\" -- Live\n\n\tif is_mock == true then\n\t\tsession_token = \"U_\" -- User mock\n\telseif DataStoreState ~= \"Access\" then\n\t\tsession_token = \"M_\" -- Mock, cause no DataStore access\n\tend\n\n\tsession_token ..= store_name .. \"\\0\" .. profile_key\n\n\treturn session_token\n\nend\n\nlocal function DeepCopyTable(t)\n\tlocal copy = {}\n\tfor key, value in pairs(t) do\n\t\tif type(value) == \"table\" then\n\t\t\tcopy[key] = DeepCopyTable(value)\n\t\telse\n\t\t\tcopy[key] = value\n\t\tend\n\tend\n\treturn copy\nend\n\nlocal function ReconcileTable(target, template)\n\tfor k, v in pairs(template) do\n\t\tif type(k) == \"string\" then -- Only string keys will be reconciled\n\t\t\tif target[k] == nil then\n\t\t\t\tif type(v) == \"table\" then\n\t\t\t\t\ttarget[k] = DeepCopyTable(v)\n\t\t\t\telse\n\t\t\t\t\ttarget[k] = v\n\t\t\t\tend\n\t\t\telseif type(target[k]) == \"table\" and type(v) == \"table\" then\n\t\t\t\tReconcileTable(target[k], v)\n\t\t\tend\n\t\tend\n\tend\nend\n\nlocal function RegisterError(error_message, store_name, profile_key) -- Called when a DataStore API call errors\n\twarn(`[{script.Name}]: DataStore API error (STORE:{store_name}; KEY:{profile_key}) - {tostring(error_message)}`)\n\ttable.insert(IssueQueue, os.clock()) -- Adding issue time to queue\n\tOnError:Fire(tostring(error_message), store_name, profile_key)\nend\n\nlocal function RegisterOverwrite(store_name, profile_key) -- Called when a corrupted profile is loaded\n\twarn(`[{script.Name}]: Invalid profile was overwritten (STORE:{store_name}; KEY:{profile_key})`)\n\tOnOverwrite:Fire(store_name, profile_key)\nend\n\nlocal function NewMockDataStoreKeyInfo(params)\n\n\tlocal version_id_string = tostring(params.VersionId or 0)\n\tlocal meta_data = params.MetaData or {}\n\tlocal user_ids = params.UserIds or {}\n\n\treturn {\n\t\tCreatedTime = params.CreatedTime,\n\t\tUpdatedTime = params.UpdatedTime,\n\t\tVersion = string.rep(\"0\", 16) .. \".\"\n\t\t\t.. string.rep(\"0\", 10 - string.len(version_id_string)) .. version_id_string\n\t\t\t.. \".\" .. string.rep(\"0\", 16) .. \".\" .. \"01\",\n\n\t\tGetMetadata = function()\n\t\t\treturn DeepCopyTable(meta_data)\n\t\tend,\n\n\t\tGetUserIds = function()\n\t\t\treturn DeepCopyTable(user_ids)\n\t\tend,\n\t}\n\nend\n\nlocal function MockUpdateAsync(mock_data_store, profile_store_name, key, transform_function, is_get_call) --> loaded_data, key_info\n\n\tlocal profile_store = mock_data_store[profile_store_name]\n\n\tif profile_store == nil then\n\t\tprofile_store = {}\n\t\tmock_data_store[profile_store_name] = profile_store\n\tend\n\n\tlocal epoch_time = math.floor(os.time() * 1000)\n\tlocal mock_entry = profile_store[key]\n\tlocal mock_entry_was_nil = false\n\n\tif mock_entry == nil then\n\t\tmock_entry_was_nil = true\n\t\tif is_get_call ~= true then\n\t\t\tmock_entry = {\n\t\t\t\tData = nil,\n\t\t\t\tCreatedTime = epoch_time,\n\t\t\t\tUpdatedTime = epoch_time,\n\t\t\t\tVersionId = 0,\n\t\t\t\tUserIds = {},\n\t\t\t\tMetaData = {},\n\t\t\t}\n\t\t\tprofile_store[key] = mock_entry\n\t\tend\n\tend\n\n\tlocal mock_key_info = mock_entry_was_nil == false and NewMockDataStoreKeyInfo(mock_entry) or nil\n\n\tlocal transform, user_ids, roblox_meta_data = transform_function(mock_entry and mock_entry.Data, mock_key_info)\n\n\tif transform == nil then\n\t\treturn nil\n\telse\n\t\tif mock_entry ~= nil and is_get_call ~= true then\n\t\t\tmock_entry.Data = DeepCopyTable(transform)\n\t\t\tmock_entry.UserIds = DeepCopyTable(user_ids or {})\n\t\t\tmock_entry.MetaData = DeepCopyTable(roblox_meta_data or {})\n\t\t\tmock_entry.VersionId += 1\n\t\t\tmock_entry.UpdatedTime = epoch_time\n\t\tend\n\n\t\treturn DeepCopyTable(transform), mock_entry ~= nil and NewMockDataStoreKeyInfo(mock_entry) or nil\n\tend\n\nend\n\nlocal function UpdateAsync(profile_store, profile_key, transform_params, is_user_mock, is_get_call, version) --> loaded_data, key_info\n\t--transform_params = {\n\t--\tExistingProfileHandle = function(latest_data),\n\t--\tMissingProfileHandle = function(latest_data),\n\t--\tEditProfile = function(latest_data),\n\t--}\n\n\tlocal loaded_data, key_info\n\n\tlocal next_in_queue = WaitInUpdateQueue(SessionToken(profile_store.Name, profile_key, is_user_mock))\n\n\tlocal success = true\n\n\tlocal success, error_message = pcall(function()\n\t\tlocal transform_function = function(latest_data)\n\n\t\t\tlocal missing_profile = false\n\t\t\tlocal overwritten = false\n\t\t\tlocal global_updates = {0, {}}\n\n\t\t\tif latest_data == nil then\n\n\t\t\t\tmissing_profile = true\n\n\t\t\telseif type(latest_data) ~= \"table\" then\n\n\t\t\t\tmissing_profile = true\n\t\t\t\toverwritten = true\n\n\t\t\telse\n\n\t\t\t\tif type(latest_data.Data) == \"table\" and type(latest_data.MetaData) == \"table\" and type(latest_data.GlobalUpdates) == \"table\" then\n\n\t\t\t\t\t-- Regular profile structure detected:\n\n\t\t\t\t\tlatest_data.WasOverwritten = false -- Must be set to false if set previously\n\t\t\t\t\tglobal_updates = latest_data.GlobalUpdates\n\n\t\t\t\t\tif transform_params.ExistingProfileHandle ~= nil then\n\t\t\t\t\t\ttransform_params.ExistingProfileHandle(latest_data)\n\t\t\t\t\tend\n\n\t\t\t\telseif latest_data.Data == nil and latest_data.MetaData == nil and type(latest_data.GlobalUpdates) == \"table\" then\n\n\t\t\t\t\t-- Regular structure not detected, but GlobalUpdate data exists:\n\n\t\t\t\t\tlatest_data.WasOverwritten = false -- Must be set to false if set previously\n\t\t\t\t\tglobal_updates = latest_data.GlobalUpdates or global_updates\n\t\t\t\t\tmissing_profile = true\n\n\t\t\t\telse\n\n\t\t\t\t\tmissing_profile = true\n\t\t\t\t\toverwritten = true\n\n\t\t\t\tend\n\n\t\t\tend\n\n\t\t\t-- Profile was not created or corrupted and no GlobalUpdate data exists:\n\t\t\tif missing_profile == true then\n\t\t\t\tlatest_data = {\n\t\t\t\t\t-- Data = nil,\n\t\t\t\t\t-- MetaData = nil,\n\t\t\t\t\tGlobalUpdates = global_updates,\n\t\t\t\t}\n\t\t\t\tif transform_params.MissingProfileHandle ~= nil then\n\t\t\t\t\ttransform_params.MissingProfileHandle(latest_data)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\t-- Editing profile:\n\t\t\tif transform_params.EditProfile ~= nil then\n\t\t\t\ttransform_params.EditProfile(latest_data)\n\t\t\tend\n\n\t\t\t-- Invalid data handling (Silently override with empty profile)\n\t\t\tif overwritten == true then\n\t\t\t\tlatest_data.WasOverwritten = true -- Temporary tag that will be removed on first save\n\t\t\tend\n\n\t\t\treturn latest_data, latest_data.UserIds, latest_data.RobloxMetaData\n\t\tend\n\n\t\tif is_user_mock == true then -- Used when the profile is accessed through ProfileStore.Mock\n\n\t\t\tloaded_data, key_info = MockUpdateAsync(UserMockStore, profile_store.Name, profile_key, transform_function, is_get_call)\n\t\t\ttask.wait() -- Simulate API call yield\n\n\t\telseif DataStoreState ~= \"Access\" then -- Used when API access is disabled\n\n\t\t\tloaded_data, key_info = MockUpdateAsync(MockStore, profile_store.Name, profile_key, transform_function, is_get_call)\n\t\t\ttask.wait() -- Simulate API call yield\n\n\t\telse\n\n\t\t\tif is_get_call == true then\n\n\t\t\t\tif version ~= nil then\n\n\t\t\t\t\tlocal success, error_message = pcall(function()\n\t\t\t\t\t\tloaded_data, key_info = profile_store.data_store:GetVersionAsync(profile_key, version)\n\t\t\t\t\tend)\n\n\t\t\t\t\tif success == false and type(error_message) == \"string\" and string.find(error_message, \"not valid\") ~= nil then\n\t\t\t\t\t\twarn(`[{script.Name}]: Passed version argument is not valid; Traceback:\\n` .. debug.traceback())\n\t\t\t\t\tend\n\n\t\t\t\telse\n\n\t\t\t\t\tloaded_data, key_info = profile_store.data_store:GetAsync(profile_key)\n\n\t\t\t\tend\n\n\t\t\t\tloaded_data = transform_function(loaded_data)\n\n\t\t\telse\n\n\t\t\t\tloaded_data, key_info = profile_store.data_store:UpdateAsync(profile_key, transform_function)\n\n\t\t\tend\n\n\t\tend\n\n\tend)\n\n\tnext_in_queue()\n\n\tif success == true and type(loaded_data) == \"table\" then\n\t\t-- Invalid data handling:\n\t\tif loaded_data.WasOverwritten == true and is_get_call ~= true then\n\t\t\tRegisterOverwrite(\n\t\t\t\tprofile_store.Name,\n\t\t\t\tprofile_key\n\t\t\t)\n\t\tend\n\t\t-- Return loaded_data:\n\t\treturn loaded_data, key_info\n\telse\n\t\t-- Error handling:\n\t\tRegisterError(\n\t\t\terror_message or \"Undefined error\",\n\t\t\tprofile_store.Name,\n\t\t\tprofile_key\n\t\t)\n\t\t-- Return nothing:\n\t\treturn nil\n\tend\n\nend\n\nlocal function IsThisSession(session_tag)\n\treturn session_tag[1] == PlaceId and session_tag[2] == JobId\nend\n\nlocal function ReadMockFlag(): boolean\n\tlocal is_mock = MockFlag\n\tMockFlag = false\n\treturn is_mock\nend\n\nlocal function WaitForStoreReady(profile_store)\n\twhile profile_store.is_ready == false do\n\t\ttask.wait()\n\tend\nend\n\nlocal function AddProfileToAutoSave(profile)\n\n\tActiveSessionCheck[profile.session_token] = profile\n\n\t-- Add at AutoSaveIndex and move AutoSaveIndex right:\n\n\ttable.insert(AutoSaveList, AutoSaveIndex, profile)\n\n\tif #AutoSaveList > 1 then\n\t\tAutoSaveIndex = AutoSaveIndex + 1\n\telseif #AutoSaveList == 1 then\n\t\t-- First profile created - make sure it doesn't get immediately auto saved:\n\t\tLastAutoSave = os.clock()\n\tend\n\nend\n\nlocal function RemoveProfileFromAutoSave(profile)\n\n\tActiveSessionCheck[profile.session_token] = nil\n\n\tlocal auto_save_index = table.find(AutoSaveList, profile)\n\n\tif auto_save_index ~= nil then\n\t\ttable.remove(AutoSaveList, auto_save_index)\n\t\tif auto_save_index < AutoSaveIndex then\n\t\t\tAutoSaveIndex = AutoSaveIndex - 1 -- Table contents were moved left before AutoSaveIndex so move AutoSaveIndex left as well\n\t\tend\n\t\tif AutoSaveList[AutoSaveIndex] == nil then -- AutoSaveIndex was at the end of the AutoSaveList - reset to 1\n\t\t\tAutoSaveIndex = 1\n\t\tend\n\tend\n\nend\n\nlocal function SaveProfileAsync(profile, is_ending_session, is_overwriting, last_save_reason)\n\n\tif type(profile.Data) ~= \"table\" then\n\t\terror(`[{script.Name}]: Developer code likely set \"Profile.Data\" to a non-table value! (STORE:{profile.ProfileStore.Name}; KEY:{profile.Key})`)\n\tend\n\n\tprofile.OnSave:Fire()\n\tif is_ending_session == true then\n\t\tprofile.OnLastSave:Fire(last_save_reason or \"Manual\")\n\tend\n\n\tif is_ending_session == true and is_overwriting ~= true then\n\t\tif profile.roblox_message_subscription ~= nil then\n\t\t\tprofile.roblox_message_subscription:Disconnect()\n\t\tend\n\t\tRemoveProfileFromAutoSave(profile)\n\t\tprofile.OnSessionEnd:Fire()\n\tend\n\n\tActiveProfileSaveJobs = ActiveProfileSaveJobs + 1\n\n\t-- Compare \"SessionLoadCount\" when writing to profile to prevent a rare case of repeat last save when the profile is loaded on the same server again\n\n\tlocal repeat_save_flag = true -- Released Profile save calls have to repeat until they succeed\n\tlocal exp_backoff = 1\n\n\twhile repeat_save_flag == true do\n\n\t\tif is_ending_session ~= true then\n\t\t\trepeat_save_flag = false\n\t\tend\n\n\t\tlocal loaded_data, key_info = UpdateAsync(\n\t\t\tprofile.ProfileStore,\n\t\t\tprofile.Key,\n\t\t\t{\n\t\t\t\tExistingProfileHandle = nil,\n\t\t\t\tMissingProfileHandle = nil,\n\t\t\t\tEditProfile = function(latest_data)\n\n\t\t\t\t\t-- Check if this session still owns the profile:\n\n\t\t\t\t\tlocal session_owns_profile = false\n\n\t\t\t\t\tif is_overwriting ~= true then\n\n\t\t\t\t\t\tlocal active_session = latest_data.MetaData.ActiveSession\n\t\t\t\t\t\tlocal session_load_count = latest_data.MetaData.SessionLoadCount\n\n\t\t\t\t\t\tif type(active_session) == \"table\" then\n\t\t\t\t\t\t\tsession_owns_profile = IsThisSession(active_session) and session_load_count == profile.load_index\n\t\t\t\t\t\tend\n\n\t\t\t\t\telse\n\t\t\t\t\t\tsession_owns_profile = true\n\t\t\t\t\tend\n\n\t\t\t\t\t-- We may only edit the profile if this server has ownership of the profile:\n\n\t\t\t\t\tif session_owns_profile == true then\n\n\t\t\t\t\t\t-- Clear processed updates (messages):\n\n\t\t\t\t\t\tlocal locked_updates = profile.locked_global_updates -- [index] = true, ...\n\t\t\t\t\t\tlocal active_updates = latest_data.GlobalUpdates[2]\n\t\t\t\t\t\t-- ProfileService module format: {{update_id, version_id, update_locked, update_data}, ...}\n\t\t\t\t\t\t-- ProfileStore module format: {{update_id, update_data}, ...}\n\n\t\t\t\t\t\tif next(locked_updates) ~= nil then\n\t\t\t\t\t\t\tlocal i = 1\n\t\t\t\t\t\t\twhile i <= #active_updates do\n\t\t\t\t\t\t\t\tlocal update = active_updates[i]\n\t\t\t\t\t\t\t\tif locked_updates[update[1]] == true then\n\t\t\t\t\t\t\t\t\ttable.remove(active_updates, i)\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ti += 1\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\tend\n\t\t\t\t\t\tend\n\n\t\t\t\t\t\t-- Save profile data:\n\n\t\t\t\t\t\tlatest_data.Data = profile.Data\n\t\t\t\t\t\tlatest_data.RobloxMetaData = profile.RobloxMetaData\n\t\t\t\t\t\tlatest_data.UserIds = profile.UserIds\n\n\t\t\t\t\t\tif is_overwriting ~= true then\n\n\t\t\t\t\t\t\tlatest_data.MetaData.LastUpdate = os.time()\n\n\t\t\t\t\t\t\tif is_ending_session == true then\n\t\t\t\t\t\t\t\tlatest_data.MetaData.ActiveSession = nil\n\t\t\t\t\t\t\tend\n\n\t\t\t\t\t\telse\n\n\t\t\t\t\t\t\tlatest_data.MetaData.ActiveSession = nil\n\t\t\t\t\t\t\tlatest_data.MetaData.ForceLoadSession = nil\n\n\t\t\t\t\t\tend\n\n\t\t\t\t\tend\n\n\t\t\t\tend,\n\t\t\t},\n\t\t\tprofile.is_mock\n\t\t)\n\n\t\tif loaded_data ~= nil and key_info ~= nil then\n\n\t\t\tif is_overwriting == true then\n\t\t\t\tbreak\n\t\t\tend\n\n\t\t\trepeat_save_flag = false\n\n\t\t\tlocal active_session = loaded_data.MetaData.ActiveSession\n\t\t\tlocal session_load_count = loaded_data.MetaData.SessionLoadCount\n\t\t\tlocal session_owns_profile = false\n\n\t\t\tif type(active_session) == \"table\" then\n\t\t\t\tsession_owns_profile = IsThisSession(active_session) and session_load_count == profile.load_index\n\t\t\tend\n\n\t\t\tlocal force_load_session = loaded_data.MetaData.ForceLoadSession\n\t\t\tlocal force_load_pending = false\n\t\t\tif type(force_load_session) == \"table\" then\n\t\t\t\tforce_load_pending = not IsThisSession(force_load_session)\n\t\t\tend\n\n\t\t\tlocal is_active = profile:IsActive()\n\n\t\t\t-- If another server is trying to start a session for this profile - end the session:\n\n\t\t\tif force_load_pending == true and session_owns_profile == true then\n\t\t\t\tif is_active == true then\n\t\t\t\t\tSaveProfileAsync(profile, true, false, \"External\")\n\t\t\t\tend\n\t\t\t\tbreak\n\t\t\tend\n\n\t\t\t-- Clearing processed update list / Detecting new updates:\n\n\t\t\tlocal locked_updates = profile.locked_global_updates -- [index] = true, ...\n\t\t\tlocal received_updates = profile.received_global_updates -- [index] = true, ...\n\t\t\tlocal active_updates = loaded_data.GlobalUpdates[2]\n\n\t\t\tlocal new_updates = {} -- {}, ...\n\t\t\tlocal still_pending = {} -- [index] = true, ...\n\n\t\t\tfor _, update in ipairs(active_updates) do\n\t\t\t\tif locked_updates[update[1]] == true then\n\t\t\t\t\tstill_pending[update[1]] = true\n\t\t\t\telseif received_updates[update[1]] ~= true then\n\t\t\t\t\treceived_updates[update[1]] = true\n\t\t\t\t\ttable.insert(new_updates, update)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tfor index in pairs(locked_updates) do\n\t\t\t\tif still_pending[index] ~= true then\n\t\t\t\t\tlocked_updates[index] = nil\n\t\t\t\tend\n\t\t\tend\n\n\t\t\t-- Updating profile values:\n\n\t\t\tprofile.KeyInfo = key_info\n\t\t\tprofile.LastSavedData = loaded_data.Data\n\t\t\tprofile.global_updates = loaded_data.GlobalUpdates and loaded_data.GlobalUpdates[2] or {}\n\n\t\t\tif session_owns_profile == true then\n\t\t\t\tif is_active == true and is_ending_session ~= true then\n\n\t\t\t\t\t-- Processing new global updates (messages):\n\n\t\t\t\t\tfor _, update in ipairs(new_updates) do\n\n\t\t\t\t\t\tlocal index = update[1]\n\t\t\t\t\t\tlocal update_data = update[#update] -- Backwards compatibility with ProfileService\n\n\t\t\t\t\t\tfor _, handler in ipairs(profile.message_handlers) do\n\n\t\t\t\t\t\t\tlocal is_processed = false\n\t\t\t\t\t\t\tlocal processed_callback = function()\n\t\t\t\t\t\t\t\tis_processed = true\n\t\t\t\t\t\t\t\tlocked_updates[index] = true\n\t\t\t\t\t\t\tend\n\n\t\t\t\t\t\t\tlocal send_update_data = DeepCopyTable(update_data)\n\n\t\t\t\t\t\t\ttask.spawn(handler, send_update_data, processed_callback)\n\n\t\t\t\t\t\t\tif is_processed == true then\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tend\n\n\t\t\t\t\t\tend\n\n\t\t\t\t\tend\n\n\t\t\t\tend\n\t\t\telse\n\n\t\t\t\tif profile.roblox_message_subscription ~= nil then\n\t\t\t\t\tprofile.roblox_message_subscription:Disconnect()\n\t\t\t\tend\n\n\t\t\t\tif is_active == true then\n\t\t\t\t\tRemoveProfileFromAutoSave(profile)\n\t\t\t\t\tprofile.OnSessionEnd:Fire()\n\t\t\t\tend\n\n\t\t\tend\n\n\t\t\tprofile.OnAfterSave:Fire(profile.LastSavedData)\n\n\t\telseif repeat_save_flag == true then\n\n\t\t\t-- DataStore call likely resulted in an error; Repeat the DataStore call shortly\n\t\t\ttask.wait(exp_backoff)\n\t\t\texp_backoff = math.min(if last_save_reason == \"Shutdown\" then 8 else 20, exp_backoff * 2)\n\n\t\tend\n\n\tend\n\n\tActiveProfileSaveJobs = ActiveProfileSaveJobs - 1\n\nend\n\n----- Public -----\n\n--[[\n\tSaved profile structure:\n\t\n\t{\n\t\tData = {},\n\t\t\n\t\tMetaData = {\n\t\t\tProfileCreateTime = 0,\n\t\t\tSessionLoadCount = 0,\n\t\t\tActiveSession = {place_id, game_job_id, unique_session_id} / nil,\n\t\t\tForceLoadSession = {place_id, game_job_id} / nil,\n\t\t\tLastUpdate = 0, -- os.time()\n\t\t\tMetaTags = {}, -- Backwards compatibility with ProfileService\n\t\t},\n\t\t\n\t\tRobloxMetaData = {},\n\t\tUserIds = {},\n\t\t\n\t\tGlobalUpdates = {\n\t\t\tupdate_index,\n\t\t\t{\n\t\t\t\t{update_index, data}, ...\n\t\t\t},\n\t\t},\n\t}\n\n--]]\n\nexport type JSONAcceptable = { JSONAcceptable } | { [string]: JSONAcceptable } | number | string | boolean | buffer\n\nexport type Profile<T> = {\n\tData: T & JSONAcceptable,\n\tLastSavedData: T & JSONAcceptable,\n\tFirstSessionTime: number,\n\tSessionLoadCount: number,\n\tSession: {PlaceId: number, JobId: string}?,\n\tRobloxMetaData: JSONAcceptable,\n\tUserIds: {number},\n\tKeyInfo: DataStoreKeyInfo,\n\tOnSave: {Connect: (self: any, listener: () -> ()) -> ({Disconnect: (self: any) -> ()})},\n\tOnLastSave: {Connect: (self: any, listener: (reason: \"Manual\" | \"External\" | \"Shutdown\") -> ()) -> ({Disconnect: (self: any) -> ()})},\n\tOnSessionEnd: {Connect: (self: any, listener: () -> ()) -> ({Disconnect: (self: any) -> ()})},\n\tOnAfterSave: {Connect: (self: any, listener: (last_saved_data: T & JSONAcceptable) -> ()) -> ({Disconnect: (self: any) -> ()})},\n\tProfileStore: JSONAcceptable,\n\tKey: string,\n\n\tIsActive: (self: any) -> (boolean),\n\tReconcile: (self: any) -> (),\n\tEndSession: (self: any) -> (),\n\tAddUserId: (self: any, user_id: number) -> (),\n\tRemoveUserId: (self: any, user_id: number) -> (),\n\tMessageHandler: (self: any, fn: (message: JSONAcceptable, processed: () -> ()) -> ()) -> (),\n\tSave: (self: any) -> (),\n\tSetAsync: (self: any) -> (),\n}\n\nexport type VersionQuery<T> = {\n\tNextAsync: (self: any) -> (Profile<T>?),\n}\n\ntype ProfileStoreStandard<T> = {\n\tName: string,\n\tStartSessionAsync: (self: any, profile_key: string, params: {Steal: boolean?}) -> (Profile<T>?),\n\tMessageAsync: (self: any, profile_key: string, message: JSONAcceptable) -> (boolean),\n\tGetAsync: (self: any, profile_key: string, version: string?) -> (Profile<T>?),\n\tVersionQuery: (self: any, profile_key: string, sort_direction: Enum.SortDirection?, min_date: DateTime | number | nil, max_date: DateTime | number | nil) -> (VersionQuery<T>),\n\tRemoveAsync: (self: any, profile_key: string) -> (boolean),\n}\n\nexport type ProfileStore<T> = {\n\tMock: ProfileStoreStandard<T>,\n} & ProfileStoreStandard<T>\n\ntype ConstantName = \"AUTO_SAVE_PERIOD\" | \"LOAD_REPEAT_PERIOD\" | \"FIRST_LOAD_REPEAT\" | \"SESSION_STEAL\"\n| \"ASSUME_DEAD\" | \"START_SESSION_TIMEOUT\" | \"CRITICAL_STATE_ERROR_COUNT\" | \"CRITICAL_STATE_ERROR_EXPIRE\"\n| \"CRITICAL_STATE_EXPIRE\" | \"MAX_MESSAGE_QUEUE\"\n\nexport type ProfileStoreModule = {\n\tIsClosing: boolean,\n\tIsCriticalState: boolean,\n\tOnError: {Connect: (self: any, listener: (message: string, store_name: string, profile_key: string) -> ()) -> ({Disconnect: (self: any) -> ()})},\n\tOnOverwrite: {Connect: (self: any, listener: (store_name: string, profile_key: string) -> ()) -> ({Disconnect: (self: any) -> ()})},\n\tOnCriticalToggle: {Connect: (self: any, listener: (is_critical: boolean) -> ()) -> ({Disconnect: (self: any) -> ()})},\n\tDataStoreState: \"NotReady\" | \"NoInternet\" | \"NoAccess\" | \"Access\",\n\tNew: <T>(store_name: string, template: (T & JSONAcceptable)?) -> (ProfileStore<T>),\n\tSetConstant: (name: ConstantName, value: number) -> ()\n}\n\nlocal Profile = {}\nProfile.__index = Profile\n\nfunction Profile.New(raw_data, key_info, profile_store, key, is_mock, session_token)\n\n\tlocal data = raw_data.Data or {}\n\tlocal session = raw_data.MetaData and raw_data.MetaData.ActiveSession or nil\n\n\tlocal global_updates = raw_data.GlobalUpdates and raw_data.GlobalUpdates[2] or {}\n\tlocal received_global_updates = {}\n\n\tfor _, update in ipairs(global_updates) do\n\t\treceived_global_updates[update[1]] = true\n\tend\n\n\tlocal self = {\n\n\t\tData = data,\n\t\tLastSavedData = DeepCopyTable(data),\n\n\t\tFirstSessionTime = raw_data.MetaData and raw_data.MetaData.ProfileCreateTime or 0,\n\t\tSessionLoadCount = raw_data.MetaData and raw_data.MetaData.SessionLoadCount or 0,\n\t\tSession = session and {PlaceId = session[1], JobId = session[2]},\n\n\t\tRobloxMetaData = raw_data.RobloxMetaData or {},\n\t\tUserIds = raw_data.UserIds or {},\n\t\tKeyInfo = key_info,\n\n\t\tOnAfterSave = Signal.New(),\n\t\tOnSave = Signal.New(),\n\t\tOnLastSave = Signal.New(),\n\t\tOnSessionEnd = Signal.New(),\n\n\t\tProfileStore = profile_store,\n\t\tKey = key,\n\n\t\tload_timestamp = os.clock(),\n\t\tis_mock = is_mock,\n\t\tsession_token = session_token or \"\",\n\t\tload_index = raw_data.MetaData and raw_data.MetaData.SessionLoadCount or 0,\n\t\tlocked_global_updates = {},\n\t\treceived_global_updates = received_global_updates,\n\t\tmessage_handlers = {},\n\t\tglobal_updates = global_updates,\n\n\t}\n\tsetmetatable(self, Profile)\n\n\treturn self\n\nend\n\nfunction Profile:IsActive()\n\treturn ActiveSessionCheck[self.session_token] == self\nend\n\nfunction Profile:Reconcile()\n\tReconcileTable(self.Data, self.ProfileStore.template)\nend\n\nfunction Profile:EndSession()\n\tif self:IsActive() == true then\n\t\ttask.spawn(SaveProfileAsync, self, true, nil, \"Manual\") -- Call save function in a new thread with release_from_session = true\n\tend\nend\n\nfunction Profile:AddUserId(user_id) -- Associates user_id with profile (GDPR compliance)\n\n\tif type(user_id) ~= \"number\" or user_id % 1 ~= 0 then\n\t\twarn(`[{script.Name}]: Invalid UserId argument for :AddUserId() ({tostring(user_id)}); Traceback:\\n` .. debug.traceback())\n\t\treturn\n\tend\n\n\tif user_id < 0 and self.is_mock ~= true and DataStoreState == \"Access\" then\n\t\treturn -- Avoid giving real Roblox APIs negative UserId's\n\tend\n\n\tif table.find(self.UserIds, user_id) == nil then\n\t\ttable.insert(self.UserIds, user_id)\n\tend\n\nend\n\nfunction Profile:RemoveUserId(user_id) -- Removes user_id association with profile (safe function)\n\n\tif type(user_id) ~= \"number\" or user_id % 1 ~= 0 then\n\t\twarn(`[{script.Name}]: Invalid UserId argument for :RemoveUserId() ({tostring(user_id)}); Traceback:\\n` .. debug.traceback())\n\t\treturn\n\tend\n\n\tlocal index = table.find(self.UserIds, user_id)\n\n\tif index ~= nil then\n\t\ttable.remove(self.UserIds, index)\n\tend\n\nend\n\nfunction Profile:SetAsync() -- Saves the profile to the DataStore and removes the session lock\n\n\tif self.view_mode ~= true then\n\t\terror(`[{script.Name}]: :SetAsync() can only be used in view mode`)\n\tend\n\n\tSaveProfileAsync(self, nil, true)\n\nend\n\nfunction Profile:MessageHandler(fn)\n\n\tif type(fn) ~= \"function\" then\n\t\terror(`[{script.Name}]: fn argument is not a function`)\n\tend\n\n\tif self.view_mode ~= true and self:IsActive() ~= true then\n\t\treturn -- Don't process messages if the profile session was ended\n\tend\n\n\tlocal locked_updates = self.locked_global_updates\n\ttable.insert(self.message_handlers, fn)\n\n\tfor _, update in ipairs(self.global_updates) do\n\n\t\tlocal index = update[1]\n\t\tlocal update_data = update[#update] -- Backwards compatibility with ProfileService\n\n\t\tif locked_updates[index] ~= true then\n\n\t\t\tlocal processed_callback = function()\n\t\t\t\tlocked_updates[index] = true\n\t\t\tend\n\n\t\t\tlocal send_update_data = DeepCopyTable(update_data)\n\n\t\t\ttask.spawn(fn, send_update_data, processed_callback)\n\n\t\tend\n\n\tend\n\nend\n\nfunction Profile:Save()\n\n\tif self.view_mode == true then\n\t\terror(`[{script.Name}]: Can't save profile in view mode; Should you be calling :SetAsync() instead?`)\n\tend\n\n\tif self:IsActive() == false then\n\t\twarn(`[{script.Name}]: Attempted saving an inactive profile (STORE:{self.ProfileStore.Name}; KEY:{self.Key});`\n\t\t\t.. ` Traceback:\\n` .. debug.traceback())\n\t\treturn\n\tend\n\n\t-- Move the profile right behind the auto save index to delay the next auto save for it:\n\tRemoveProfileFromAutoSave(self)\n\tAddProfileToAutoSave(self)\n\n\t-- Perform save in new thread:\n\ttask.spawn(SaveProfileAsync, self)\n\nend\n\nlocal ProfileStore: ProfileStoreModule = {\n\n\tIsClosing = false,\n\tIsCriticalState = false,\n\tOnError = OnError, -- (message, store_name, profile_key)\n\tOnOverwrite = OnOverwrite, -- (store_name, profile_key)\n\tOnCriticalToggle = Signal.New(), -- (is_critical)\n\tDataStoreState = \"NotReady\", -- (\"NotReady\", \"NoInternet\", \"NoAccess\", \"Access\")\n\n}\nProfileStore.__index = ProfileStore\n\nfunction ProfileStore.SetConstant(name, value)\n\n\tif type(value) ~= \"number\" then\n\t\terror(`[{script.Name}]: Invalid value type`)\n\tend\n\n\tif name == \"AUTO_SAVE_PERIOD\" then\n\t\tAUTO_SAVE_PERIOD = value\n\telseif name == \"LOAD_REPEAT_PERIOD\" then\n\t\tLOAD_REPEAT_PERIOD = value\n\telseif name == \"FIRST_LOAD_REPEAT\" then\n\t\tFIRST_LOAD_REPEAT = value\n\telseif name == \"SESSION_STEAL\" then\n\t\tSESSION_STEAL = value\n\telseif name == \"ASSUME_DEAD\" then\n\t\tASSUME_DEAD = value\n\telseif name == \"START_SESSION_TIMEOUT\" then\n\t\tSTART_SESSION_TIMEOUT = value\n\telseif name == \"CRITICAL_STATE_ERROR_COUNT\" then\n\t\tCRITICAL_STATE_ERROR_COUNT = value\n\telseif name == \"CRITICAL_STATE_ERROR_EXPIRE\" then\n\t\tCRITICAL_STATE_ERROR_EXPIRE = value\n\telseif name == \"CRITICAL_STATE_EXPIRE\" then\n\t\tCRITICAL_STATE_EXPIRE = value\n\telseif name == \"MAX_MESSAGE_QUEUE\" then\n\t\tMAX_MESSAGE_QUEUE = value\n\telse\n\t\terror(`[{script.Name}]: Invalid constant name was provided`)\n\tend\n\nend\n\nfunction ProfileStore.Test()\n\treturn {\n\t\tActiveSessionCheck = ActiveSessionCheck,\n\t\tAutoSaveList = AutoSaveList,\n\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs,\n\t\tActiveProfileSaveJobs = ActiveProfileSaveJobs,\n\t\tMockStore = MockStore,\n\t\tUserMockStore = UserMockStore,\n\t\tUpdateQueue = UpdateQueue,\n\t}\nend\n\nfunction ProfileStore.New(store_name, template)\n\n\ttemplate = template or {}\n\n\tif type(store_name) ~= \"string\" then\n\t\terror(`[{script.Name}]: Invalid or missing \"store_name\"`)\n\telseif string.len(store_name) == 0 then\n\t\terror(`[{script.Name}]: store_name cannot be an empty string`)\n\telseif string.len(store_name) > 50 then\n\t\terror(`[{script.Name}]: store_name is too long`)\n\tend\n\n\tif type(template) ~= \"table\" then\n\t\terror(`[{script.Name}]: Invalid template argument`)\n\tend\n\n\tlocal self\n\tself = {\n\n\t\tMock = {\n\n\t\t\tName = store_name,\n\n\t\t\tStartSessionAsync = function(_, profile_key)\n\t\t\t\tMockFlag = true\n\t\t\t\treturn self:StartSessionAsync(profile_key)\n\t\t\tend,\n\t\t\tMessageAsync = function(_, profile_key, message)\n\t\t\t\tMockFlag = true\n\t\t\t\treturn self:MessageAsync(profile_key, message)\n\t\t\tend,\n\t\t\tGetAsync = function(_, profile_key, version)\n\t\t\t\tMockFlag = true\n\t\t\t\treturn self:GetAsync(profile_key, version)\n\t\t\tend,\n\t\t\tVersionQuery = function(_, profile_key, sort_direction, min_date, max_date)\n\t\t\t\tMockFlag = true\n\t\t\t\treturn self:VersionQuery(profile_key, sort_direction, min_date, max_date)\n\t\t\tend,\n\t\t\tRemoveAsync = function(_, profile_key)\n\t\t\t\tMockFlag = true\n\t\t\t\treturn self:RemoveAsync(profile_key)\n\t\t\tend\n\t\t},\n\n\t\tName = store_name,\n\n\t\ttemplate = template,\n\t\tdata_store = nil,\n\t\tload_jobs = {},\n\t\tmock_load_jobs = {},\n\t\tis_ready = true,\n\n\t}\n\tsetmetatable(self, ProfileStore)\n\n\tlocal options = Instance.new(\"DataStoreOptions\")\n\toptions:SetExperimentalFeatures({v2 = true})\n\n\tif DataStoreState == \"NotReady\" then\n\n\t\t-- The module is not sure whether DataStores are accessible yet:\n\n\t\tself.is_ready = false\n\n\t\ttask.spawn(function()\n\n\t\t\trepeat task.wait() until DataStoreState ~= \"NotReady\"\n\n\t\t\tif DataStoreState == \"Access\" then\n\t\t\t\tself.data_store = DataStoreService:GetDataStore(store_name, nil, options)\n\t\t\tend\n\n\t\t\tself.is_ready = true\n\n\t\tend)\n\n\telseif DataStoreState == \"Access\" then\n\n\t\tself.data_store = DataStoreService:GetDataStore(store_name, nil, options)\n\n\tend\n\n\treturn self\n\nend\n\nlocal function RobloxMessageSubscription(profile, unique_session_id)\n\n\tlocal last_roblox_message = 0\n\n\tlocal roblox_message_subscription = MessagingService:SubscribeAsync(\"PS_\" .. unique_session_id, function(message)\n\t\tif type(message.Data) == \"table\" and message.Data.LoadCount == profile.SessionLoadCount then\n\t\t\t-- High reaction rate, based on numPlayers  10 DataStore budget as of writing\n\t\t\tif os.clock() - last_roblox_message > 6 then \n\t\t\t\tlast_roblox_message = os.clock()\n\t\t\t\tif profile:IsActive() == true then\n\t\t\t\t\tif message.Data.EndSession == true then\n\t\t\t\t\t\tSaveProfileAsync(profile, true, false, \"External\")\n\t\t\t\t\telse\n\t\t\t\t\t\tprofile:Save()\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend)\n\n\tif profile:IsActive() == true then\n\t\tprofile.roblox_message_subscription = roblox_message_subscription\n\telse\n\t\troblox_message_subscription:Disconnect()\n\tend\n\nend\n\nfunction ProfileStore:StartSessionAsync(profile_key, params)\n\n\tlocal is_mock = ReadMockFlag()\n\n\tif type(profile_key) ~= \"string\" then\n\t\terror(`[{script.Name}]: profile_key must be a string`)\n\telseif string.len(profile_key) == 0 then\n\t\terror(`[{script.Name}]: Invalid profile_key`)\n\telseif string.len(profile_key) > 50 then\n\t\terror(`[{script.Name}]: profile_key is too long`)\n\tend\n\n\tif params ~= nil and type(params) ~= \"table\" then\n\t\terror(`[{script.Name}]: Invalid params`)\n\tend\n\n\tparams = params or {}\n\n\tif ProfileStore.IsClosing == true then\n\t\treturn nil\n\tend\n\n\tWaitForStoreReady(self)\n\n\tlocal session_token = SessionToken(self.Name, profile_key, is_mock)\n\n\tif ActiveSessionCheck[session_token] ~= nil then\n\t\terror(`[{script.Name}]: Profile (STORE:{self.Name}; KEY:{profile_key}) is already loaded in this session`)\n\tend\n\n\tActiveProfileLoadJobs = ActiveProfileLoadJobs + 1\n\n\tlocal is_user_cancel = false\n\n\tlocal function cancel_condition()\n\t\tif is_user_cancel == false then\n\t\t\tif params.Cancel ~= nil then\n\t\t\t\tis_user_cancel = params.Cancel() == true\n\t\t\tend\n\t\t\treturn is_user_cancel\n\t\tend\n\t\treturn true\n\tend\n\n\tlocal user_steal = params.Steal == true\n\n\tlocal force_load_steps = 0 -- Session conflict handling values\n\tlocal request_force_load = true\n\tlocal steal_session = false\n\n\tlocal start = os.clock()\n\tlocal exp_backoff = 1\n\n\twhile ProfileStore.IsClosing == false and cancel_condition() == false do\n\n\t\t-- Load profile:\n\n\t\t-- SPECIAL CASE - If StartSessionAsync is called for the same key again before another StartSessionAsync finishes,\n\t\t-- grab the DataStore return for the new call. The early call will return nil. This is supposed to retain\n\t\t-- expected and efficient behavior in cases where a player would quickly rejoin the same server.\n\n\t\tLoadIndex += 1\n\t\tlocal load_id = LoadIndex\n\t\tlocal profile_load_jobs = is_mock == true and self.mock_load_jobs or self.load_jobs\n\t\tlocal profile_load_job = profile_load_jobs[profile_key] -- {load_id, {loaded_data, key_info} or nil}\n\n\t\tlocal loaded_data, key_info\n\t\tlocal unique_session_id = HttpService:GenerateGUID(false)\n\n\t\tif profile_load_job ~= nil then\n\n\t\t\tprofile_load_job[1] = load_id -- Steal load job\n\t\t\twhile profile_load_job[2] == nil do -- Wait for job to finish\n\t\t\t\ttask.wait()\n\t\t\tend\n\t\t\tif profile_load_job[1] == load_id then -- Load job hasn't been double-stolen\n\t\t\t\tloaded_data, key_info = table.unpack(profile_load_job[2])\n\t\t\t\tprofile_load_jobs[profile_key] = nil\n\t\t\telse\n\t\t\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\t\t\t\treturn nil\n\t\t\tend\n\n\t\telse\n\n\t\t\tprofile_load_job = {load_id, nil}\n\t\t\tprofile_load_jobs[profile_key] = profile_load_job\n\n\t\t\tprofile_load_job[2] = table.pack(UpdateAsync(\n\t\t\t\tself,\n\t\t\t\tprofile_key,\n\t\t\t\t{\n\t\t\t\t\tExistingProfileHandle = function(latest_data)\n\n\t\t\t\t\t\tif ProfileStore.IsClosing == true or cancel_condition() == true then\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\tend\n\n\t\t\t\t\t\tlocal active_session = latest_data.MetaData.ActiveSession\n\t\t\t\t\t\tlocal force_load_session = latest_data.MetaData.ForceLoadSession\n\n\t\t\t\t\t\tif active_session == nil then\n\t\t\t\t\t\t\tlatest_data.MetaData.ActiveSession = {PlaceId, JobId, unique_session_id}\n\t\t\t\t\t\t\tlatest_data.MetaData.ForceLoadSession = nil\n\t\t\t\t\t\telseif type(active_session) == \"table\" then\n\t\t\t\t\t\t\tif IsThisSession(active_session) == false then\n\t\t\t\t\t\t\t\tlocal last_update = latest_data.MetaData.LastUpdate\n\t\t\t\t\t\t\t\tif last_update ~= nil then\n\t\t\t\t\t\t\t\t\tif os.time() - last_update > ASSUME_DEAD then\n\t\t\t\t\t\t\t\t\t\tlatest_data.MetaData.ActiveSession = {PlaceId, JobId, unique_session_id}\n\t\t\t\t\t\t\t\t\t\tlatest_data.MetaData.ForceLoadSession = nil\n\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\tif steal_session == true or user_steal == true then\n\t\t\t\t\t\t\t\t\tlocal force_load_interrupted = if force_load_session ~= nil then not IsThisSession(force_load_session) else true\n\t\t\t\t\t\t\t\t\tif force_load_interrupted == false or user_steal == true then\n\t\t\t\t\t\t\t\t\t\tlatest_data.MetaData.ActiveSession = {PlaceId, JobId, unique_session_id}\n\t\t\t\t\t\t\t\t\t\tlatest_data.MetaData.ForceLoadSession = nil\n\t\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\t\telseif request_force_load == true then\n\t\t\t\t\t\t\t\t\tlatest_data.MetaData.ForceLoadSession = {PlaceId, JobId}\n\t\t\t\t\t\t\t\tend\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tlatest_data.MetaData.ForceLoadSession = nil\n\t\t\t\t\t\t\tend\n\t\t\t\t\t\tend\n\n\t\t\t\t\tend,\n\t\t\t\t\tMissingProfileHandle = function(latest_data)\n\n\t\t\t\t\t\tlocal is_cancel = ProfileStore.IsClosing == true or cancel_condition() == true\n\n\t\t\t\t\t\tlatest_data.Data = DeepCopyTable(self.template)\n\t\t\t\t\t\tlatest_data.MetaData = {\n\t\t\t\t\t\t\tProfileCreateTime = os.time(),\n\t\t\t\t\t\t\tSessionLoadCount = 0,\n\t\t\t\t\t\t\tActiveSession = if is_cancel == false then {PlaceId, JobId, unique_session_id} else nil,\n\t\t\t\t\t\t\tForceLoadSession = nil,\n\t\t\t\t\t\t\tMetaTags = {}, -- Backwards compatibility with ProfileService\n\t\t\t\t\t\t}\n\n\t\t\t\t\tend,\n\t\t\t\t\tEditProfile = function(latest_data)\n\n\t\t\t\t\t\tif ProfileStore.IsClosing == true or cancel_condition() == true then\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\tend\n\n\t\t\t\t\t\tlocal active_session = latest_data.MetaData.ActiveSession\n\t\t\t\t\t\tif active_session ~= nil and IsThisSession(active_session) == true then\n\t\t\t\t\t\t\tlatest_data.MetaData.SessionLoadCount = latest_data.MetaData.SessionLoadCount + 1\n\t\t\t\t\t\t\tlatest_data.MetaData.LastUpdate = os.time()\n\t\t\t\t\t\tend\n\n\t\t\t\t\tend,\n\t\t\t\t},\n\t\t\t\tis_mock\n\t\t\t\t))\n\t\t\tif profile_load_job[1] == load_id then -- Load job hasn't been stolen\n\t\t\t\tloaded_data, key_info = table.unpack(profile_load_job[2])\n\t\t\t\tprofile_load_jobs[profile_key] = nil\n\t\t\telse\n\t\t\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\t\t\t\treturn nil -- Load job stolen\n\t\t\tend\n\t\tend\n\n\t\t-- Handle load_data:\n\n\t\tif loaded_data ~= nil and key_info ~= nil then\n\t\t\tlocal active_session = loaded_data.MetaData.ActiveSession\n\t\t\tif type(active_session) == \"table\" then\n\n\t\t\t\tif IsThisSession(active_session) == true then\n\n\t\t\t\t\t-- Profile is now taken by this session:\n\n\t\t\t\t\tlocal profile = Profile.New(loaded_data, key_info, self, profile_key, is_mock, session_token)\n\t\t\t\t\tAddProfileToAutoSave(profile)\n\n\t\t\t\t\tif is_mock ~= true and DataStoreState == \"Access\" then\n\n\t\t\t\t\t\t-- Use MessagingService to quickly detect session conflicts and resolve them quickly:\n\t\t\t\t\t\ttask.spawn(RobloxMessageSubscription, profile, unique_session_id) -- Blocking prevention\n\n\t\t\t\t\tend\n\n\t\t\t\t\tif ProfileStore.IsClosing == true or cancel_condition() == true then\n\t\t\t\t\t\t-- The server has initiated a shutdown by the time this profile was loaded\n\t\t\t\t\t\tSaveProfileAsync(profile, true) -- Release profile and yield until the DataStore call is finished\n\t\t\t\t\t\tprofile = nil -- Don't return the profile object\n\t\t\t\t\tend\n\n\t\t\t\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\t\t\t\t\treturn profile\n\n\t\t\t\telse\n\n\t\t\t\t\tif ProfileStore.IsClosing == true or cancel_condition() == true then\n\t\t\t\t\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\t\t\t\t\t\treturn nil\n\t\t\t\t\tend\n\n\t\t\t\t\t-- Profile is taken by some other session:\n\n\t\t\t\t\tlocal force_load_session = loaded_data.MetaData.ForceLoadSession\n\t\t\t\t\tlocal force_load_interrupted = if force_load_session ~= nil then not IsThisSession(force_load_session) else true\n\n\t\t\t\t\tif force_load_interrupted == false then\n\n\t\t\t\t\t\tif request_force_load == false then\n\t\t\t\t\t\t\tforce_load_steps = force_load_steps + 1\n\t\t\t\t\t\t\tif force_load_steps >= math.ceil(SESSION_STEAL / LOAD_REPEAT_PERIOD) then\n\t\t\t\t\t\t\t\tsteal_session = true\n\t\t\t\t\t\t\tend\n\t\t\t\t\t\tend\n\n\t\t\t\t\t\t-- Request the remote server to end its session:\n\t\t\t\t\t\tif type(active_session[3]) == \"string\" then\n\t\t\t\t\t\t\tlocal session_load_count = loaded_data.MetaData.SessionLoadCount or 0\n\t\t\t\t\t\t\ttask.spawn(MessagingService.PublishAsync, MessagingService, \"PS_\" .. active_session[3], {LoadCount = session_load_count, EndSession = true})\n\t\t\t\t\t\tend\n\n\t\t\t\t\t\t-- Attempt to load the profile again after a delay\n\t\t\t\t\t\tlocal wait_until = os.clock() + if request_force_load == true then FIRST_LOAD_REPEAT else LOAD_REPEAT_PERIOD\n\t\t\t\t\t\trepeat task.wait() until os.clock() >= wait_until or ProfileStore.IsClosing == true\n\n\t\t\t\t\telse\n\t\t\t\t\t\t-- Another session tried to load this profile:\n\t\t\t\t\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\t\t\t\t\t\treturn nil\n\t\t\t\t\tend\n\n\t\t\t\t\trequest_force_load = false -- Only request a force load once\n\n\t\t\t\tend\n\n\t\t\telse\n\t\t\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\t\t\t\treturn nil -- In this scenario it is likely that this server started shutting down\n\t\t\tend\n\t\telse\n\n\t\t\t-- A DataStore call has likely ended in an error:\n\n\t\t\tlocal default_timeout = false\n\n\t\t\tif params.Cancel == nil then\n\t\t\t\tdefault_timeout = os.clock() - start >= START_SESSION_TIMEOUT\n\t\t\tend\n\n\t\t\tif default_timeout == true or ProfileStore.IsClosing == true or cancel_condition() == true then\n\t\t\t\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\t\t\t\treturn nil\n\t\t\tend\n\n\t\t\ttask.wait(exp_backoff)  -- Repeat the call shortly\n\t\t\texp_backoff = math.min(20, exp_backoff * 2)\n\n\t\tend\n\n\tend\n\n\tActiveProfileLoadJobs = ActiveProfileLoadJobs - 1\n\treturn nil -- Game started shutting down or the request was cancelled - don't return the profile\n\nend\n\nfunction ProfileStore:MessageAsync(profile_key, message)\n\n\tlocal is_mock = ReadMockFlag()\n\n\tif type(profile_key) ~= \"string\" then\n\t\terror(`[{script.Name}]: profile_key must be a string`)\n\telseif string.len(profile_key) == 0 then\n\t\terror(`[{script.Name}]: Invalid profile_key`)\n\telseif string.len(profile_key) > 50 then\n\t\terror(`[{script.Name}]: profile_key is too long`)\n\tend\n\n\tif type(message) ~= \"table\" then\n\t\terror(`[{script.Name}]: message must be a table`)\n\tend\n\n\tif ProfileStore.IsClosing == true then\n\t\treturn false\n\tend\n\n\tWaitForStoreReady(self)\n\n\tlocal exp_backoff = 1\n\n\twhile ProfileStore.IsClosing == false do\n\n\t\t-- Updating profile:\n\n\t\tlocal loaded_data = UpdateAsync(\n\t\t\tself,\n\t\t\tprofile_key,\n\t\t\t{\n\t\t\t\tExistingProfileHandle = nil,\n\t\t\t\tMissingProfileHandle = nil,\n\t\t\t\tEditProfile = function(latest_data)\n\n\t\t\t\t\tlocal global_updates = latest_data.GlobalUpdates\n\t\t\t\t\tlocal update_list = global_updates[2]\n\t\t\t\t\t--{\n\t\t\t\t\t--\tupdate_index,\n\t\t\t\t\t--\t{\n\t\t\t\t\t--\t\t{update_index, data}, ...\n\t\t\t\t\t--\t},\n\t\t\t\t\t--},\n\n\t\t\t\t\tglobal_updates[1] += 1\n\t\t\t\t\ttable.insert(update_list, {global_updates[1], message})\n\n\t\t\t\t\t-- Clearing queue if above limit:\n\n\t\t\t\t\twhile #update_list > MAX_MESSAGE_QUEUE do\n\t\t\t\t\t\ttable.remove(update_list, 1)\n\t\t\t\t\tend\n\n\t\t\t\tend,\n\t\t\t},\n\t\t\tis_mock\n\t\t)\n\n\t\tif loaded_data ~= nil then\n\n\t\t\tlocal session_token = SessionToken(self.Name, profile_key, is_mock)\n\n\t\t\tlocal profile = ActiveSessionCheck[session_token]\n\n\t\t\tif profile ~= nil then\n\n\t\t\t\t-- The message was sent to a profile that is active in this server:\n\t\t\t\tprofile:Save()\n\n\t\t\telse\n\n\t\t\t\tlocal meta_data = loaded_data.MetaData or {}\n\t\t\t\tlocal active_session = meta_data.ActiveSession\n\t\t\t\tlocal session_load_count = meta_data.SessionLoadCount or 0\n\n\t\t\t\tif type(active_session) == \"table\" and type(active_session[3]) == \"string\" then\n\t\t\t\t\t-- Request the remote server to auto-save sooner and receive the message:\n\t\t\t\t\ttask.spawn(MessagingService.PublishAsync, MessagingService, \"PS_\" .. active_session[3], {LoadCount = session_load_count})\n\t\t\t\tend\n\n\t\t\tend\n\n\t\t\treturn true\n\n\t\telse\n\n\t\t\ttask.wait(exp_backoff) -- A DataStore call has likely ended in an error - repeat the call shortly\n\t\t\texp_backoff = math.min(20, exp_backoff * 2)\n\n\t\tend\n\n\tend\n\n\treturn false\n\nend\n\nfunction ProfileStore:GetAsync(profile_key, version)\n\n\tlocal is_mock = ReadMockFlag()\n\n\tif type(profile_key) ~= \"string\" then\n\t\terror(`[{script.Name}]: profile_key must be a string`)\n\telseif string.len(profile_key) == 0 then\n\t\terror(`[{script.Name}]: Invalid profile_key`)\n\telseif string.len(profile_key) > 50 then\n\t\terror(`[{script.Name}]: profile_key is too long`)\n\tend\n\n\tif ProfileStore.IsClosing == true then\n\t\treturn nil\n\tend\n\n\tWaitForStoreReady(self)\n\n\tif version ~= nil and (is_mock or DataStoreState ~= \"Access\") then\n\t\treturn nil -- No version support in mock mode\n\tend\n\n\tlocal exp_backoff = 1\n\n\twhile ProfileStore.IsClosing == false do\n\n\t\t-- Load profile:\n\n\t\tlocal loaded_data, key_info = UpdateAsync(\n\t\t\tself,\n\t\t\tprofile_key,\n\t\t\t{\n\t\t\t\tExistingProfileHandle = nil,\n\t\t\t\tMissingProfileHandle = function(latest_data)\n\n\t\t\t\t\tlatest_data.Data = DeepCopyTable(self.template)\n\t\t\t\t\tlatest_data.MetaData = {\n\t\t\t\t\t\tProfileCreateTime = os.time(),\n\t\t\t\t\t\tSessionLoadCount = 0,\n\t\t\t\t\t\tActiveSession = nil,\n\t\t\t\t\t\tForceLoadSession = nil,\n\t\t\t\t\t\tMetaTags = {}, -- Backwards compatibility with ProfileService\n\t\t\t\t\t}\n\n\t\t\t\tend,\n\t\t\t\tEditProfile = nil,\n\t\t\t},\n\t\t\tis_mock,\n\t\t\ttrue, -- Use :GetAsync()\n\t\t\tversion -- DataStore key version\n\t\t)\n\n\t\t-- Handle load_data:\n\n\t\tif loaded_data ~= nil then\n\n\t\t\tif key_info == nil then\n\t\t\t\treturn nil -- Load was successful, but the key was empty - return no profile object\n\t\t\tend\n\n\t\t\tlocal profile = Profile.New(loaded_data, key_info, self, profile_key, is_mock)\n\t\t\tprofile.view_mode = true\n\n\t\t\treturn profile\n\n\t\telse\n\n\t\t\ttask.wait(exp_backoff) -- A DataStore call has likely ended in an error - repeat the call shortly\n\t\t\texp_backoff = math.min(20, exp_backoff * 2)\n\n\t\tend\n\n\tend\n\n\treturn nil -- Game started shutting down - don't return the profile\n\nend\n\nfunction ProfileStore:RemoveAsync(profile_key)\n\n\tlocal is_mock = ReadMockFlag()\n\n\tif type(profile_key) ~= \"string\" or string.len(profile_key) == 0 then\n\t\terror(`[{script.Name}]: Invalid profile_key`)\n\tend\n\n\tif ProfileStore.IsClosing == true then\n\t\treturn false\n\tend\n\n\tWaitForStoreReady(self)\n\n\tlocal wipe_status = false\n\n\tlocal next_in_queue = WaitInUpdateQueue(SessionToken(self.Name, profile_key, is_mock))\n\n\tif is_mock == true then -- Used when the profile is accessed through ProfileStore.Mock\n\n\t\tlocal mock_data_store = UserMockStore[self.Name]\n\n\t\tif mock_data_store ~= nil then\n\t\t\tmock_data_store[profile_key] = nil\n\t\t\tif next(mock_data_store) == nil then\n\t\t\t\tUserMockStore[self.Name] = nil\n\t\t\tend\n\t\tend\n\n\t\twipe_status = true\n\t\ttask.wait() -- Simulate API call yield\n\n\telseif DataStoreState ~= \"Access\" then -- Used when API access is disabled\n\n\t\tlocal mock_data_store = MockStore[self.Name]\n\n\t\tif mock_data_store ~= nil then\n\t\t\tmock_data_store[profile_key] = nil\n\t\t\tif next(mock_data_store) == nil then\n\t\t\t\tMockStore[self.Name] = nil\n\t\t\tend\n\t\tend\n\n\t\twipe_status = true\n\t\ttask.wait() -- Simulate API call yield\n\n\telse -- Live DataStore\n\n\t\twipe_status = pcall(function()\n\t\t\tself.data_store:RemoveAsync(profile_key)\n\t\tend)\n\n\tend\n\n\tnext_in_queue()\n\n\treturn wipe_status\n\nend\n\nlocal ProfileVersionQuery = {}\nProfileVersionQuery.__index = ProfileVersionQuery\n\nfunction ProfileVersionQuery.New(profile_store, profile_key, sort_direction, min_date, max_date, is_mock)\n\n\tlocal self = {\n\t\tprofile_store = profile_store,\n\t\tprofile_key = profile_key,\n\t\tsort_direction = sort_direction,\n\t\tmin_date = min_date,\n\t\tmax_date = max_date,\n\n\t\tquery_pages = nil,\n\t\tquery_index = 0,\n\t\tquery_failure = false,\n\n\t\tis_query_yielded = false,\n\t\tquery_queue = {},\n\n\t\tis_mock = is_mock,\n\t}\n\tsetmetatable(self, ProfileVersionQuery)\n\n\treturn self\n\nend\n\nfunction MoveVersionQueryQueue(self) -- Hidden ProfileVersionQuery method\n\twhile #self.query_queue > 0 do\n\n\t\tlocal queue_entry = table.remove(self.query_queue, 1)\n\n\t\ttask.spawn(queue_entry)\n\n\t\tif self.is_query_yielded == true then\n\t\t\tbreak\n\t\tend\n\n\tend\nend\n\nlocal VersionQueryNextAsyncStackingFlag = false\nlocal WarnAboutVersionQueryOnce = false\n\nfunction ProfileVersionQuery:NextAsync()\n\n\tlocal is_stacking = VersionQueryNextAsyncStackingFlag == true\n\tVersionQueryNextAsyncStackingFlag = false\n\n\tWaitForStoreReady(self.profile_store)\n\n\tif ProfileStore.IsClosing == true then\n\t\treturn nil -- Silently fail :NextAsync() requests\n\tend\n\n\tif self.is_mock == true or DataStoreState ~= \"Access\" then\n\t\tif IsStudio == true and WarnAboutVersionQueryOnce == false then\n\t\t\tWarnAboutVersionQueryOnce = true\n\t\t\twarn(`[{script.Name}]: :VersionQuery() is not supported in mock mode!`)\n\t\tend\n\t\treturn nil -- Silently fail :NextAsync() requests\n\tend\n\n\tlocal profile\n\tlocal is_finished = false\n\n\tlocal function query_job()\n\n\t\tif self.query_failure == true then\n\t\t\tis_finished = true\n\t\t\treturn\n\t\tend\n\n\t\t-- First \"next\" call loads version pages:\n\n\t\tif self.query_pages == nil then\n\n\t\t\tself.is_query_yielded = true\n\n\t\t\ttask.spawn(function()\n\t\t\t\tVersionQueryNextAsyncStackingFlag = true\n\t\t\t\tprofile = self:NextAsync()\n\t\t\t\tis_finished = true\n\t\t\tend)\n\n\t\t\tlocal list_success, error_message = pcall(function()\n\t\t\t\tself.query_pages = self.profile_store.data_store:ListVersionsAsync(\n\t\t\t\t\tself.profile_key,\n\t\t\t\t\tself.sort_direction,\n\t\t\t\t\tself.min_date,\n\t\t\t\t\tself.max_date\n\t\t\t\t)\n\t\t\t\tself.query_index = 0\n\t\t\tend)\n\n\t\t\tif list_success == false or self.query_pages == nil then\n\t\t\t\twarn(`[{script.Name}]: Version query fail - {tostring(error_message)}`)\n\t\t\t\tself.query_failure = true\n\t\t\tend\n\n\t\t\tself.is_query_yielded = false\n\n\t\t\tMoveVersionQueryQueue(self)\n\n\t\t\treturn\n\n\t\tend\n\n\t\tlocal current_page = self.query_pages:GetCurrentPage()\n\t\tlocal next_item = current_page[self.query_index + 1]\n\n\t\t-- No more entries:\n\n\t\tif self.query_pages.IsFinished == true and next_item == nil then\n\t\t\tis_finished = true\n\t\t\treturn\n\t\tend\n\n\t\t-- Load next page when this page is over:\n\n\t\tif next_item == nil then\n\n\t\t\tself.is_query_yielded = true\n\t\t\ttask.spawn(function()\n\t\t\t\tVersionQueryNextAsyncStackingFlag = true\n\t\t\t\tprofile = self:NextAsync()\n\t\t\t\tis_finished = true\n\t\t\tend)\n\n\t\t\tlocal success, error_message = pcall(function()\n\t\t\t\tself.query_pages:AdvanceToNextPageAsync()\n\t\t\t\tself.query_index = 0\n\t\t\tend)\n\n\t\t\tif success == false or #self.query_pages:GetCurrentPage() == 0 then\n\t\t\t\tself.query_failure = true\n\t\t\tend\n\n\t\t\tself.is_query_yielded = false\n\t\t\tMoveVersionQueryQueue(self)\n\n\t\t\treturn\n\n\t\tend\n\n\t\t-- Next page item:\n\n\t\tself.query_index += 1\n\t\tprofile = self.profile_store:GetAsync(self.profile_key, next_item.Version)\n\t\tis_finished = true\n\n\tend\n\n\tif self.is_query_yielded == false then\n\t\tquery_job()\n\telse\n\t\tif is_stacking == true then\n\t\t\ttable.insert(self.query_queue, 1, query_job)\n\t\telse\n\t\t\ttable.insert(self.query_queue, query_job)\n\t\tend\n\tend\n\n\twhile is_finished == false do\n\t\ttask.wait()\n\tend\n\n\treturn profile\n\nend\n\nfunction ProfileStore:VersionQuery(profile_key, sort_direction, min_date, max_date)\n\n\tlocal is_mock = ReadMockFlag()\n\n\tif type(profile_key) ~= \"string\" or string.len(profile_key) == 0 then\n\t\terror(`[{script.Name}]: Invalid profile_key`)\n\tend\n\n\t-- Type check:\n\n\tif sort_direction ~= nil and (typeof(sort_direction) ~= \"EnumItem\"\n\t\tor sort_direction.EnumType ~= Enum.SortDirection) then\n\t\terror(`[{script.Name}]: Invalid sort_direction ({tostring(sort_direction)})`)\n\tend\n\n\tif min_date ~= nil and typeof(min_date) ~= \"DateTime\" and typeof(min_date) ~= \"number\" then\n\t\terror(`[{script.Name}]: Invalid min_date ({tostring(min_date)})`)\n\tend\n\n\tif max_date ~= nil and typeof(max_date) ~= \"DateTime\" and typeof(max_date) ~= \"number\" then\n\t\terror(`[{script.Name}]: Invalid max_date ({tostring(max_date)})`)\n\tend\n\n\tmin_date = typeof(min_date) == \"DateTime\" and min_date.UnixTimestampMillis or min_date\n\tmax_date = typeof(max_date) == \"DateTime\" and max_date.UnixTimestampMillis or max_date\n\n\treturn ProfileVersionQuery.New(self, profile_key, sort_direction, min_date, max_date, is_mock)\n\nend\n\n-- DataStore API access check:\n\nif IsStudio == true then\n\n\ttask.spawn(function()\n\n\t\tlocal new_state = \"NoAccess\"\n\n\t\tlocal status, message = pcall(function()\n\t\t\t-- This will error if current instance has no Studio API access:\n\t\t\tDataStoreService:GetDataStore(\"____PS\"):SetAsync(\"____PS\", os.time())\n\t\tend)\n\n\t\tlocal no_internet_access = status == false and string.find(message, \"ConnectFail\", 1, true) ~= nil\n\n\t\tif no_internet_access == true then\n\t\t\twarn(`[{script.Name}]: No internet access - check your network connection`)\n\t\tend\n\n\t\tif status == false and\n\t\t\t(string.find(message, \"403\", 1, true) ~= nil or -- Cannot write to DataStore from studio if API access is not enabled\n\t\t\t\tstring.find(message, \"must publish\", 1, true) ~= nil or -- Game must be published to access live keys\n\t\t\t\tno_internet_access == true) then -- No internet access\n\n\t\t\tnew_state = if no_internet_access == true then \"NoInternet\" else \"NoAccess\"\n\t\t\tprint(`[{script.Name}]: Roblox API services unavailable - data will not be saved`)\n\t\telse\n\t\t\tnew_state = \"Access\"\n\t\t\tprint(`[{script.Name}]: Roblox API services available - data will be saved`)\n\t\tend\n\n\t\tDataStoreState = new_state\n\t\tProfileStore.DataStoreState = new_state\n\n\tend)\n\nelse\n\n\tDataStoreState = \"Access\"\n\tProfileStore.DataStoreState = \"Access\"\n\nend\n\n-- Update loop:\n\nRunService.Heartbeat:Connect(function()\n\n\t-- Auto saving:\n\n\tlocal auto_save_list_length = #AutoSaveList\n\tif auto_save_list_length > 0 then\n\t\tlocal auto_save_index_speed = AUTO_SAVE_PERIOD / auto_save_list_length\n\t\tlocal os_clock = os.clock()\n\t\twhile os_clock - LastAutoSave > auto_save_index_speed do\n\t\t\tLastAutoSave = LastAutoSave + auto_save_index_speed\n\t\t\tlocal profile = AutoSaveList[AutoSaveIndex]\n\t\t\tif os_clock - profile.load_timestamp < AUTO_SAVE_PERIOD / 2 then\n\t\t\t\t-- This profile is freshly loaded - auto saving immediately is not necessary:\n\t\t\t\tprofile = nil\n\t\t\t\tfor _ = 1, auto_save_list_length - 1 do\n\t\t\t\t\t-- Move auto save index to the right:\n\t\t\t\t\tAutoSaveIndex = AutoSaveIndex + 1\n\t\t\t\t\tif AutoSaveIndex > auto_save_list_length then\n\t\t\t\t\t\tAutoSaveIndex = 1\n\t\t\t\t\tend\n\t\t\t\t\tprofile = AutoSaveList[AutoSaveIndex]\n\t\t\t\t\tif os_clock - profile.load_timestamp >= AUTO_SAVE_PERIOD / 2 then\n\t\t\t\t\t\tbreak\n\t\t\t\t\telse\n\t\t\t\t\t\tprofile = nil\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\t\t-- Move auto save index to the right:\n\t\t\tAutoSaveIndex = AutoSaveIndex + 1\n\t\t\tif AutoSaveIndex > auto_save_list_length then\n\t\t\t\tAutoSaveIndex = 1\n\t\t\tend\n\t\t\t-- Perform save call:\n\t\t\tif profile ~= nil then\n\t\t\t\ttask.spawn(SaveProfileAsync, profile) -- Auto save profile in new thread\n\t\t\tend\n\t\tend\n\tend\n\n\t-- Critical state handling:\n\n\tif ProfileStore.IsCriticalState == false then\n\t\tif #IssueQueue >= CRITICAL_STATE_ERROR_COUNT then\n\t\t\tProfileStore.IsCriticalState = true\n\t\t\tProfileStore.OnCriticalToggle:Fire(true)\n\t\t\tCriticalStateStart = os.clock()\n\t\t\twarn(`[{script.Name}]: Entered critical state`)\n\t\tend\n\telse\n\t\tif #IssueQueue >= CRITICAL_STATE_ERROR_COUNT then\n\t\t\tCriticalStateStart = os.clock()\n\t\telseif os.clock() - CriticalStateStart > CRITICAL_STATE_EXPIRE then\n\t\t\tProfileStore.IsCriticalState = false\n\t\t\tProfileStore.OnCriticalToggle:Fire(false)\n\t\t\twarn(`[{script.Name}]: Critical state ended`)\n\t\tend\n\tend\n\n\t-- Issue queue:\n\n\twhile true do\n\t\tlocal issue_time = IssueQueue[1]\n\t\tif issue_time == nil then\n\t\t\tbreak\n\t\telseif os.clock() - issue_time > CRITICAL_STATE_ERROR_EXPIRE then\n\t\t\ttable.remove(IssueQueue, 1)\n\t\telse\n\t\t\tbreak\n\t\tend\n\tend\n\nend)\n\n-- Release all loaded profiles when the server is shutting down:\n\ntask.spawn(function()\n\n\twhile DataStoreState == \"NotReady\" do\n\t\ttask.wait()\n\tend\n\n\tif DataStoreState ~= \"Access\" then\n\n\t\tgame:BindToClose(function()\n\t\t\tProfileStore.IsClosing = true\n\t\t\ttask.wait() -- Mock shutdown delay\n\t\tend)\n\n\t\treturn -- Don't wait for profiles to properly save in mock mode so studio could end the simulation faster\n\n\tend\n\n\tgame:BindToClose(function()\n\n\t\tProfileStore.IsClosing = true\n\n\t\t-- Release all active profiles:\n\t\t-- (Clone AutoSaveList to a new table because AutoSaveList changes when profiles are released)\n\n\t\tlocal on_close_save_job_count = 0\n\t\tlocal active_profiles = {}\n\t\tfor index, profile in ipairs(AutoSaveList) do\n\t\t\tactive_profiles[index] = profile\n\t\tend\n\n\t\t-- Release the profiles; Releasing profiles can trigger listeners that release other profiles, so check active state:\n\t\tfor _, profile in ipairs(active_profiles) do\n\t\t\tif profile:IsActive() == true then\n\t\t\t\ton_close_save_job_count = on_close_save_job_count + 1\n\t\t\t\ttask.spawn(function() -- Save profile on new thread\n\t\t\t\t\tSaveProfileAsync(profile, true, nil, \"Shutdown\")\n\t\t\t\t\ton_close_save_job_count = on_close_save_job_count - 1\n\t\t\t\tend)\n\t\t\tend\n\t\tend\n\n\t\t-- Yield until all active profile jobs are finished:\n\t\twhile on_close_save_job_count > 0 or ActiveProfileLoadJobs > 0 or ActiveProfileSaveJobs > 0 do\n\t\t\ttask.wait()\n\t\tend\n\n\t\treturn -- We're done!\n\n\tend)\n\nend)\n\nreturn ProfileStore"}},"referenceId":"9696"},{"className":"ModuleScript","name":"ProfileStoreTemplate","parentId":"9358","path":"ServerScriptService/Server/Services/Player/ProfileStoreTemplate","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"return {\n    -- Main data\n\tWins = 0,\n\tDonated = 0,\n\tTokens = 0,\n\t\n\t-- Inventory\n\tInventory = {\n\t\tConsumables = {},\n\t\tGear = {},\n\t\tCosmetics = {},\n\t\tEquippedCosmetics = {},\n\t},\n\t\n\t\n\t-- Extra stats\n\tRoundsSurvived = 0,\n\tSurvivalsByDisaster = {\n\t\t[\"Acid Rain\"] = 0,\n\t\t[\"Flood\"] = 0,\n\t\t[\"Fire\"] = 0,\n\t\t[\"Lightning Storm\"] = 0,\n\t\t[\"Meteor Strike\"] = 0,\n\t\t[\"Plague\"] = 0,\n\t\t[\"Tsunami\"] = 0,\n\t\t[\"Wind Storm\"] = 0,\n\t\t[\"Blackhole\"] = 0,\n\t\t[\"Tornado\"] = 0,\n\t},\n\tDeathsByDisaster = {\n\t\t[\"Acid Rain\"] = 0,\n\t\t[\"Flood\"] = 0,\n\t\t[\"Fire\"] = 0,\n\t\t[\"Lightning Storm\"] = 0,\n\t\t[\"Meteor Strike\"] = 0,\n\t\t[\"Plague\"] = 0,\n\t\t[\"Tsunami\"] = 0,\n\t\t[\"Wind Storm\"] = 0,\n\t\t[\"Blackhole\"] = 0,\n\t\t[\"Tornado\"] = 0,\n\t},\n}"}},"referenceId":"9697"},{"className":"ModuleScript","name":"LeaderboardService","parentId":"9358","path":"ServerScriptService/Server/Services/Player/LeaderboardService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- LEADERBOARD SERVICE\n-- @carsondev7\n----------------------------------------\n\n\n-- SERVICES --\nlocal DataStoreService = game:GetService(\"DataStoreService\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal Players = game:GetService(\"Players\")\n\n-- MODULES --\nlocal DataService = require(game.ServerScriptService.Server.Services.Player.DataService)\n\n-- VARIABLES --\nlocal globalWinsDatastore = DataStoreService:GetOrderedDataStore(\"WinsTest2\")\nlocal globalWinsLeaderboard = game.Workspace.Lobby.GlobalWinsLeaderboard\nlocal globalWinsContainer = globalWinsLeaderboard.Leaderboard.ContainerGui.ContainerFrame\nlocal globalWinsRefreshLabel = globalWinsLeaderboard.Leaderboard.ContainerGui.RefreshLabel\n\nlocal donationsDatastore = DataStoreService:GetOrderedDataStore(\"DonationsTest2\")\nlocal donationLeaderboard = game.Workspace.Lobby.DonationLeaderboard\nlocal donationContainer = donationLeaderboard.Leaderboard.ContainerGui.ContainerFrame\nlocal donationRefreshLabel = donationLeaderboard.Leaderboard.ContainerGui.RefreshLabel\n\n\nlocal localWinsLeaderboard = game.Workspace.Lobby.WinsLeaderboard\nlocal localWinsContainer = localWinsLeaderboard.Leaderboard.ContainerGui.ContainerFrame\nlocal localWinsRefreshLabel = localWinsLeaderboard.Leaderboard.ContainerGui.RefreshLabel\t\n\n\nlocal REFRESH_INTERVAL = 60 -- 1 minute\n\nlocal LeaderboardService = {}\n\n-- templates\nlocal playerLeaderboardTemplate = ReplicatedStorage:WaitForChild(\"GUI\"):WaitForChild(\"PlayerLeaderboardTemplate\")\n\n\nfunction LeaderboardService:UpdateGlobalLeaderboard(dataStore, container)\n\tlocal success, errorMessage = pcall(function()\n\t\tlocal data = dataStore:GetSortedAsync(false, 10) -- top 10 players\n\t\tlocal currPage = data:GetCurrentPage()\n\t\t\n\t\tfor rank, currData in ipairs(currPage) do\n\t\t\tlocal userId = tonumber(currData.key)\n\n\t\t\t-- Skip negative UserIds (local test players)\n\t\t\tif userId and userId > 0 then\n\n\t\t\t\tlocal success, userName = pcall(function()\n\t\t\t\t\treturn game.Players:GetNameFromUserIdAsync(userId)\n\t\t\t\tend)\n\n\t\t\t\tif success and userName then\n\n\t\t\t\t\tlocal name = userName\n\t\t\t\t\tlocal value = currData.value\n\t\t\t\t\tlocal isOnLeaderboard = false\n\n\t\t\t\t\tfor _, v in pairs(container:GetChildren()) do\n\t\t\t\t\t\tif v:IsA(\"Frame\") and v:FindFirstChild(\"PlayerName\") and v.PlayerName.Text == name then\n\t\t\t\t\t\t\tisOnLeaderboard = true\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\n\t\t\t\t\tif value and not isOnLeaderboard then\n\t\t\t\t\t\tlocal newLeaderboardFrame = playerLeaderboardTemplate:Clone()\n\t\t\t\t\t\tnewLeaderboardFrame:FindFirstChild(\"PlayerName\").Text = name\n\t\t\t\t\t\tnewLeaderboardFrame:FindFirstChild(\"Value\").Text = value\n\t\t\t\t\t\tnewLeaderboardFrame:FindFirstChild(\"Rank\").Text = \"#\" .. rank\n\n\t\t\t\t\t\t-- Alternate transparency based on rank\n\t\t\t\t\t\tif rank % 2 == 0 then\n\t\t\t\t\t\t\tnewLeaderboardFrame.BackgroundTransparency = 0.5\n\t\t\t\t\t\tend\n\n\t\t\t\t\t\tnewLeaderboardFrame.Parent = container\n\t\t\t\t\tend\n\t\t\t\telse\n\t\t\t\t\twarn(\"Failed to get username for UserId: \" .. tostring(userId))\n\t\t\t\tend\n\t\t\telse\n\t\t\t\twarn(\"Skipping invalid or local test player UserId: \" .. tostring(userId))\n\t\t\tend\n\t\tend\n\tend)\n\n\tif not success then\n\t\twarn(\"Leaderboard update failed: \" .. tostring(errorMessage))\n\tend\nend\n\nfunction LeaderboardService:UpdateLocalLeaderboard(container)\n\tlocal sortedData = {}\n\t\n\tfor _, player in pairs(Players:GetPlayers()) do\n\t\tif player and player.Character then\n\t\t\tlocal profile = DataService:GetProfile(player)\n\t\t\tif profile then\n\t\t\t\ttable.insert(sortedData, {player = player, wins = profile.Data.Wins})\n\t\t\tend\n\t\tend\n\tend\n\t\n\t-- Sort player data on wins\n\ttable.sort(sortedData, function(a, b)\n\t\treturn a.wins > b.wins\n\tend)\n\t\n\tlocal rank = 1\n\t\n\tfor _, playerData in ipairs(sortedData) do\n\t\tlocal player = playerData.player\n\t\tlocal wins = playerData.wins\n\t\t\n\t\tlocal isOnLeaderboard = false\n\t\t\n\t\tif not player or not wins then continue end\n\t\t\n\t\tfor _, v in pairs(container:GetChildren()) do\n\t\t\tif v:IsA(\"Frame\") and v:FindFirstChild(\"PlayerName\") and v.PlayerName.Text == player.Name then\n\t\t\t\tisOnLeaderboard = true\n\t\t\t\tbreak\n\t\t\tend\n\t\tend\n\n\t\tif not isOnLeaderboard then\n\t\t\tlocal newLeaderboardFrame = playerLeaderboardTemplate:Clone()\n\t\t\tnewLeaderboardFrame:FindFirstChild(\"PlayerName\").Text = player.Name\n\t\t\tnewLeaderboardFrame:FindFirstChild(\"Value\").Text = wins\n\t\t\tnewLeaderboardFrame:FindFirstChild(\"Rank\").Text = \"#\" .. rank\n\n\t\t\t-- Alternate transparency based on rank\n\t\t\tif rank % 2 == 0 then\n\t\t\t\tnewLeaderboardFrame.BackgroundTransparency = 0.5\n\t\t\tend\n\n\t\t\tnewLeaderboardFrame.Parent = container\n\t\tend\n\t\t\n\t\trank += 1\n\tend\nend\n\n\nfunction LeaderboardService:Start()\n\twhile true do\n\t\t-- update all data stores\n\t\tfor _, player in pairs(Players:GetPlayers()) do\n\t\t\t-- Skip local test players\n\t\t\tif player.UserId > 0 then\n\t\t\t\t-- wins datastore\n\t\t\t\tlocal profile = DataService:GetProfile(player)\n\t\t\t\tif profile then\n\t\t\t\t\tlocal wins = profile.Data.Wins\n\t\t\t\t\tif wins and wins > 0 then\n\t\t\t\t\t\tglobalWinsDatastore:SetAsync(player.UserId, wins)\n\t\t\t\t\tend\n\t\t\t\t\t\n\t\t\t\t\tlocal donated = profile.Data.Donated\n\t\t\t\t\tif donated and donated > 0 then\n\t\t\t\t\t\tdonationsDatastore:SetAsync(player.UserId, donated)\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\telse\n\t\t\t\twarn(\"Skipping local test player: \" .. player.Name)\n\t\t\tend\n\t\tend\n\n\t\t-- remove all previous frames\n\t\tfor _, child in pairs(globalWinsContainer:GetChildren()) do\n\t\t\tif child:IsA(\"Frame\") then\n\t\t\t\tchild:Destroy()\n\t\t\tend\n\t\tend\n\t\t\n\t\tfor _, child in pairs(donationContainer:GetChildren()) do\n\t\t\tif child:IsA(\"Frame\") then\n\t\t\t\tchild:Destroy()\n\t\t\tend\n\t\tend\n\t\t\n\t\tfor _, child in pairs(localWinsContainer:GetChildren()) do\n\t\t\tif child:IsA(\"Frame\") then\n\t\t\t\tchild:Destroy()\n\t\t\tend\n\t\tend\n\t\n\t\ttask.spawn(function()\n\t\t\t-- update global leaderboards\n\t\t\tself:UpdateGlobalLeaderboard(globalWinsDatastore, globalWinsContainer)\n\t\t\tself:UpdateGlobalLeaderboard(donationsDatastore, donationContainer)\n\n\t\t\t-- update local leaderboard\n\t\t\tself:UpdateLocalLeaderboard(localWinsContainer)\n\t\tend)\n\t\t\n\t\t-- Update refresh labels then update leaderboards\n\t\tfor i = REFRESH_INTERVAL, 1, -1 do\n\t\t\t-- Update refresh timers for leaderboards\n\t\t\tlocalWinsRefreshLabel.Text = \"Refreshing in \" .. i .. \"s\"\n\t\t\tglobalWinsRefreshLabel.Text = \"Refreshing in \" .. i .. \"s\"\n\t\t\tdonationRefreshLabel.Text = \"Refreshing in \" .. i .. \"s\"\n\t\t\ttask.wait(1)\n\t\tend\n\tend\nend\n\ntask.spawn(function()\n\tLeaderboardService:Start()\nend)\nreturn LeaderboardService\n"}},"referenceId":"9698"},{"className":"ModuleScript","name":"ModifierService","parentId":"9358","path":"ServerScriptService/Server/Services/Player/ModifierService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- MODIFIER SERVICE MODULE SCRIPT \n-- @carsondev7\n----------------------------------------\n\nlocal Players = game:GetService(\"Players\")\n\nlocal ModifierService = {}\nlocal playerModifiers = {}  -- { [player] = { Speed = {...}, Jump = {...} } }\n\n-- Modifier types\nlocal ModifierType = {\n\tSPEED = \"Speed\",\n\tJUMP = \"Jump\",\n\tHEALTH = \"Health\",\n}\n\n--------------------------------------------------------------------------------\n-- ADD/REMOVE MODIFIERS\n--------------------------------------------------------------------------------\n\n-- Add a temporary or permanent modifier\nfunction ModifierService:AddModifier(player, modifierType, modifierId, value, duration)\n\tif not playerModifiers[player] then\n\t\tplayerModifiers[player] = {\n\t\t\tSpeed = {},\n\t\t\tJump = {},\n\t\t\tHealth = {},\n\t\t}\n\tend\n\n\t-- Add modifier\n\tplayerModifiers[player][modifierType][modifierId] = {\n\t\tValue = value,\n\t\tPermanent = duration == nil,\n\t}\n\n\t-- Apply the change\n\tself:UpdatePlayerStats(player)\n\n\t-- Remove after duration if temporary\n\tif duration then\n\t\ttask.delay(duration, function()\n\t\t\tself:RemoveModifier(player, modifierType, modifierId)\n\t\tend)\n\tend\n\n\tprint(string.format(\"Added %s modifier '%s' (+%d) to %s\", \n\t\tmodifierType, modifierId, value, player.Name))\nend\n\nfunction ModifierService:RemoveModifier(player, modifierType, modifierId)\n\tif not playerModifiers[player] then return end\n\n\tplayerModifiers[player][modifierType][modifierId] = nil\n\tself:UpdatePlayerStats(player)\n\n\tprint(string.format(\"Removed %s modifier '%s' from %s\", \n\t\tmodifierType, modifierId, player.Name))\nend\n\n-- Calculate total modifier for a type\nfunction ModifierService:GetTotalModifier(player, modifierType)\n\tif not playerModifiers[player] then return 0 end\n\n\tlocal total = 0\n\tfor modifierId, modifier in pairs(playerModifiers[player][modifierType]) do\n\t\ttotal = total + modifier.Value\n\tend\n\n\treturn total\nend\n\n-- Apply all modifiers to player\nfunction ModifierService:UpdatePlayerStats(player)\n\tlocal character = player.Character\n\tif not character then return end\n\n\tlocal humanoid = character:FindFirstChild(\"Humanoid\")\n\tif not humanoid then return end\n\n\t-- Base values\n\tlocal baseSpeed = 16\n\tlocal baseJump = 7.2\n\n\t-- Calculate totals\n\tlocal speedModifier = self:GetTotalModifier(player, ModifierType.SPEED)\n\tlocal jumpModifier = self:GetTotalModifier(player, ModifierType.JUMP)\n\n\t-- Apply\n\thumanoid.WalkSpeed = baseSpeed + speedModifier\n\thumanoid.JumpHeight = baseJump + jumpModifier\n\n\tprint(string.format(\"%s stats: Speed=%d, Jump=%.1f\", \n\t\tplayer.Name, humanoid.WalkSpeed, humanoid.JumpHeight))\nend\n\n-- Check if a specific modifier is active\nfunction ModifierService:HasModifier(player, modifierType, modifierId)\n\tif not playerModifiers[player] then return false end\n\treturn playerModifiers[player][modifierType][modifierId] ~= nil\nend\n\n-- Clear all modifiers (on death/round end)\nfunction ModifierService:ClearAllModifiers(player)\n\tplayerModifiers[player] = {\n\t\tSpeed = {},\n\t\tJump = {},\n\t\tHealth = {},\n\t}\n\tself:UpdatePlayerStats(player)\nend\n\n-- Clear only temporary modifiers (keep permanent ones)\nfunction ModifierService:ClearTemporaryModifiers(player)\n\tif not playerModifiers[player] then return end\n\n\tfor modifierType, modifiers in pairs(playerModifiers[player]) do\n\t\tfor modifierId, modifier in pairs(modifiers) do\n\t\t\tif not modifier.Permanent then\n\t\t\t\tmodifiers[modifierId] = nil\n\t\t\tend\n\t\tend\n\tend\n\n\tself:UpdatePlayerStats(player)\nend\n\nreturn ModifierService"}},"referenceId":"9699"},{"className":"Folder","name":"Networking","parentId":"9356","path":"ServerScriptService/Server/Services/Networking","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9359"},{"className":"ModuleScript","name":"NetworkService","parentId":"9359","path":"ServerScriptService/Server/Services/Networking/NetworkService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- NETWORK SERVICE MODULE SCRIPT \n-- @carsondev7\n----------------------------------------\n\n----------------------------\n-- SERVICES --\n----------------------------\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\n----------------------------\n-- VARIABLES --\n----------------------------\nlocal NetworkService = {}\n\n-- REMOTES --\nlocal remoteEvents = ReplicatedStorage.RemoteEvents\n\n-- Events\nlocal guiEvents = remoteEvents:WaitForChild(\"GUI\")\nlocal notificationEvent = guiEvents:WaitForChild(\"NotificationEvent\")\nlocal soundEffectEvent = remoteEvents:WaitForChild(\"Audio\"):WaitForChild(\"SoundEffect\")\nlocal postProcessingEvent = remoteEvents:WaitForChild(\"PostProcessing\"):WaitForChild(\"PostProcessing\")\n\n----------------------------\n-- PRIVATE FUNCTIONS --\n----------------------------\n\n-- Fires a remote event for player\nlocal function fireRemoteEvent(remote, player, data)\n\tif remote and player and player:IsA(\"Player\") then\n\t\tremote:FireClient(player, data)\n\telse\n\t\twarn(\"[NetworkService] Invalid remote\", remote)\n\tend\nend\n\n\n----------------------------\n-- PUBLIC API --\n----------------------------\n\n-- Send confirmation to client\nfunction NetworkService:SendUIEvent(player, data)\n\tfireRemoteEvent(notificationEvent, player, data)\nend\n\n-- Send sound effect to client\nfunction NetworkService:SendSoundEffect(player, data)\n\tfireRemoteEvent(soundEffectEvent, player, data)\nend\n\n-- Send pp effect to client\nfunction NetworkService:SendPostProcessingEffect(player, data)\n\tfireRemoteEvent(postProcessingEvent, player, data)\nend\n\n\n\n----------------------------\n-- MAIN --\n----------------------------\nreturn NetworkService\n"}},"referenceId":"9700"},{"className":"Folder","name":"Disasters","parentId":"9356","path":"ServerScriptService/Server/Services/Disasters","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9360"},{"className":"ModuleScript","name":"DisasterDefinitions","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/DisasterDefinitions","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- DISASTER DEFINITIONS\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal WindStormService = require(game.ServerScriptService.Server.Services.Disasters.WindStormService)\nlocal FloodService = require(game.ServerScriptService.Server.Services.Disasters.FloodService)\nlocal MeteorStrikeService = require(game.ServerScriptService.Server.Services.Disasters.MeteorStrikeService)\nlocal PlagueService = require(game.ServerScriptService.Server.Services.Disasters.PlagueService)\nlocal FireService = require(game.ServerScriptService.Server.Services.Disasters.FireService)\nlocal AcidRainService = require(game.ServerScriptService.Server.Services.Disasters.AcidRainService)\nlocal TsunamiService = require(game.ServerScriptService.Server.Services.Disasters.TsunamiService)\nlocal LightningStormService = require(game.ServerScriptService.Server.Services.Disasters.LightningStormService)\nlocal BlackholeService = require(game.ServerScriptService.Server.Services.Disasters.BlackholeService)\nlocal TornadoService = require(game.ServerScriptService.Server.Services.Disasters.TornadoService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n\n--------------------------------------------------------------------------------\n-- DISASTER DEFINITIONS\n--------------------------------------------------------------------------------\n\nlocal DisasterDefinitions = {\n\t\n\t-- WIND STORM\n\tWindStorm = {\n\t\tName = \"Wind Storm\",\n\t\tDescription = \"A strong gust pushes players to the side.\",\n\t\tDuration = 5,\n\t\tMinPlayers = 0,\n\t\t\n\t\tInitialize = function(map)\n\t\tend,\n\t\t\n\t\tStart = function(duration, map)\n\t\t\tWindStormService:Start(duration, map)\n\t\tend,\n\t\t\n\t\tEnd = function(map)\n\t\t\t-- End the wind storm\n\t\t\tWindStormService:End(map)\n\t\tend,\n\t\t\n\t\tResetDisaster = function(map)\n\t\t\t-- Reset the wind storm\n\t\t\tWindStormService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- FLOOD\n\tFlood = {\n\t\tName = \"Flood\",\n\t\tDescription = \"A flood rises, pushing players to the surface.\",\n\t\tDuration = 10,\n\t\tMinPlayers = 0,\n\t\t\n\t\tInitialize = function(map)\n\t\t\t-- Initialize the flood\n\t\t\tFloodService:Initialize(map)\n\t\tend,\n\t\t\n\t\tStart = function(duration, map)\n\t\t\t-- Start the flood\n\t\t\tFloodService:Start(duration, map)\n\t\tend,\n\t\t\n\t\tEnd = function(map)\n\t\t\t-- End the flood\n\t\t\tFloodService:End(map)\n\t\tend,\n\t\t\n\t\tResetDisaster = function(map)\n\t\t\t-- Reset the flood\n\t\t\tFloodService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- METEOR STRIKE\n\tMeteorStrike = {\n\t\tName = \"Meteor Strike\",\n\t\tDescription = \"A giant rock is hurdling towards you.\",\n\t\tDuration = 10,\n\t\tMinPlayers = 0,\n\t\t\n\t\tInitialize = function(map)\n\t\t\t-- Initialize the meteor strike\n\t\t\tMeteorStrikeService:Initialize(map)\n\t\tend,\n\n\t\tStart = function(duration, map)\n\t\t\t-- Start the meteor strike\n\t\t\tMeteorStrikeService:Start(duration, map)\n\t\tend,\n\t\t\n\t\tEnd = function(map)\n\t\t\t-- End the meteor strike\n\t\t\tMeteorStrikeService:End(map)\n\t\tend,\n\t\t\n\t\tResetDisaster = function(map)\n\t\t\t-- Reset the meteor strike\n\t\t\tMeteorStrikeService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t\n\t-- PLAGUE \n\tPlague = {\n\t\tName = \"Plague\",\n\t\tDescription = \"A plague breaks out, infecting players.\",\n\t\tDuration = 10,\n\t\tMinPlayers = 3,\n\t\t\n\t\tInitialize = function(map)\n\t\t\t-- Initialize the plague\n\t\tend,\n\t\t\n\t\tStart = function(duration, map)\n\t\t\t-- Start the plague\n\t\t\tPlagueService:Start(duration, map)\n\t\tend,\n\t\t\n\t\tEnd = function(map)\n\t\t\t-- End the plague\n\t\t\tPlagueService:End(map)\n\t\tend,\n\t\t\n\t\tResetDisaster = function(map)\n\t\t\t-- Reset the plague\n\t\t\tPlagueService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- FIRE \n\tFire = {\n\t\tName = \"Fire\",\n\t\tDescription = \"A fire breaks lose\",\n\t\tDuration = 10,\n\t\tMinPlayers = 0,\n\t\t\n\t\tInitialize = function(map)\n\t\t\t-- Initialize the fire\n\t\tend,\n\n\t\tStart = function(duration, map)\n\t\t\t-- Start the fire\n\t\t\tFireService:Start(duration, map)\n\t\tend,\n\n\t\tEnd = function(map)\n\t\t\t-- End the fire\n\t\t\tFireService:End(map)\n\t\tend,\n\t\t\n\t\tResetDisaster = function(map)\n\t\t\t-- Reset the fire\n\t\t\tFireService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- ACID RAIN \n\tAcidRain = {\n\t\tName = \"Acid Rain\",\n\t\tDescription = \"Acid rain begins to fall.\",\n\t\tDuration = 10,\n\t\tMinPlayers = 0,\n\t\t\n\t\tInitialize = function(map)\n\t\t\tAcidRainService:Initialize(map)\n\t\tend,\n\n\t\tStart = function(duration, map)\n\t\t\t-- Start the acid rain\n\t\t\tAcidRainService:Start(duration, map)\n\t\tend,\n\n\t\tEnd = function()\n\t\t\t-- End the acid rain\n\t\t\tAcidRainService:End()\n\t\tend,\n\t\t\n\t\tResetDisaster = function(map)\n\t\t\tAcidRainService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- TSUNAMI\n\tTsunami = {\n\t\tName = \"Tsunami\",\n\t\tDescription = \"A tsunami comes rushing in.\",\n\t\tDuration = 10,\n\t\tMinPlayers = 0,\n\n\t\tInitialize = function(map)\n\t\tend,\n\n\t\tStart = function(duration, map)\n\t\t\t-- Start the acid rain\n\t\t\tTsunamiService:Start(duration, map)\n\t\tend,\n\n\t\tEnd = function()\n\t\t\t-- End the acid rain\n\t\t\tTsunamiService:End()\n\t\tend,\n\n\t\tResetDisaster = function(map)\n\t\t\tTsunamiService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- LIGHTNING STORM\n\tLightningStorm = {\n\t\tName = \"Lightning Storm\",\n\t\tDescription = \"Lightning storm rushes in\",\n\t\tDuration = 10,\n\t\tMinPlayers = 0,\n\n\t\tInitialize = function(map)\n\t\t\tLightningStormService:Initialize(map)\n\t\tend,\n\n\t\tStart = function(duration, map)\n\t\t\t-- Start the lightning storm\n\t\t\tLightningStormService:Start(duration, map)\n\t\tend,\n\n\t\tEnd = function()\n\t\t\t-- End the lighning storm\n\t\t\tLightningStormService:End()\n\t\tend,\n\n\t\tResetDisaster = function(map)\n\t\t\tLightningStormService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- BLACKHOLE\n\tBlackhole = {\n\t\tName = \"Blackhole\",\n\t\tDescription = \"Blackhole starts pulling\",\n\t\tDuration = 7,\n\t\tMinPlayers = 0,\n\n\t\tInitialize = function(map)\n\t\t\tBlackholeService:Initialize(map)\n\t\tend,\n\n\t\tStart = function(duration, map)\n\t\t\t-- Start the lightning storm\n\t\t\tBlackholeService:Start(duration, map)\n\t\tend,\n\n\t\tEnd = function()\n\t\t\t-- End the lighning storm\n\t\t\tBlackholeService:End()\n\t\tend,\n\n\t\tResetDisaster = function(map)\n\t\t\tBlackholeService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t-- Tornado\n\tTornado = {\n\t\tName = \"Tornado\",\n\t\tDescription = \"Tornado starts pulling\",\n\t\tDuration = 10,\n\t\tMinPlayers = 0,\n\n\t\tInitialize = function(map)\n\t\t\tTornadoService:Initialize(map)\n\t\tend,\n\n\t\tStart = function(duration, map)\n\t\t\t-- Start the lightning storm\n\t\t\tTornadoService:Start(duration, map)\n\t\tend,\n\n\t\tEnd = function()\n\t\t\t-- End the lighning storm\n\t\t\tTornadoService:End()\n\t\tend,\n\n\t\tResetDisaster = function(map)\n\t\t\tTornadoService:ResetDisaster(map)\n\t\tend,\n\t},\n\t\n\t---- EARTHQUAKE \n\t--Earthquake = {\n\t--\tName = \"Earthquake\",\n\t--\tDescription = \"An earthquake breaks out.\",\n\t--\tDuration = 10,\n\t--\tMinPlayers = 0,\n\n\t--\tStart = function(duration, map)\n\t--\t\t-- Start the earthquake\n\t--\tend,\n\n\t--\tEnd = function()\n\t--\t\t-- End the earthquake\n\t--\tend\n\t--},\n\t\n\t\n\t\n\t---- HEAT STROKE \n\t--\tHeatWave = {\n\t--\tName = \"HeatWave\",\n\t--\tDescription = \"Heat wave sets in.\",\n\t--\tDuration = 10,\n\t--\tMinPlayers = 0,\n\n\t--\tStart = function(duration, map)\n\t--\t\t-- Start the heat wave\n\t--\tend,\n\n\t--\tEnd = function()\n\t--\t\t-- End the heat wave\n\t--\tend\n\t--},\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t---- ENVIRONMENTAL CHANGES --\n\t--DenseFog = {\n\t--\tName = \"Dense Fog\",\n\t--\tDescription = \"A dense fog rolls in.\",\n\t--\tDuration = 0,\n\t--\tMinPlayers = 0,\n\t--\tPersistent = true,\n\n\t--\tStart = function(duration, map)\n\t--\t\t-- Start the fog\n\t--\tend,\n\n\t--\tEnd = function()\n\t--\t\t-- End the fog\n\t--\tend\n\t--},\n}\n\nreturn DisasterDefinitions\n"}},"referenceId":"9701"},{"className":"ModuleScript","name":"DisasterService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/DisasterService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- DISASTER SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\n-- MODULES --\nlocal DisasterDefinitions = require(script.Parent.DisasterDefinitions)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- ENUMS --\nlocal SoundType\t= require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n-- VARIABLES --\nlocal DisasterService = {}\n\n\n--------------------------------------------------------------------------------\n-- DISASTER FUNCTIONS\n--------------------------------------------------------------------------------\n\n-- Initialize any pre disaster events before it actually starts\nfunction DisasterService:InitializeDisaster(disaster, map)\n\tif not disaster or not map then return end\n\t-- Initialize the disaster\n\tdisaster.Initialize(map)\nend\n\n\nfunction DisasterService:StartDisaster(disaster, map)\n\tif not disaster or not map then return end\n\t\n\t-- Start the disaster\n\tdisaster.Start(disaster.Duration, map)\nend\n\t\n\t\nfunction DisasterService:EndDisaster(disaster, map)\n\tif not disaster then return end\n\t-- End the disaster\n\tdisaster.End(map)\nend\n\n\nfunction DisasterService:ResetDisasters(map)\n\tfor _, disaster in pairs(DisasterDefinitions) do\n\t\tdisaster.ResetDisaster(map)\n\tend\nend\n\n\nfunction DisasterService:ChooseRandomDisaster(numPlayersAlive)\n\tlocal disasters = {}\n\t\n\t--return DisasterDefinitions[\"Tornado\"]\n\n\tfor name, disaster in pairs(DisasterDefinitions) do\n\t\tif disaster.MinPlayers <= numPlayersAlive then\n\t\t\ttable.insert(disasters, disaster)\n\t\tend\n\tend\n\n\t-- Remove last disaster to prevent repeat\n\tif self.LastDisaster then\n\t\tfor i = #disasters, 1, -1 do\n\t\t\tif disasters[i] == self.LastDisaster then\n\t\t\t\ttable.remove(disasters, i)\n\t\t\t\tbreak\n\t\t\tend\n\t\tend\n\tend\n\n\tlocal chosenDisaster = disasters[math.random(1, #disasters)]\n\tself.LastDisaster = chosenDisaster\n\n\treturn chosenDisaster\nend\n\n\nreturn DisasterService\n"}},"referenceId":"9702"},{"className":"ModuleScript","name":"WindStormService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/WindStormService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- WINDSTORM SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal SoundService = game:GetService(\"SoundService\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\nlocal MovementService = require(game.ServerScriptService.Server.Services.Player.MovementService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\nlocal SoundType = require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n-- VARIABLES --\nlocal windSound = SoundService.SoundEffects.Disasters.WindStorm\n\n-- CONFIGS --\nlocal DAMAGE_CHANCE = .15 -- 15% chance to deal damage to part\nlocal IMPULSE_COLLISIONS = true\t\t-- Enable/disable impulse collisions\nlocal isActive = false\n\n\nlocal WindStormService = {}\n\n--------------------------------------------------------------------------------\n-- WIND STORM LIFECYCLE\n--------------------------------------------------------------------------------\n\nfunction WindStormService:Start(duration, map)\n\tif isActive then return end\n\tisActive = true\n\t\n\t-- Pick ONE direction for the entire storm\n\tlocal windDirection = Vector3.new(\n\t\tmath.random() - 0.5,\n\t\t0,\n\t\tmath.random() - 0.5\n\t).Unit\n\n\tlocal baseStrength = 160 + math.random() * 300\n\tlocal endTime = tick() + duration\n\n\t-- Send windstorm effect to all players\n\tfor _, player in Players:GetPlayers() do\n\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\t\tType = \"WindStorm\",\n\t\t\t\tDirection = windDirection,\n\t\t\t\tToggle = true\n\t\t\t})\n\t\t\t\n\t\t\t-- Force all players to stand if they are sitting in chair\n\t\t\tMovementService:ForceStand(player)\n\t\tend\n\tend\n\n\t-- Play windstorm sound\n\tTweenerService:FadeSoundIn(windSound)\n\t\n\t-- Damage random parts over time\n\ttask.spawn(function()\n\t\twhile isActive do\t\t\t\n\t\t\tself:DamageRandomParts(map)\n\t\t\ttask.wait(duration / 3)\n\t\tend\n\tend)\n\t\n\n\ttask.spawn(function()\n\t\twhile isActive do\t\t\t\n\t\t\tlocal t = math.clamp((endTime - tick()) / duration, 0, 1)\n\t\t\tlocal gust = (math.random() - 0.5) * 6 * t\n\t\t\tlocal windStrength = baseStrength + gust\n\t\t\t\n\t\t\tlocal rng = Random.new()\n\t\t\tlocal randomLift = rng:NextNumber(4, 8)\n\n\t\t\tfor _, player in Players:GetPlayers() do\n\t\t\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t\t\tlocal character = player.Character\n\t\t\t\t\tlocal hrp = character and character:FindFirstChild(\"HumanoidRootPart\")\n\t\t\t\t\tif hrp then\n\t\t\t\t\t\thrp.AssemblyLinearVelocity += windDirection * windStrength * 0.1 + Vector3.new(0, randomLift, 0)\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\n\t\t\ttask.wait(0.1)\n\t\tend\n\tend)\nend\n\nfunction WindStormService:End()\n\tif not isActive then return end\n\tisActive = false\n\t\n\t-- End the wind storm\n\tTweenerService:FadeSoundOut(windSound)\n\t\n\t-- Stop the windstorm effect for all players\n\tfor _, player in Players:GetPlayers() do\n\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\tType = \"WindStorm\",\n\t\t\tToggle = false\n\t\t})\n\tend\nend\n\nfunction WindStormService:ResetDisaster()\n\tself:End()\nend\n\n\n--------------------------------------------------------------------------------\n-- DAMAGE INTERACTIONS\n--------------------------------------------------------------------------------\n\n-- Each round randomly damage parts around the map\nfunction WindStormService:DamageRandomParts(map)\n\tfor _, part in ipairs(map.InteractiveParts:GetDescendants()) do\n\t\tif part:IsDescendantOf(map.InteractiveParts) then\n\t\t\t-- small chance to be affected\n\t\t\tif math.random() < DAMAGE_CHANCE then\n\t\t\t\t-- Structural logic\n\t\t\t\tStructureService:Collapse(part, IMPULSE_COLLISIONS)\n\t\t\tend\n\t\tend\n\tend\nend\n\n\nreturn WindStormService\n"}},"referenceId":"9703"},{"className":"ModuleScript","name":"FloodService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/FloodService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- FLOOD SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal Lighting = game:GetService(\"Lighting\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- VARIABLES --\nlocal FloodService = {}\nlocal waterPart = workspace.World.Water\nlocal rainClouds = workspace.World.RainClouds\nlocal floodSound = SoundService.SoundEffects.Disasters.Flood\nlocal rainSound = SoundService.SoundEffects.Disasters.Rain\nlocal waterOriginalPos = waterPart.CFrame\nlocal floodOccuring = false\nlocal hitParts = {}\n\n-- CONFIG --\nlocal WATER_DAMAGE = 20\nlocal IMPULSE_COLLISIONS = true\t\t\t-- Enable/disable impulse collisions\nlocal DAMAGE_CHANCE = 0.4 \t\t\t\t-- Chance to damage parts\nlocal BOBBLE_HEIGHT = 2\t\t\t\t\t-- How high water bobs (in studs)\nlocal BOBBLE_SPEED = 3\t\t\t\t\t-- How fast water bobs (seconds per cycle)\n\n\n--------------------------------------------------------------------------------\n-- FLOOD LIFECYCLE\n--------------------------------------------------------------------------------\n\n-- Fade in rain clouds\nfunction FloodService:Initialize(map)\n\tif floodOccuring then return end\n\tfloodOccuring = true\n\t\n\t-- Tween in clouds and lower brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(rainClouds, tweenInfo, {Transparency = 0.3}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 0.5}):Play()\nend\n\nfunction FloodService:Start(duration, map)\n\t\t\n\thitParts = {}\n\t\n\t-- Send rain effect to all players\n\tfor _, player in Players:GetPlayers() do\n\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\t\tType = \"Rain\",\n\t\t\t\tToggle = true\n\t\t\t})\n\t\tend\n\tend\n\t\n\t-- Stop bobbling during flood\n\tself:StopBobble()\n\t\n\t-- Play the flood sound\n\tTweenerService:FadeSoundIn(floodSound)\n\tTweenerService:FadeSoundIn(rainSound)\n\t\n\t-- Detect collisions with the water part\n\tself:DetectCollisions(waterPart, map)\n\t\n\t-- Get max height of map\n\tlocal maxWaterHeight = map.MaxWaterHeight.Value\n\t\n\t-- Get random water height\n\tlocal randomHeight = maxWaterHeight - math.random(0, 10)\n\t\n\t-- Move the water part up over time\n\tlocal tweenInfo = TweenInfo.new(duration / 3, Enum.EasingStyle.Linear)\n\tlocal goal = {CFrame = waterPart.CFrame + Vector3.new(0, randomHeight, 0)}\n\n\tTweenService:Create(waterPart, tweenInfo, goal):Play()\n\t\n\t\n\t-- Tween part back down to original position when duration is 2/3 of the duration\n\ttask.delay(duration * (2 / 3), function()\t\t\n\t\tlocal tweenInfo = TweenInfo.new(duration / 3, Enum.EasingStyle.Linear)\n\t\tlocal goal = {CFrame = waterOriginalPos}\n\t\t\n\t\tTweenService:Create(waterPart, tweenInfo, goal):Play()\n\t\t\n\t\ttask.wait(duration / 3)\n\tend)\nend\n\nfunction FloodService:End()\n\tif not floodOccuring then return end\n\t\n\t-- End the flood\n\tfloodOccuring = false\n\tTweenerService:FadeSoundOut(floodSound)\n\tTweenerService:FadeSoundOut(rainSound)\n\t\n\t-- Tween out clouds and reset brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(rainClouds, tweenInfo, {Transparency = 1}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 3}):Play()\n\t\n\t-- Stop the rain effect for all players\n\tfor _, player in Players:GetPlayers() do\n\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\tType = \"Rain\",\n\t\t\tToggle = false\n\t\t})\n\tend\n\t\n\t-- Resume bobbling after flood ends\n\tself:StartBobble()\nend\n\nfunction FloodService:ResetDisaster()\n\tself:End()\nend\n\n\n--------------------------------------------------------------------------------\n-- DAMAGE INTERACTIONS\n--------------------------------------------------------------------------------\n\nfunction FloodService:DetectCollisions(part, map)\n\ttask.spawn(function()\n\t\twhile floodOccuring and part.Parent do\n\t\t\tfor _, hit in ipairs(workspace:GetPartsInPart(part)) do\n\n\t\t\t\tlocal character = hit.Parent\n\t\t\t\tlocal player = Players:GetPlayerFromCharacter(character)\n\t\t\t\tif player then\n\t\t\t\t\tif player and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t\t\t\tif hit.Name ~= \"Head\" then continue end\n\n\t\t\t\t\t\tlocal humanoid = character:FindFirstChild(\"Humanoid\")\n\t\t\t\t\t\tif humanoid and not StateService:GetState(player, StateDefinitions.DAMAGED) then\n\t\t\t\t\t\t\thumanoid.Health -= WATER_DAMAGE\n\t\t\t\t\t\t\tStateService:ChangeState(player, StateDefinitions.DAMAGED, true)\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\n\t\t\t\t\t-- If hit was not a player\n\t\t\t\telse\n\t\t\t\t\tif hit:IsDescendantOf(map.InteractiveParts) then\n\t\t\t\t\t\tif hitParts[hit] then continue end\n\t\t\t\t\t\thitParts[hit] = true\n\n\t\t\t\t\t\t-- small chance to be affected\n\t\t\t\t\t\tif math.random() < DAMAGE_CHANCE then\n\t\t\t\t\t\t\t-- Structural logic\n\t\t\t\t\t\t\tStructureService:Collapse(hit, IMPULSE_COLLISIONS)\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\t\ttask.wait(0.2)\n\t\tend\n\tend)\nend\n\n--------------------------------------------------------------------------------\n-- PASSIVE EVENTS\n--------------------------------------------------------------------------------\n\nfunction FloodService:StartBobble()\n\t-- Don't start if already bobbling\n\tif bobbleConnection then return end\n\n\t-- Store original position if not already stored\n\tif not waterOriginalPos then\n\t\twaterOriginalPos = waterPart.CFrame\n\tend\n\n\tlocal bobbleTime = 0\n\n\tbobbleConnection = game:GetService(\"RunService\").Heartbeat:Connect(function(dt)\n\t\tbobbleTime = bobbleTime + dt\n\n\t\t-- Calculate bobble offset using sine wave\n\t\tlocal bobbleOffset = math.sin(bobbleTime * (math.pi / BOBBLE_SPEED)) * BOBBLE_HEIGHT\n\n\t\t-- Apply bobble to original position\n\t\twaterPart.CFrame = waterOriginalPos + Vector3.new(0, -bobbleOffset, 0)\n\tend)\nend\n\nfunction FloodService:StopBobble()\n\tif bobbleConnection then\n\t\tbobbleConnection:Disconnect()\n\t\tbobbleConnection = nil\n\n\t\t-- Reset to original position\n\t\twaterPart.CFrame = waterOriginalPos\n\tend\nend\n\n\nFloodService:StartBobble()\nreturn FloodService\n"}},"referenceId":"9704"},{"className":"ModuleScript","name":"MeteorStrikeService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/MeteorStrikeService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- METEOR STRIKE SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal Lighting = game:GetService(\"Lighting\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\nlocal SoundType = require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n-- VARIABLES --\nlocal meteorStrikeParts = ServerStorage.Disasters.MeteorStrike\nlocal meteorTint = workspace.World.MeteorTint\nlocal meteorPart = meteorStrikeParts.Meteor\nlocal meteorSound = SoundService.SoundEffects.Disasters.Meteor\nlocal meteorsDropped = {}\nlocal isActive = false\n\n-- CONFIGS --\nlocal IMPULSE_COLLISIONS = true\t\t-- Enable/disable impulse collisions\nlocal METEOR_DELAY = 0.75 \t\t\t-- Delay between meteor parts dropping\n\nlocal MeteorStrikeService = {}\n\n--------------------------------------------------------------------------------\n-- METEOR STRIKE LIFECYCLE\n--------------------------------------------------------------------------------\n\n-- Fade in meteor tint\nfunction MeteorStrikeService:Initialize(map)\n\tisActive = true\n\t\n\t-- Tween in clouds and lower brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(meteorTint, tweenInfo, {Transparency = 0.3}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = .5}):Play()\nend\n\nfunction MeteorStrikeService:Start(duration, map)\n\t\n\tmeteorsDropped = {}\n\tlocal meteorCount = math.random(8, 12)\n\t\n\t-- Spawn meteors\n\ttask.spawn(function()\n\t\tfor i = 1, meteorCount do\n\t\t\tif not isActive then break end\n\t\t\t\n\t\t\tself:DropMeteorPart(duration, map)\n\t\t\ttask.wait(METEOR_DELAY)\n\t\tend\n\tend)\nend\n\nfunction MeteorStrikeService:End()\n\tif not isActive then return end\n\t\n\t-- End the meteor strike\n\tisActive = false\n\t\n\t-- Tween out tint and reset brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(meteorTint, tweenInfo, {Transparency = 1}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 3}):Play()\n\n\t-- Ensure all meteor parts are gone\n\tfor _, meteorPart in ipairs(meteorsDropped) do\n\t\tif meteorPart then\n\t\t\tmeteorPart:Destroy()\n\t\tend\n\tend\nend\n\nfunction MeteorStrikeService:ResetDisaster()\n\tself:End()\nend\n\n\n--------------------------------------------------------------------------------\n-- METEOR BEHAVIORS\n--------------------------------------------------------------------------------\n\nfunction MeteorStrikeService:DropMeteorPart(duration, map)\n\n\t-- Get the primary part of the map\n\tlocal mapBase = map:FindFirstChild(\"Base\")\n\tlocal primaryPart = mapBase.PrimaryPart\n\tif not primaryPart then\n\t\twarn(\"No primary part found for map\")\n\t\treturn\n\tend\n\t\n\tlocal rng = Random.new()\n\t\n\t-- Get a random position on the map and set spawn position\n\tlocal basePart = mapBase.PrimaryPart\n\tlocal basePosition = basePart.Position\n\tlocal baseSize = basePart.Size\n\n\tlocal spawnPosition = Vector3.new(\n\t\tbasePosition.X + rng:NextNumber(-baseSize.X / 2, baseSize.X / 2),\n\t\t350,\n\t\tbasePosition.Z + rng:NextNumber(-baseSize.Z / 2, baseSize.Z / 2)\n\t)\n\n\t-- Clone the meteor part\n\tlocal meteorClone = meteorPart:Clone()\n\ttable.insert(meteorsDropped, meteorClone)\n\n\t-- Scale the meteor part random amount\n\tlocal randomScale = rng:NextNumber(0.5, 1.5)\n\tmeteorClone.Size = meteorClone.Size * randomScale\n\n\tmeteorClone.Parent = workspace\n\n\t-- Play meteor sound\n\tlocal soundClone = meteorSound:Clone()\n\tsoundClone.Parent = meteorClone\n\tsoundClone:Play()\n\n\t-- Detect collisions with the meteor part\n\tself:DetectCollisions(meteorClone, map)\n\n\t-- Drop the meteor part from above the map\n\tlocal meteorCFrame = CFrame.new(spawnPosition)\n\tmeteorClone.CFrame = meteorCFrame\n\tmeteorClone.AssemblyLinearVelocity = Vector3.new(0, -150, 0) -- fall down\n\tmeteorClone.Parent = workspace\nend\n\n\n--------------------------------------------------------------------------------\n-- DAMAGE INTERACTIONS\n--------------------------------------------------------------------------------\n\nfunction MeteorStrikeService:DetectCollisions(part, map)\n\t-- Detect collisions with the meteor part\n\tpart.Touched:Connect(function(hit)\n\t\tlocal character = hit:FindFirstAncestorOfClass(\"Model\")\n\t\tif character then\n\t\t\t-- Check if meteor touched player\n\t\t\tlocal player = Players:GetPlayerFromCharacter(character)\n\t\t\tif player then\n\t\t\t\tlocal humanoid = character:FindFirstChild(\"Humanoid\")\n\t\t\t\tif humanoid then\n\t\t\t\t\thumanoid.Health = 0\n\t\t\t\tend\n\n\t\t\t\t-- Check if meteor touched interactable map parts\n\t\t\telse\n\t\t\t\tif hit:IsDescendantOf(map.InteractiveParts) then\n\t\t\t\t\t-- Structural logic\n\t\t\t\t\tStructureService:Collapse(hit, IMPULSE_COLLISIONS)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend)\nend\n\nreturn MeteorStrikeService\n"}},"referenceId":"9705"},{"className":"ModuleScript","name":"PlagueService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/PlagueService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- PLAGUE SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal SoundService = game:GetService(\"SoundService\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal AnimationService = require(ReplicatedStorage.Shared.Modules.Services.Animations.AnimationService)\nlocal AnimationDefinitions = require(ReplicatedStorage.Shared.Modules.Services.Animations.AnimationDefinitions)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal RaycastService = require(game.ServerScriptService.Server.Services.Game.RaycastService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\nlocal SoundType = require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n-- CONFIGS --\nlocal INFECTION_DELAY = 2\nlocal INFECTION_DAMAGE = 25\nlocal INFECTION_DAMAGE_DELAY = 3\nlocal INFECTION_DISTANCE = 8\nlocal plagueInProgress = false\n\nlocal RaycastParams = RaycastParams.new()\nRaycastParams.FilterType = Enum.RaycastFilterType.Exclude\n\nlocal PlagueService = {}\n\n\n--------------------------------------------------------------------------------\n-- PLAGUE LIFECYCLE\n--------------------------------------------------------------------------------\n\nfunction PlagueService:Start(duration, map)\n\tif plagueInProgress then\n\t\treturn\n\tend\n\t\t\n\tplagueInProgress = true\n\t\n\t-- Start the plague\n\tlocal playersInGame = {}\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\ttable.insert(playersInGame, player)\n\t\tend\n\tend\n\t\n\tif #playersInGame == 0 then\n\t\tplagueInProgress = false\n\t\treturn\n\tend\n\t\n\tlocal randomPlayer = playersInGame[math.random(1, #playersInGame)]\n\tif randomPlayer then\n\t\ttask.spawn(function()\n\t\t\tself:InfectPlayers(randomPlayer, playersInGame)\n\t\tend)\n\tend\nend\n\nfunction PlagueService:End()\n\tif not plagueInProgress then return end\n\t\n\t-- End the plague\n\tplagueInProgress = false\nend\n\nfunction PlagueService:ResetDisaster()\n\tself:End()\nend\n\n\n--------------------------------------------------------------------------------\n-- PLAGUE BEHAVIORS\n--------------------------------------------------------------------------------\n\nfunction PlagueService:InfectPlayers(startingPlayer, playersInGame)\n\tlocal infected = {startingPlayer}\n\tStateService:ChangeState(startingPlayer, StateDefinitions.INFECTED, true)\n\n\ttask.spawn(function()\n\t\tself:DamageInfected(playersInGame)\n\tend)\n\n\t-- Infect players\n\twhile plagueInProgress do\n\t\tlocal newlyInfected = {}\n\n\t\tfor _, player in infected do\n\t\t\tfor _, otherPlayer in ipairs(playersInGame) do\n\t\t\t\tif otherPlayer ~= player and not StateService:GetState(otherPlayer, StateDefinitions.INFECTED) then\n\t\t\t\t\tif player.Character and otherPlayer.Character and player.Character:FindFirstChild(\"Humanoid\") and otherPlayer.Character:FindFirstChild(\"Humanoid\") then\n\t\t\t\t\t\tlocal distance = (player.Character.HumanoidRootPart.Position - otherPlayer.Character.HumanoidRootPart.Position).Magnitude\n\t\t\t\t\t\tif distance < INFECTION_DISTANCE and RaycastService:HasLineOfSight(player.Character, otherPlayer.Character) then\n\t\t\t\t\t\t\tprint(otherPlayer.Name .. \" has been infected!\")\n\t\t\t\t\t\t\tStateService:ChangeState(otherPlayer, StateDefinitions.INFECTED, true)\n\t\t\t\t\t\t\ttable.insert(newlyInfected, otherPlayer)\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\n\t\tfor _, player in ipairs(newlyInfected) do\n\t\t\ttable.insert(infected, player)\n\t\tend\n\n\t\ttask.wait(INFECTION_DELAY)\n\tend\nend\n\n\n--------------------------------------------------------------------------------\n-- PLAYER INTERACTIONS\n--------------------------------------------------------------------------------\n\nfunction PlagueService:DamageInfected(playersInGame)\n\twhile plagueInProgress do\n\t\tfor _, player in playersInGame do\n\t\t\tif player.Character and player.Character:FindFirstChild(\"Humanoid\") and StateService:GetState(player, StateDefinitions.INFECTED) then\n\t\t\t\tAnimationService:PlayAnimation(player, AnimationDefinitions.Cough)\n\t\t\t\tplayer.Character.Humanoid:TakeDamage(INFECTION_DAMAGE)\n\n\t\t\t\t-- Play sound\n\t\t\t\tlocal sounds = SoundType.Cough\n\t\t\t\tlocal sound = sounds[math.random(1, #sounds)]:Clone()\n\t\t\t\tsound.Parent = player.Character\n\t\t\t\tsound:Play()\n\t\t\t\ttask.delay(sound.TimeLength, function()\n\t\t\t\t\tsound:Destroy()\n\t\t\t\tend)\n\t\t\tend\n\t\tend\n\n\t\ttask.wait(INFECTION_DAMAGE_DELAY)\n\tend\nend\n\n\nreturn PlagueService\n"}},"referenceId":"9706"},{"className":"ModuleScript","name":"FireService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/FireService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":" ----------------------------------------\n-- FIRE SERVICE MODULE SCRIPT \n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal CollectionService = game:GetService(\"CollectionService\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\n\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\nlocal SoundType = require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n-- VARIABLES --\nlocal fireActive = false\nlocal currentMap = nil\n\nlocal fireInstance = ServerStorage.Disasters.Fire.Fire\t\nlocal fireSoundPart = ServerStorage.Disasters.Fire.FireSoundPart\nlocal fireSound = SoundService.SoundEffects.Disasters.Fire\n\n-- CONFIGS --\nlocal UPDATE_INTERVAL = 1.5\t\t\t\t\nlocal DAMAGE_INTERVAL = 1.5\t\t\t\t\nlocal FIRE_DAMAGE = 10\t\t\t\t\t\nlocal SPREAD_RADIUS = 4\t\t\t\t\t\nlocal SOUND_UPDATE_INTERVAL = 0.5\t\t\nlocal IMPULSE_COLLISIONS = false\t\n\n-- Fire clustering settings\nlocal FIRE_CLUSTER_SIZE = 25\t\t\t\nlocal FIRE_UPDATE_INTERVAL = 1\t\t\t\nlocal CLUSTER_RADIUS = 20\t\t\t\t\n\n\nlocal FireService = {}\n\n--------------------------------------------------------------------------------\n-- FIRE LIFECYCLE\n--------------------------------------------------------------------------------\n\nfunction FireService:Start(duration, map)\n\tfireActive = true\n\tcurrentMap = map\n\tself.ActiveFires = {}\n\tself.FireClusters = {}\n\tself.FirePartsFolder = Instance.new(\"Folder\")\n\tself.FirePartsFolder.Name = \"FireEffects\"\n\tself.FirePartsFolder.Parent = map\n\n\tlocal parts = {}\n\tfor _, part in ipairs(map.InteractiveParts:GetDescendants()) do\n\t\tif part:IsA(\"BasePart\") then\n\t\t\ttable.insert(parts, part)\n\t\tend\n\tend\n\n\t-- Cleanup existing fire sound\n\tlocal existingSoundPart = map:FindFirstChild(\"FireSoundPart\")\n\tif existingSoundPart then\n\t\texistingSoundPart:Destroy()\n\tend\n\n\t-- Clone fire sound\n\tlocal fireSoundPartClone = fireSoundPart:Clone()\n\tfireSoundPartClone.Parent = map\n\n\tlocal fireSoundClone = fireSound:Clone()\n\tfireSoundClone.Parent = fireSoundPartClone\n\tfireSoundClone:Play()\n\n\t-- Select random part\n\tlocal randomPart = parts[math.random(1, #parts)]\n\n\t-- Start fire\n\tself:Ignite(randomPart)\n\n\t-- Core fire loop\n\ttask.spawn(function()\n\t\twhile fireActive do\n\t\t\ttask.wait(UPDATE_INTERVAL)\n\t\t\tFireService:Update(UPDATE_INTERVAL)\n\t\tend\n\tend)\n\n\t-- Player damage loop\n\ttask.spawn(function()\n\t\twhile fireActive do\n\t\t\ttask.wait(DAMAGE_INTERVAL)\n\t\t\tself:DamagePlayers()\n\t\tend\n\tend)\n\n\t-- Update fire sound and visual effects\n\ttask.spawn(function()\n\t\twhile fireActive do\n\t\t\tself:UpdateFireSound(fireSoundClone, fireSoundPartClone)\n\n\t\t\tself:UpdateFireClusters()\n\n\t\t\ttask.wait(FIRE_UPDATE_INTERVAL)\n\t\tend\n\tend)\nend\n\nfunction FireService:End()\n\tif not fireActive or not currentMap then return end\n\n\tself:ExtinguishAll()\n\n\tif currentMap:FindFirstChild(\"FireSoundPart\") then\n\t\tcurrentMap.FireSoundPart:Destroy()\n\tend\n\n\tif self.FirePartsFolder then\n\t\tself.FirePartsFolder:Destroy()\n\tend\n\n\tself.FireClusters = {}\n\tfireActive = false\n\tcurrentMap = nil\nend\n\nfunction FireService:ResetDisaster()\n\tself:End()\n\n\tself.ActiveFires = {}\nend\n\n\n--------------------------------------------------------------------------------\n-- FIRE BEHAVIORS\n--------------------------------------------------------------------------------\n\nfunction FireService:Ignite(part)\n\tif not currentMap or not fireActive then return end\n\tif not part or not part:IsA(\"BasePart\") or CollectionService:HasTag(part, \"Burning\") then return end\n\n\tCollectionService:AddTag(part, \"Burning\")\n\n\tpart.Color = Color3.fromRGB(47, 47, 47)\n\tpart.Material = Enum.Material.Basalt\n\n\tself.ActiveFires[part] = {\n\t\tPart = part,\n\t\tUnanchorCooldown = math.random(1, 3),\n\t\tUnanchored = false,\n\t\tTimeLeft = math.random(8, 12),\n\t\tSpreadCooldown = 0\n\t}\nend\n\n-- In FireService, replace the Update function:\n\nfunction FireService:Update(dt)\n\tif not currentMap or not fireActive then return end\n\n\tlocal partsToCollapse = {}  -- Batch collapse operations\n\n\tfor part, data in pairs(self.ActiveFires) do\n\t\tif not part or not part.Parent then\n\t\t\tself.ActiveFires[part] = nil\n\t\t\tcontinue\n\t\tend\n\n\t\t-- Burn timer\n\t\tdata.TimeLeft -= dt\n\t\tif data.TimeLeft <= 0 then\n\t\t\tself:Extinguish(part)\n\t\t\tcontinue\n\t\tend\n\n\t\t-- Unanchor\n\t\tdata.UnanchorCooldown -= dt\n\t\tif not data.Unanchored and data.UnanchorCooldown <= 0 then\n\t\t\ttable.insert(partsToCollapse, part)\n\t\t\tdata.Unanchored = true\n\t\tend\n\n\t\t-- Spread\n\t\tdata.SpreadCooldown -= dt\n\t\tif data.SpreadCooldown <= 0 then\n\t\t\tself:TrySpread(part)\n\t\t\tdata.SpreadCooldown = math.random(1, 3)\n\t\tend\n\tend\n\n\t-- Collapse all parts at once\n\tif #partsToCollapse > 0 then\n\t\tfor _, part in ipairs(partsToCollapse) do\n\t\t\tStructureService:Collapse(part, IMPULSE_COLLISIONS)\n\t\tend\n\t\t--StructureService:BatchCollapse(partsToCollapse, IMPULSE_COLLISIONS)\n\tend\nend\n\nfunction FireService:TrySpread(part)\n\tif not currentMap or not fireActive then return end\n\tif not part or not part.Parent then return end\n\n\n\tlocal params = OverlapParams.new()\n\tparams.FilterType = Enum.RaycastFilterType.Exclude\n\tparams.FilterDescendantsInstances = { part }\n\n\tlocal boxSize = part.Size + Vector3.new(SPREAD_RADIUS, SPREAD_RADIUS, SPREAD_RADIUS)\n\tlocal nearby = workspace:GetPartBoundsInBox(part.CFrame, boxSize, params)\n\n\tlocal spreadChance = (3 / math.max(1, #nearby))\n\tlocal maxSpreadParts = math.floor(#nearby / 1.5)\n\n\tlocal partsSpread = 0\n\tfor _, hit in ipairs(nearby) do\n\t\tif currentMap and not hit:IsDescendantOf(currentMap.InteractiveParts) then continue end\n\t\tif math.random() < spreadChance then\n\t\t\tpartsSpread += 1\n\t\t\tself:Ignite(hit)\n\t\t\tif partsSpread >= maxSpreadParts then break end\n\t\tend\n\tend\nend\n\nfunction FireService:UpdateFireClusters()\n\tif not currentMap or not fireActive then return end\n\n\t-- Collect all active fire positions\n\tlocal firePositions = {}\n\tfor part in pairs(self.ActiveFires) do\n\t\tif part and part.Parent then\n\t\t\ttable.insert(firePositions, part.Position)\n\t\tend\n\tend\n\n\tif #firePositions == 0 then\n\t\tfor _, cluster in ipairs(self.FireClusters) do\n\t\t\tif cluster.Part then\n\t\t\t\tcluster.Part.Transparency = 1\n\t\t\t\tlocal fire = cluster.Part:FindFirstChildOfClass(\"Fire\")\n\t\t\t\tif fire then fire.Enabled = false end\n\t\t\tend\n\t\tend\n\t\treturn\n\tend\n\n\t-- Group fires into clusters\n\tlocal clusterGroups = self:ClusterPositions(firePositions, FIRE_CLUSTER_SIZE)\n\n\t-- Reuse existing clusters or create new ones\n\tfor i, clusterPositions in ipairs(clusterGroups) do\n\t\t-- Calculate center of cluster\n\t\tlocal sum = Vector3.zero\n\t\tfor _, pos in ipairs(clusterPositions) do\n\t\t\tsum += pos\n\t\tend\n\t\tlocal center = sum / #clusterPositions\n\n\t\t-- Get or create cluster\n\t\tlocal cluster = self.FireClusters[i]\n\t\tif not cluster or not cluster.Part or not cluster.Part.Parent then\n\t\t\t-- Create new cluster\n\t\t\tlocal firePart = Instance.new(\"Part\")\n\t\t\tfirePart.Name = \"FireCluster\"\n\t\t\tfirePart.Size = Vector3.new(4, 4, 4)\n\t\t\tfirePart.Position = center\n\t\t\tfirePart.Anchored = true\n\t\t\tfirePart.CanCollide = false\n\t\t\tfirePart.Transparency = 1\n\t\t\tfirePart.Parent = self.FirePartsFolder\n\n\t\t\tlocal fire = fireInstance:Clone()\n\t\t\tfire.Parent = firePart\n\n\t\t\tcluster = {\n\t\t\t\tPart = firePart,\n\t\t\t\tFire = fire\n\t\t\t}\n\t\t\tself.FireClusters[i] = cluster\n\t\tend\n\n\t\t-- Update existing cluster\n\t\tcluster.Part.Position = center\n\t\tcluster.Part.Transparency = 1\n\n\t\t-- Update fire properties\n\t\tlocal fireSize = math.clamp(#clusterPositions * 1.5, 5, 25)\n\t\tlocal fireHeat = math.clamp(#clusterPositions * 0.8, 5, 25)\n\n\t\tcluster.Fire.Size = fireSize\n\t\tcluster.Fire.Heat = fireHeat\n\t\tcluster.Fire.Enabled = true\n\tend\n\n\t-- Hide unused clusters\n\tfor i = #clusterGroups + 1, #self.FireClusters do\n\t\tlocal cluster = self.FireClusters[i]\n\t\tif cluster and cluster.Part then\n\t\t\tcluster.Part.Transparency = 1\n\t\t\tif cluster.Fire then\n\t\t\t\tcluster.Fire.Enabled = false\n\t\t\tend\n\t\tend\n\tend\nend\n\nfunction FireService:ClusterPositions(positions, maxPerCluster)\n\tif #positions == 0 then return {} end\n\n\tlocal clusters = {}\n\tlocal used = {}\n\n\tfor i, pos in ipairs(positions) do\n\t\tif used[i] then continue end\n\n\t\tlocal cluster = {pos}\n\t\tused[i] = true\n\n\t\t-- Find nearby positions\n\t\tfor j, otherPos in ipairs(positions) do\n\t\t\tif not used[j] and #cluster < maxPerCluster then\n\t\t\t\tlocal distance = (pos - otherPos).Magnitude\n\t\t\t\tif distance < CLUSTER_RADIUS then\n\t\t\t\t\ttable.insert(cluster, otherPos)\n\t\t\t\t\tused[j] = true\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\n\t\ttable.insert(clusters, cluster)\n\tend\n\n\treturn clusters\nend\n\nfunction FireService:Extinguish(part)\n\tCollectionService:RemoveTag(part, \"Burning\")\n\tpart.Color = Color3.fromRGB(97, 96, 98)\n\tpart.Material = Enum.Material.Slate\n\tself.ActiveFires[part] = nil\nend\n\nfunction FireService:UpdateFireSound(sound, parentPart)\n\tif not currentMap or not fireActive then return end\n\tif not sound or not parentPart then return end\n\n\tlocal count = 0\n\tlocal sum = Vector3.zero\n\n\tfor part in pairs(self.ActiveFires) do\n\t\tif part and part.Parent then\n\t\t\tsum += part.Position\n\t\t\tcount += 1\n\t\tend\n\tend\n\n\tif count == 0 then\n\t\tsound.Volume = 0\n\t\treturn\n\tend\n\n\tlocal avgPos = sum / count\n\tparentPart.Position = avgPos\n\tsound.Volume = math.clamp(count / 15, 0.1, 0.5)\nend\n\nfunction FireService:ExtinguishAll()\n\tfor part in pairs(self.ActiveFires) do\n\t\tself:Extinguish(part)\n\tend\n\tself.ActiveFires = {}\n\n\tfor _, cluster in ipairs(self.FireClusters) do\n\t\tif cluster.Part then\n\t\t\tcluster.Part.Transparency = 1\n\t\t\tif cluster.Fire then\n\t\t\t\tcluster.Fire.Enabled = false\n\t\t\tend\n\t\tend\n\tend\nend\n\n-- Get fire count (for debugging)\nfunction FireService:GetFireCount()\n\tlocal count = 0\n\tfor _ in pairs(self.ActiveFires) do\n\t\tcount += 1\n\tend\n\treturn count\nend\n\n\n--------------------------------------------------------------------------------\n-- PLAYER INTERACTIONS\n--------------------------------------------------------------------------------\n\nfunction FireService:DamagePlayers()\n\tif not currentMap or not fireActive then return end\n\n\tfor part in pairs(self.ActiveFires) do\n\t\tlocal parts = workspace:GetPartsInPart(part)\n\t\tfor _, hit in ipairs(parts) do\n\t\t\tif hit.Parent and hit.Parent:FindFirstChild(\"Humanoid\") then\n\t\t\t\tlocal humanoid = hit.Parent:FindFirstChild(\"Humanoid\")\n\t\t\t\tif humanoid then\n\t\t\t\t\thumanoid:TakeDamage(FIRE_DAMAGE)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\nreturn FireService"}},"referenceId":"9707"},{"attributes":{"_rbxsync_source":{"type":"string","value":"ServerScriptService/Server/Services/Disasters/AcidRainService"}},"className":"ModuleScript","name":"AcidRainService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/AcidRainService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- ACID RAIN SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal CollectionService = game:GetService(\"CollectionService\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal Lighting = game:GetService(\"Lighting\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\nlocal RaycastService = require(game.ServerScriptService.Server.Services.Game.RaycastService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\nlocal SoundType = require(ReplicatedStorage.Shared.Modules.Enums.SoundType)\n\n-- VARIABLES --\nlocal AcidRainService = {}\nlocal acidClouds = workspace.World.AcidClouds\nlocal rainSound = SoundService.SoundEffects.Disasters.Rain\nlocal isActive = false\nlocal currentMap = nil\t\t\t\nlocal acidRainThreads = {}\n\n-- Cache raycast params once\nlocal params = RaycastParams.new()\nparams.FilterType = Enum.RaycastFilterType.Exclude\n\n-- CONFIGS --\nlocal DAMAGE_CHANCE = .15 \t\t\t\t-- Chance to deal damage to part\nlocal INFECTED_DAMAGE_CHANCE = .35\t\t-- Chance to deal damage to infected part\nlocal IMPULSE_COLLISIONS = true\t\t\t-- Enable/disable impulse collisions\nlocal UPDATE_INTERVAL = 2\t\t\t\t-- Seconds between each acid update\nlocal DAMAGE_INTERVAL = 2.5\t\t\t\t-- How long game checks between damaging players\nlocal ACID_DAMAGE = 20 \t\t\t\t\t-- Damage dealt to part\nlocal IMPULSE_COLLISIONS = true\t\t\t-- Enable/disable impulse collisions\n\n\n--------------------------------------------------------------------------------\n-- ACID RAIN LIFECYCLE\n--------------------------------------------------------------------------------\n\n-- Fade in acid clouds\nfunction AcidRainService:Initialize(map)\n\tif isActive then return end\n\tisActive = true\n\tcurrentMap = map\n\n\t-- Tween in clouds and lower brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(acidClouds, tweenInfo, {Transparency = 0.1}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 0.5}):Play()\n\t\n\t-- Cancel any previous threads\n\tfor _, thread in acidRainThreads do\n\t\ttask.cancel(thread)\n\tend\nend\n\n\nfunction AcidRainService:Start(duration, map)\n\tif not isActive then return end\n\t\n\t-- Init active rain parts table if it doesn't exist\n\tif not self.ActiveAcidRainParts then\n\t\tself.ActiveAcidRainParts = {}\n\tend\n\t\n\t-- Fade in rain sound\n\tTweenerService:FadeSoundIn(rainSound)\n\t\n\t-- Setup raycast params\n\tlocal ignoreList = {}\n\t-- Send acid rain effect to all players\n\tfor _, player in Players:GetPlayers() do\n\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\t\tType = \"AcidRain\",\n\t\t\t\tToggle = true\n\t\t\t})\n\t\tend\n\t\t\n\t\tif player.Character then\n\t\t\t-- Add to param filter\n\t\t\ttable.insert(ignoreList, player.Character)\n\t\tend\n\t\t\n\tend\n\t\n\tparams.FilterDescendantsInstances = { ignoreList }\n\t\n\t-- Get external parts\n\tlocal externalParts = RaycastService:GetExternalParts(currentMap, params)\n\tif not externalParts then return end\n\t\n\tlocal thread1 = task.spawn(function()\n\t\twhile isActive do\n\t\t\ttask.wait(UPDATE_INTERVAL)\n\t\t\tself:HitExternalParts(externalParts)\n\t\t\tself:UpdateAcidRainParts(UPDATE_INTERVAL)\n\t\tend\n\tend)\n\t\n\tlocal thread2 = task.spawn(function()\n\t\twhile isActive do\n\t\t\ttask.wait(DAMAGE_INTERVAL)\n\t\t\tself:DamageOutsidePlayers()\n\t\tend\n\tend)\n\t\n\ttable.insert(acidRainThreads, thread1)\n\ttable.insert(acidRainThreads, thread2)\nend\n\n\nfunction AcidRainService:End()\n\tif not isActive then return end\n\tisActive = false\n\tcurrentMap = nil\n\t\n\t-- Fade out rain sound\n\tTweenerService:FadeSoundOut(rainSound)\n\t\n\t-- Tween out clouds and reset brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(acidClouds, tweenInfo, {Transparency = 1}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 3}):Play()\n\n\t-- Stop the acid rain effect for all players\n\tfor _, player in Players:GetPlayers() do\n\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\tType = \"AcidRain\",\n\t\t\tToggle = false\n\t\t})\n\tend\nend\n\n-- Reset stored acid rain parts for that round\nfunction AcidRainService:ResetDisaster()\n\tself:End()\n\tself.ActiveAcidRainParts = {}\nend\n\n\n--------------------------------------------------------------------------------\n-- DAMAGE INTERACTIONS\n--------------------------------------------------------------------------------\n\n-- Each round randomly damage parts around the map\nfunction AcidRainService:HitExternalParts(externalParts)\n\tif not currentMap or not isActive then return end\n\n\t-- Randomly damage parts\n\tfor _, part in externalParts do\n\t\tif CollectionService:HasTag(part, \"Acid\") then\n\t\t\tif math.random() < INFECTED_DAMAGE_CHANCE then\n\t\t\t\tif self.ActiveAcidRainParts[part] then\n\t\t\t\t\tself.ActiveAcidRainParts[part].Stage += 1\n\t\t\t\tend\n\t\t\tend\n\t\telse\n\t\t\tif math.random() < DAMAGE_CHANCE then\n\t\t\t\tCollectionService:AddTag(part, \"Acid\")\n\t\t\t\tself.ActiveAcidRainParts[part] = {\n\t\t\t\t\tPart = part,\n\t\t\t\t\tStage = 1,\n\t\t\t\t\tUnanchored = false,\n\t\t\t\t}\n\t\t\tend\n\t\tend\n\tend\nend\n\nfunction AcidRainService:UpdateAcidRainParts(dt)\n\tif not currentMap or not isActive then return end\n\n\tfor part, data in pairs(self.ActiveAcidRainParts) do\n\t\tif not part or not part.Parent then\n\t\t\tself.ActiveAcidRainParts[part] = nil\n\t\t\tcontinue\n\t\tend\n\n\t\t-- Change part color\n\t\tif data.Stage == 1 then\n\t\t\tpart.Color = Color3.fromRGB(180, 203, 137)\n\t\t\tpart.Material = Enum.Material.Salt\n\n\t\t\t-- Change part color\n\t\telseif data.Stage == 2 then\n\t\t\tpart.Color = Color3.fromRGB(179, 203, 91)\n\t\t\tpart.Material = Enum.Material.Salt\n\n\t\t\t-- Unanchor part\n\t\telseif data.Stage == 3 then\n\t\t\tpart:Destroy()\n\t\t\tself.ActiveAcidRainParts[part] = nil\n\t\t\t\n\t\t\t--if not data.Unanchored then\n\t\t\t--\tpart.Color = Color3.fromRGB(127, 144, 18)\n\t\t\t--\tpart.Material = Enum.Material.Salt\n\n\t\t\t--\t-- Structural logic\n\t\t\t--\tStructureService:Collapse(part, IMPULSE_COLLISIONS)\n\t\t\t--\tdata.Unanchored = true\n\t\t\t--end\n\t\tend\n\tend\nend\n\nfunction AcidRainService:DamageOutsidePlayers()\n\tif not currentMap or not isActive then return end\n\n\t-- Raycast player to ceiling\n\tfor _, player in Players:GetPlayers() do\n\t\tif player and player.Character and player.Character:FindFirstChild(\"Humanoid\") and player.Character.Humanoid.Health > 0 then\n\t\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t\tlocal char = player.Character\n\t\t\t\tlocal root = char:FindFirstChild(\"HumanoidRootPart\")\n\t\t\t\tif not root then continue end\n\n\t\t\t\t-- Check if player is outside\n\t\t\t\tlocal ceilingHit = workspace:Raycast(root.Position, Vector3.new(0, 100, 0), params)\n\t\t\t\tif ceilingHit == nil then\n\t\t\t\t\tlocal humanoid = char:FindFirstChild(\"Humanoid\")\n\t\t\t\t\tif humanoid then\n\t\t\t\t\t\thumanoid:TakeDamage(ACID_DAMAGE)\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\n\nreturn AcidRainService\n"}},"referenceId":"9708"},{"attributes":{"_rbxsync_source":{"type":"string","value":"ServerScriptService/Server/Services/Disasters/TsunamiService"}},"className":"ModuleScript","name":"TsunamiService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/TsunamiService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- TSUNAMI SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal Lighting = game:GetService(\"Lighting\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- VARIABLES --\nlocal TsunamiService = {}\nlocal isActive = false\nlocal tsunamiModel = ServerStorage.Disasters.Tsunami.TsunamiWave\nlocal tsunamiSound = SoundService.SoundEffects.Disasters.Tsunami\nlocal currentTsunami = nil\nlocal hitParts = {}\n\n-- CONFIG --\nlocal SPAWN_DISTANCE = 300\t\t\t\t-- Distance from map center to spawn tsunami\nlocal TRAVEL_SPEED = 50\t\t\t\t\t-- Studs per second\nlocal DAMAGE_CHANCE = 0.6 \t\t\t\t-- Chance to damage parts\nlocal IMPULSE_COLLISIONS = true\t\t\t-- Enable/disable impulse collisions\nlocal TSUNAMI_DAMAGE = 50\t\t\t\t-- Damage dealt to players\n\n\n--------------------------------------------------------------------------------\n-- TSUNAMI LIFECYCLE\n--------------------------------------------------------------------------------\n\nfunction TsunamiService:Start(duration, map)\n\tif isActive or not map then return end\n\tisActive = true\n\thitParts = {}\n\n\t-- Get map center and size\n\tlocal mapCFrame, mapSize = map.Base:GetBoundingBox()\n\tlocal mapCenter = mapCFrame.Position\n\n\t-- Get original Y position from the model in ServerStorage\n\tlocal originalY = tsunamiModel:GetPivot().Position.Y\n\n\t-- Choose random angle (0-360 degrees)\n\tlocal angle = math.rad(math.random(0, 360))\n\n\t-- Calculate spawn position at fixed distance from center (preserve Y)\n\tlocal spawnOffset = Vector3.new(math.cos(angle) * SPAWN_DISTANCE, 0, math.sin(angle) * SPAWN_DISTANCE)\n\tlocal spawnPosition = Vector3.new(mapCenter.X + spawnOffset.X, originalY, mapCenter.Z + spawnOffset.Z)\n\n\t-- Calculate direction toward map center (only X and Z, ignore Y)\n\tlocal targetPosition = Vector3.new(mapCenter.X, originalY, mapCenter.Z)\n\tlocal direction = (targetPosition - spawnPosition).Unit\n\n\t-- Create lookAt CFrame that maintains Y position\n\tlocal lookAtCFrame = CFrame.new(spawnPosition, targetPosition)\n\n\t-- Clone and position tsunami\n\tcurrentTsunami = tsunamiModel:Clone()\n\tcurrentTsunami:PivotTo(lookAtCFrame)\n\n\t-- Randomly scale tsunami\n\tlocal rng = Random.new()\n\tlocal randomScale = rng:NextNumber(0.75, 1.25)\n\tcurrentTsunami:ScaleTo(randomScale)\n\tcurrentTsunami.Parent = workspace\n\t\n\tlocal tsunamiSound:Sound = tsunamiSound:Clone()\n\ttsunamiSound.Parent = currentTsunami.PrimaryPart\n\ttsunamiSound:Play()\n\n\t-- Start collision detection\n\tfor _, part in ipairs(currentTsunami:GetDescendants()) do\n\t\tif part:IsA(\"BasePart\") then\n\t\t\tself:DetectCollisions(part, map)\n\t\tend\n\tend\n\n\t-- Calculate travel distance (to map center + extra to cover whole map)\n\tlocal travelDistance = SPAWN_DISTANCE + (mapSize.Magnitude / 2) + 250\n\tlocal travelTime = travelDistance / TRAVEL_SPEED\n\n\t-- Get the part to tween (PrimaryPart or first BasePart)\n\tlocal partToTween = currentTsunami.PrimaryPart\n\n\t-- Calculate end position (same Y level, moving in forward direction)\n\tlocal endPosition = spawnPosition + (direction * travelDistance)\n\n\t-- Keep the same rotation, only change position\n\tlocal startCFrame = partToTween.CFrame\n\tlocal endCFrame = startCFrame - startCFrame.Position + endPosition\n\n\tlocal tweenInfo = TweenInfo.new(travelTime, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, 0, false, 0)\n\tlocal tween = TweenService:Create(partToTween, tweenInfo, {CFrame = endCFrame}):Play()\nend\n\nfunction TsunamiService:End()\n\tif not isActive then return end\n\n\tisActive = false\n\n\t-- Cleanup tsunami\n\tif currentTsunami then\n\t\tcurrentTsunami:Destroy()\n\t\tcurrentTsunami = nil\n\tend\n\n\thitParts = {}\nend\n\nfunction TsunamiService:ResetDisaster()\n\tself:End()\nend\n\n--------------------------------------------------------------------------------\n-- DAMAGE INTERACTIONS\n--------------------------------------------------------------------------------\n\nfunction TsunamiService:DetectCollisions(part, map)\n\ttask.spawn(function()\n\t\twhile isActive and part.Parent do\n\t\t\tlocal partsInContact = workspace:GetPartsInPart(part)\n\n\t\t\tfor _, hit in ipairs(partsInContact) do\n\t\t\t\t-- Check for players\n\t\t\t\tlocal character = hit.Parent\n\t\t\t\tlocal player = Players:GetPlayerFromCharacter(character)\n\n\t\t\t\tif player then\n\t\t\t\t\t-- Ensure player is in game\n\t\t\t\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t\t\t\t-- Only damage head to avoid multiple hits\n\t\t\t\t\t\tif hit.Name == \"Head\" then\n\t\t\t\t\t\t\tlocal humanoid = character:FindFirstChild(\"Humanoid\")\n\t\t\t\t\t\t\tif humanoid and not StateService:GetState(player, StateDefinitions.DAMAGED) then\n\t\t\t\t\t\t\t\thumanoid.Health -= TSUNAMI_DAMAGE\n\t\t\t\t\t\t\t\tStateService:ChangeState(player, StateDefinitions.DAMAGED, true)\n\t\t\t\t\t\t\tend\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\t\t\t\t\t-- Check for structures\n\t\t\t\telseif hit:IsDescendantOf(map.InteractiveParts) then\n\t\t\t\t\t-- Skip if already hit this part\n\t\t\t\t\tif hitParts[hit] then continue end\n\n\t\t\t\t\thitParts[hit] = true\n\n\t\t\t\t\t-- Random chance to damage\n\t\t\t\t\tif math.random() < DAMAGE_CHANCE then\n\t\t\t\t\t\tStructureService:Collapse(hit, IMPULSE_COLLISIONS)\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\n\t\t\ttask.wait(0.2)\n\t\tend\n\tend)\nend\n\n\nreturn TsunamiService"}},"referenceId":"9709"},{"className":"ModuleScript","name":"LightningStormService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/LightningStormService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- LIGHTNING STORM SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal Lighting = game:GetService(\"Lighting\")\nlocal Debris = game:GetService(\"Debris\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- VARIABLES --\nlocal LightningStormService = {}\nlocal isActive = false\nlocal currentMap = nil\nlocal activeStrikeThread = nil\nlocal lightningPart = ServerStorage.Disasters.LightningStorm.LightningPart\nlocal soundPart = ServerStorage.Disasters.LightningStorm.SoundPart\nlocal lightningSounds = {\n\tSoundService.SoundEffects.Disasters.Lightning1,\n\tSoundService.SoundEffects.Disasters.Lightning2,\n\tSoundService.SoundEffects.Disasters.Lightning3\n}\nlocal rainClouds = workspace.World.RainClouds\n\n-- CONFIG --\nlocal IMPULSE_COLLISIONS = true\t\t\t-- Enable/disable impulse collisions\nlocal LIGHTNING_HEIGHT = 150\t\t\t-- Height above map to start raycast\nlocal LIGHTNING_RADIUS = 15\t\t\t\t-- Radius of lightning damage\nlocal STRIKE_INTERVAL_MIN = 1\t\t\t-- Min time between strikes\nlocal STRIKE_INTERVAL_MAX = 1.5\t\t\t-- Max time between strikes\nlocal PLAYER_TARGET_CHANCE = 0.25\t\t-- Chance to target a player if available\n\n\n--------------------------------------------------------------------------------\n-- LIGHTNING STORM LIFECYCLE\n--------------------------------------------------------------------------------\n\nfunction LightningStormService:Initialize(map)\n\tif isActive or not map then return end\n\tisActive = true\n\tcurrentMap = map\n\n\t-- Clean up previous strike thread if it exists\n\tif activeStrikeThread then\n\t\ttask.cancel(activeStrikeThread)\n\t\tactiveStrikeThread = nil\n\tend\n\t\n\t-- Tween in clouds and lower brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(rainClouds, tweenInfo, {Transparency = 0.3}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 0.5}):Play()\nend\n\n\nfunction LightningStormService:Start(duration, map)\n\tif not isActive then return end\n\t\n\t-- Send rain effect to all players\n\tfor _, player in Players:GetPlayers() do\n\t\tif StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\t\tType = \"Rain\",\n\t\t\t\tToggle = true\n\t\t\t})\n\t\tend\n\tend\n\t\n\tactiveStrikeThread = task.spawn(function()\n\t\tself:SpawnLightningStrikes()\n\t\tactiveStrikeThread = nil\n\tend)\nend\n\nfunction LightningStormService:End()\n\tif not isActive then return end\n\tisActive = false\n\tcurrentMap = nil\n\t\n\tif activeStrikeThread then\n\t\ttask.cancel(activeStrikeThread)\n\t\tactiveStrikeThread = nil\n\tend\n\t\n\t-- Stop the rain effect for all players\n\tfor _, player in Players:GetPlayers() do\n\t\tNetworkService:SendPostProcessingEffect(player, {\n\t\t\tType = \"Rain\",\n\t\t\tToggle = false\n\t\t})\n\tend\n\t\n\t-- Tween out clouds and raise brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(rainClouds, tweenInfo, {Transparency = 1}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 3}):Play()\nend\n\nfunction LightningStormService:ResetDisaster()\n\tself:End()\nend\n\n\n--------------------------------------------------------------------------------\n-- LIGHTNING EFFECTS\n--------------------------------------------------------------------------------\n\nfunction LightningStormService:SpawnLightningStrikes()\n\tif not isActive or not currentMap or not currentMap.Base then return end\n\n\tlocal base = currentMap.Base\n\tlocal basePart = base.PrimaryPart\n\tlocal basePosition = basePart.Position\n\tlocal baseSize = basePart.Size\n\n\tlocal rng = Random.new()\n\n\twhile isActive do\n\t\tif not currentMap or not currentMap.Base then break end\n\t\t\n\t\tlocal outsidePlayers = self:GetOutsidePlayers()\n\t\tlocal targetPosition = nil\n\n\t\t-- Randomly decide to target a player or random location\n\t\tif #outsidePlayers > 0 and rng:NextNumber(0, 1) < PLAYER_TARGET_CHANCE then\n\t\t\t-- Target a random outside player\n\t\t\tlocal randomPlayer = outsidePlayers[rng:NextInteger(1, #outsidePlayers)]\n\n\t\t\tif randomPlayer and randomPlayer.Character and StateService:GetState(randomPlayer, StateDefinitions.PLAYING) then\n\t\t\t\tlocal humanoid = randomPlayer.Character:FindFirstChild(\"Humanoid\")\n\t\t\t\tif humanoid and humanoid.Health > 0 then\n\t\t\t\t\ttargetPosition = randomPlayer.Character:GetPivot().Position\n\n\t\t\t\t\t-- Kill player\n\t\t\t\t\thumanoid.Health = 0\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\n\t\t-- If no player targeted, strike random location on map\n\t\tif not targetPosition then\n\t\t\t-- Generate random position within base bounds\n\t\t\tlocal randomX = basePosition.X + rng:NextNumber(-baseSize.X / 2, baseSize.X / 2)\n\t\t\tlocal randomZ = basePosition.Z + rng:NextNumber(-baseSize.Z / 2, baseSize.Z / 2)\n\t\t\tlocal rayOrigin = Vector3.new(randomX, basePosition.Y + baseSize.Y + LIGHTNING_HEIGHT, randomZ)\n\n\t\t\t-- Raycast down to find ground\n\t\t\tlocal rayParams = RaycastParams.new()\n\t\t\trayParams.FilterType = Enum.RaycastFilterType.Include\n\t\t\trayParams.FilterDescendantsInstances = {currentMap}\n\n\t\t\tlocal result = workspace:Raycast(rayOrigin, Vector3.new(0, -1000, 0), rayParams)\n\n\t\t\tif result then\n\t\t\t\ttargetPosition = result.Position\n\t\t\tend\n\t\tend\n\n\t\t-- Create lightning at target position\n\t\tif targetPosition then\n\t\t\tself:CreateLightning(targetPosition)\n\t\tend\n\t\n\t\t\n\t\tif isActive then\n\t\t\t-- Wait before next strike\n\t\t\ttask.wait(rng:NextNumber(STRIKE_INTERVAL_MIN, STRIKE_INTERVAL_MAX))\n\t\tend\n\tend\nend\n\n-- Create lightning at position and collapse nearby parts\nfunction LightningStormService:CreateLightning(position)\n\tif not isActive then return end\n\t\n\t-- Get random lightning sound\n\tlocal lightningSound = lightningSounds[math.random(1, #lightningSounds)]\n\tlocal soundClone = lightningSound:Clone()\n\tlocal soundPartClone = soundPart:Clone()\n\tsoundPartClone.Position = position\n\tsoundPartClone.Parent = workspace\n\tsoundClone.Parent = soundPartClone\n\tsoundClone:Play()\n\t\n\t-- Create lightning visual effect\n\tlocal lightningPartClone = lightningPart:Clone()\n\tlightningPartClone.Position = position\n\t\n\t-- Random lightning orientation\n\tfor _, child in pairs(lightningPartClone.Moveable:GetChildren()) do\n\t\tif child:IsA(\"Attachment\") then\n\t\t\t-- Create random offset\n\t\t\tlocal randomOffset = Vector3.new(\n\t\t\t\tmath.random(-10, 10), \n\t\t\t\t0, \n\t\t\t\tmath.random(-10, 10)\n\t\t\t)\n\n\t\t\t-- Apply offset to the attachment's CFrame\n\t\t\tchild.CFrame = child.CFrame * CFrame.new(randomOffset)\n\t\tend\n\tend\n\t\n\t-- Get random orientation\n\tlocal randomRotation = CFrame.Angles(0, math.rad(math.random(-180, 180)), 0)\n\tlightningPartClone.CFrame = CFrame.new(position) * randomRotation\n\t\n\t-- Place strike in world\n\tlightningPartClone.Parent = workspace\n\n\t-- Get parts in radius of strike\n\tlocal partsInRadius = workspace:GetPartBoundsInRadius(position, LIGHTNING_RADIUS)\n\n\t-- Damage structures\n\tfor _, part in ipairs(partsInRadius) do\n\t\tif part:IsDescendantOf(currentMap.InteractiveParts) then\n\t\t\tStructureService:Collapse(part, IMPULSE_COLLISIONS)\n\t\tend\n\tend\n\n\t-- Cleanup visual after short delay\n\tDebris:AddItem(lightningPartClone, 0.25)\n\t\n\t-- Cleanup sound and smoke after it finishes playing\n\ttask.spawn(function()\n\t\tlocal smoke = soundPartClone.Smoke\n\t\tif smoke then\n\t\t\tsmoke.Enabled = true\n\t\t\ttask.wait(0.5)\n\t\t\tsmoke.Enabled = false\n\t\t\tDebris:AddItem(soundPartClone, 5)\n\t\tend\n\tend)\nend\n\n\n--------------------------------------------------------------------------------\n-- UTILITIES\n--------------------------------------------------------------------------------\n\nfunction LightningStormService:GetOutsidePlayers()\n\tif not currentMap or not isActive then return {} end\n\n\tlocal outsidePlayers = {}\n\tlocal rayParams = RaycastParams.new()\n\trayParams.FilterType = Enum.RaycastFilterType.Exclude\n\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tif not StateService:GetState(player, StateDefinitions.PLAYING) then continue end\n\n\t\tlocal character = player.Character\n\t\tif not character then continue end\n\n\t\tlocal humanoid = character:FindFirstChild(\"Humanoid\")\n\t\tif not humanoid or humanoid.Health <= 0 then continue end\n\n\t\tlocal root = character:FindFirstChild(\"HumanoidRootPart\")\n\t\tif not root then continue end\n\n\t\t-- Raycast upward to check for ceiling\n\t\trayParams.FilterDescendantsInstances = {character}\n\t\tlocal rayResult = workspace:Raycast(root.Position, Vector3.new(0, 100, 0), rayParams)\n\n\t\t-- If no ceiling found, player is outside\n\t\tif not rayResult then\n\t\t\ttable.insert(outsidePlayers, player)\n\t\tend\n\tend\n\n\treturn outsidePlayers\nend\n\nreturn LightningStormService"}},"referenceId":"9710"},{"className":"ModuleScript","name":"BlackholeService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/BlackholeService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- BLACKHOLE SERVICE\n-- @carsondev7\n----------------------------------------\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal Lighting = game:GetService(\"Lighting\")\nlocal Debris = game:GetService(\"Debris\")\nlocal RunService = game:GetService(\"RunService\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal MovementService = require(game.ServerScriptService.Server.Services.Player.MovementService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- VARIABLES --\nlocal BlackholeService = {}\nlocal isActive = false\nlocal currentMap = nil\nlocal currentBlackhole = nil\nlocal blackholePart = ServerStorage.Disasters.Blackhole.BlackholePart\nlocal blackholeSound = SoundService.SoundEffects.Disasters.Blackhole\nlocal pullConnection = nil\nlocal startTime = 0\nlocal currentRadius = 0\n\n\n-- CONFIG --\nlocal MIN_RADIUS = 30\t\t\t\t\t-- Starting pull radius\nlocal MAX_RADIUS = 40\t\t\t\t\t-- Maximum pull radius\nlocal RADIUS_GROW_RATE = 1\t\t\t\t-- Studs per second radius growth\nlocal STRUCTURE_PULL_STRENGTH = 1000\t-- Force strength\nlocal PLAYER_PULL_STRENGTH = 230000\t\t-- Player pull strength\nlocal KILL_RADIUS = 8\t\t\t\t\t-- Instant death radius\nlocal PART_DESTROY_RADIUS = 8\t\t\t-- Radius to destroy parts\nlocal IMPULSE_COLLISIONS = false\n\n--------------------------------------------------------------------------------\n-- BLACKHOLE LIFECYCLE\n--------------------------------------------------------------------------------\n\nfunction BlackholeService:Initialize(map)\n\tif isActive then return end\n\t\n\tif not map then return end\n\tisActive = true\n\tcurrentMap = map\n\tcurrentRadius = MIN_RADIUS\n\tstartTime = 0\n\t\n\t-- Clean up previous connection if it exists\n\tif pullConnection then\n\t\tpullConnection:Disconnect()\n\t\tpullConnection = nil\n\tend\nend\n\nfunction BlackholeService:Start(duration, map)\n\tif not isActive then return end\n\t\n\t-- Spawn the blackhole\n\tself:SpawnBlackhole()\n\t\n\tstartTime = tick()\n\n\t-- Start pulling loop\n\tpullConnection = RunService.Heartbeat:Connect(function(dt)\n\t\tif isActive and currentBlackhole then\n\t\t\t-- Update radius over time\n\t\t\tlocal elapsed = tick() - startTime\n\t\t\tcurrentRadius = math.min(MIN_RADIUS + (elapsed * RADIUS_GROW_RATE), MAX_RADIUS)\n\t\t\tself:PullObjects(dt)\n\t\tend\n\tend)\nend\n\nfunction BlackholeService:End()\n\tif not isActive then return end\n\n\tisActive = false\n\t\n\tself:CleanupPlayerForces()\n\n\t-- Stop pull loop\n\tif pullConnection then\n\t\tpullConnection:Disconnect()\n\t\tpullConnection = nil\n\tend\n\n\t-- Remove blackhole\n\tif currentBlackhole then\n\t\tcurrentBlackhole:Destroy()\n\t\tcurrentBlackhole = nil\n\tend\n\n\tcurrentMap = nil\n\tcurrentRadius = 0\n\tstartTime = 0\nend\n\nfunction BlackholeService:ResetDisaster()\n\tself:End()\nend\n\n--------------------------------------------------------------------------------\n-- BLACKHOLE EFFECTS\n--------------------------------------------------------------------------------\n\nfunction BlackholeService:SpawnBlackhole()\n\tif not isActive or not currentMap then return end\n\n\tlocal base = currentMap.Base\n\tlocal baseCFrame, baseSize = base:GetBoundingBox()\n\tlocal basePosition = baseCFrame.Position\n\n\tlocal rng = Random.new()\n\tlocal randomX = basePosition.X + rng:NextNumber(-baseSize.X / 3, baseSize.X / 3)\n\tlocal randomZ = basePosition.Z + rng:NextNumber(-baseSize.Z / 3, baseSize.Z / 3)\n\tlocal spawnPosition = Vector3.new(randomX, basePosition.Y + math.random(20, 40), randomZ)\n\t\n\tlocal blackholeClone = blackholePart:Clone()\n\tblackholeClone.Position = spawnPosition\n\t\n\tlocal sound = blackholeSound:Clone()\n\tsound.Parent = blackholeClone\n\tsound:Play()\n\t\n\tblackholeClone.Parent = workspace\n\n\tcurrentBlackhole = blackholeClone\nend\n\n--------------------------------------------------------------------------------\n-- PULL MECHANICS\n--------------------------------------------------------------------------------\n\nfunction BlackholeService:PullObjects(dt)\n\tif not currentBlackhole or not currentMap then return end\n\n\t-- Use the CENTER of the blackhole part, not position (which might be offset)\n\tlocal blackholePos = currentBlackhole.Position\n\n\t-- Get all parts in current radius\n\tlocal partsInRadius = workspace:GetPartBoundsInRadius(blackholePos, currentRadius)\n\n\tfor _, part in ipairs(partsInRadius) do\n\t\t-- Skip the blackhole itself and its descendants\n\t\tif part == currentBlackhole or part:IsDescendantOf(currentBlackhole) then continue end\n\n\t\t-- Calculate distance from CENTER of blackhole to CENTER of part\n\t\tlocal partPos = part.Position\n\t\tlocal distance = (partPos - blackholePos).Magnitude\n\t\tlocal direction = (blackholePos - partPos).Unit\n\n\t\t-- Check if it's a player\n\t\tlocal character = part.Parent\n\t\tlocal player = Players:GetPlayerFromCharacter(character)\n\n\t\tif player and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t-- Handle player pull\n\t\t\tself:PullPlayer(player, character, part, direction, distance, blackholePos)\n\t\telseif part:IsDescendantOf(currentMap.InteractiveParts) then\n\t\t\t-- Handle structure part pull\n\t\t\tself:PullStructurePart(part, direction, distance, blackholePos)\n\t\tend\n\tend\nend\n\nfunction BlackholeService:PullPlayer(player, character, rootPart, direction, distance, blackholePos)\n\t\n\t-- Force player to stand if they are sitting\n\tMovementService:ForceStand(player)\n\t\n\tlocal humanoid = character:FindFirstChild(\"Humanoid\")\n\tif not humanoid or humanoid.Health <= 0 then return end\n\n\t-- Instant kill if too close to CENTER\n\tif distance < KILL_RADIUS then\n\t\thumanoid.Health = 0\n\t\t-- Remove pull force immediately\n\t\tlocal bodyVel = rootPart:FindFirstChild(\"BlackholePull\")\n\t\tif bodyVel then\n\t\t\tbodyVel:Destroy()\n\t\tend\n\t\treturn\n\tend\n\n\t-- Calculate pull strength (stronger when closer)\n\tlocal pullStrength = PLAYER_PULL_STRENGTH / math.max(distance, 1)\n\n\t-- Apply force to player\n\tif rootPart:IsA(\"BasePart\") and rootPart.Name == \"HumanoidRootPart\" then\n\t\t-- Use BodyVelocity for smooth pull\n\t\tlocal bodyVel = rootPart:FindFirstChild(\"BlackholePull\")\n\t\tif not bodyVel then\n\t\t\tbodyVel = Instance.new(\"BodyVelocity\")\n\t\t\tbodyVel.Name = \"BlackholePull\"\n\t\t\tbodyVel.MaxForce = Vector3.new(100000, 100000, 100000)\n\t\t\tbodyVel.Parent = rootPart\n\t\tend\n\n\t\t-- Update velocity toward blackhole CENTER\n\t\tbodyVel.Velocity = direction * (pullStrength / 1000)\n\tend\nend\n\nfunction BlackholeService:PullStructurePart(part, direction, distance, blackholePos)\n\tif not part:IsA(\"BasePart\") then return end\n\n\t-- Instant destroy parts that get too close to CENTER\n\tif distance < PART_DESTROY_RADIUS then\n\t\tpart:Destroy()\n\t\treturn\n\tend\n\n\t-- Collapse parts within collapse radius\n\tif distance < currentRadius then\n\t\tStructureService:Collapse(part, IMPULSE_COLLISIONS)\n\tend\n\n\tif not part.Anchored then\n\t\t-- Calculate pull strength\n\t\tlocal pullStrength = STRUCTURE_PULL_STRENGTH / math.max(distance, 1)\n\n\t\t-- Apply impulse toward CENTER\n\t\tlocal force = direction * pullStrength * part.AssemblyMass * 0.1\n\t\tpart:ApplyImpulse(force)\n\tend\nend\n\n--------------------------------------------------------------------------------\n-- CLEANUP\n--------------------------------------------------------------------------------\n\n-- Remove BodyVelocity from players when blackhole ends\nfunction BlackholeService:CleanupPlayerForces()\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tlocal character = player.Character\n\t\tif character then\n\t\t\tlocal rootPart = character:FindFirstChild(\"HumanoidRootPart\")\n\t\t\tif rootPart then\n\t\t\t\tlocal bodyVel = rootPart:FindFirstChild(\"BlackholePull\")\n\t\t\t\tif bodyVel then\n\t\t\t\t\tbodyVel:Destroy()\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\nreturn BlackholeService"}},"referenceId":"9711"},{"className":"ModuleScript","name":"TornadoService","parentId":"9360","path":"ServerScriptService/Server/Services/Disasters/TornadoService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- TORNADO SERVICE\n-- @carsondev7\n----------------------------------------\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal ServerStorage = game:GetService(\"ServerStorage\")\nlocal TweenService = game:GetService(\"TweenService\")\nlocal SoundService = game:GetService(\"SoundService\")\nlocal Lighting = game:GetService(\"Lighting\")\nlocal RunService = game:GetService(\"RunService\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal TweenerService = require(ReplicatedStorage.Shared.Modules.Services.Animations.TweenerService)\nlocal StructureService = require(game.ServerScriptService.Server.Services.Game.StructureService)\nlocal NetworkService = require(game.ServerScriptService.Server.Services.Networking.NetworkService)\nlocal MovementService = require(game.ServerScriptService.Server.Services.Player.MovementService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- VARIABLES --\nlocal TornadoService = {}\nlocal isActive = false\nlocal currentMap = nil\nlocal currentTornado = nil\nlocal tornadoModel = ServerStorage.Disasters.Tornado.Tornado\nlocal tornadoSound = SoundService.SoundEffects.Disasters.Tornado\nlocal rainClouds = workspace.World.RainClouds\nlocal moveConnection = nil\nlocal damageConnection = nil\n\n-- CONFIG --\nlocal TRAVEL_SPEED = 10\t\t\t\t\t\t\t-- Studs per second\nlocal PULL_BOX_SIZE = Vector3.new(30, 120, 30)\t-- Size of the pull box (X, Y, Z)\nlocal STRUCTURE_PULL_STRENGTH = 5000\t\t\t-- Structure pull strength\nlocal PLAYER_PULL_STRENGTH = 200000\t\t\t\t-- Player pull strength\nlocal KILL_RADIUS = 5\t\t\t\t\t\t\t-- Instant kill radius (horizontal only)\nlocal DAMAGE_CHANCE = 0.6 \t\t\t\t\t\t-- Chance to damage structures\nlocal IMPULSE_COLLISIONS = true\t\t\t\nlocal TORNADO_DAMAGE = 15\t\t\t\t\nlocal PATH_CHANGE_INTERVAL = 3\t\t\t\t\t-- Change direction every X seconds\nlocal EJECT_HEIGHT_THRESHOLD = 55\t\t\t\t-- Height above tornado base to eject parts\nlocal EJECT_FORCE = 10\t\t\t\t\t\t\t-- Strength of ejection\n\n\n--------------------------------------------------------------------------------\n-- TORNADO LIFECYCLE\n--------------------------------------------------------------------------------\n\nfunction TornadoService:Initialize(map)\n\tif isActive or not map then return end\n\tisActive = true\n\tcurrentMap = map\n\t\n\t-- CLEANUP PREV CONNECTIONS IF THEY STILL EXIST\n\t-- Stop movement\n\tif moveConnection then\n\t\tmoveConnection:Disconnect()\n\t\tmoveConnection = nil\n\tend\n\n\t-- Stop damage\n\tif damageConnection then\n\t\tdamageConnection:Disconnect()\n\t\tdamageConnection = nil\n\tend\n\n\t-- Cleanup tornado\n\tif currentTornado then\n\t\tcurrentTornado:Destroy()\n\t\tcurrentTornado = nil\n\tend\n\n\t-- Tween in clouds and lower brightness\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(rainClouds, tweenInfo, {Transparency = 0}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 0.4}):Play()\nend\n\nfunction TornadoService:Start(duration, map)\n\tif not isActive or not map then return end\n\n\t-- Get map bounds\n\tlocal mapCFrame, mapSize = map.Base:GetBoundingBox()\n\tlocal primaryPos = map.Base.PrimaryPart.Position\n\tlocal mapCenter = mapCFrame.Position\n\tlocal primaryY = primaryPos.Y\n\n\t-- Spawn tornado at random edge\n\tlocal spawnPos = self:GetRandomEdgePosition(mapCenter, mapSize, primaryY)\n\tcurrentTornado = tornadoModel:Clone()\n\tcurrentTornado:PivotTo(CFrame.new(spawnPos))\n\t\n\t-- Play tornado sound\n\tlocal tornadoSoundClone = tornadoSound:Clone()\n\ttornadoSoundClone.Parent = currentTornado.PrimaryPart\n\ttornadoSoundClone:Play()\n\t\n\tcurrentTornado.Parent = workspace\n\t\n\n\t-- Start movement\n\tmoveConnection = RunService.Heartbeat:Connect(function(dt)\n\t\tif isActive and currentTornado then\n\t\t\tself:MoveTornado(dt, mapCenter, mapSize, primaryY)\n\t\tend\n\tend)\n\n\t-- Start damage detection\n\tdamageConnection = RunService.Heartbeat:Connect(function()\n\t\tif isActive and currentTornado then\n\t\t\tself:DetectCollisions()\n\t\tend\n\tend)\nend\n\nfunction TornadoService:End()\n\tif not isActive then return end\n\n\tisActive = false\n\tcurrentMap = nil\n\n\t-- Clean up all player forces before ending\n\tself:CleanupAllPlayers()\n\n\t-- Stop movement\n\tif moveConnection then\n\t\tmoveConnection:Disconnect()\n\t\tmoveConnection = nil\n\tend\n\n\t-- Stop damage\n\tif damageConnection then\n\t\tdamageConnection:Disconnect()\n\t\tdamageConnection = nil\n\tend\n\n\t-- Cleanup tornado\n\tif currentTornado then\n\t\tcurrentTornado:Destroy()\n\t\tcurrentTornado = nil\n\tend\n\n\t-- Reset weather\n\tlocal tweenInfo = TweenInfo.new(3, Enum.EasingStyle.Linear)\n\tTweenService:Create(rainClouds, tweenInfo, {Transparency = 1}):Play()\n\tTweenService:Create(Lighting, tweenInfo, {Brightness = 2}):Play()\nend\n\nfunction TornadoService:ResetDisaster()\n\tself:End()\nend\n\n--------------------------------------------------------------------------------\n-- MOVEMENT\n--------------------------------------------------------------------------------\n\n-- Get random position at edge of map\nfunction TornadoService:GetRandomEdgePosition(mapCenter, mapSize, baseY)\n\tlocal rng = Random.new()\n\tlocal side = rng:NextInteger(1, 4)\n\tlocal x, z\n\n\tif side == 1 then -- Top edge\n\t\tx = mapCenter.X + rng:NextNumber(-mapSize.X/2, mapSize.X/2)\n\t\tz = mapCenter.Z + mapSize.Z/2\n\telseif side == 2 then -- Bottom edge\n\t\tx = mapCenter.X + rng:NextNumber(-mapSize.X/2, mapSize.X/2)\n\t\tz = mapCenter.Z - mapSize.Z/2\n\telseif side == 3 then -- Left edge\n\t\tx = mapCenter.X - mapSize.X/2\n\t\tz = mapCenter.Z + rng:NextNumber(-mapSize.Z/2, mapSize.Z/2)\n\telse -- Right edge\n\t\tx = mapCenter.X + mapSize.X/2\n\t\tz = mapCenter.Z + rng:NextNumber(-mapSize.Z/2, mapSize.Z/2)\n\tend\n\n\treturn Vector3.new(x, baseY, z)\nend\n\n-- Move tornado along path\nfunction TornadoService:MoveTornado(dt, mapCenter, mapSize, baseY)\n\tif not currentTornado then return end\n\n\t-- Get current position\n\tlocal currentPos = currentTornado:GetPivot().Position\n\n\t-- Generate target if needed\n\tif not self.targetPos or not self.lastPathChange then\n\t\tself.lastPathChange = tick()\n\t\tself.targetPos = self:GetRandomTargetPosition(mapCenter, mapSize, baseY)\n\tend\n\n\t-- Change target periodically for wandering effect\n\tif tick() - self.lastPathChange > PATH_CHANGE_INTERVAL then\n\t\tself.lastPathChange = tick()\n\t\tself.targetPos = self:GetRandomTargetPosition(mapCenter, mapSize, baseY)\n\tend\n\n\t-- Move toward target\n\tlocal direction = (self.targetPos - currentPos).Unit\n\tlocal movement = direction * TRAVEL_SPEED * dt\n\n\t-- Keep at BASE_HEIGHT above map base (not terrain/buildings)\n\tlocal newPos = currentPos + movement\n\tnewPos = Vector3.new(newPos.X, baseY, newPos.Z)\n\n\t-- Update position\n\tcurrentTornado:PivotTo(CFrame.new(newPos))\n\n\t-- Check if reached target\n\tlocal distanceToTarget = (self.targetPos - newPos).Magnitude\n\tif distanceToTarget < 10 then\n\t\tself.targetPos = self:GetRandomTargetPosition(mapCenter, mapSize, baseY)\n\t\tself.lastPathChange = tick()\n\tend\nend\n\n-- Get random position within map bounds\nfunction TornadoService:GetRandomTargetPosition(mapCenter, mapSize, baseY)\n\tlocal rng = Random.new()\n\n\tlocal x = mapCenter.X + rng:NextNumber(-mapSize.X/2 * 0.8, mapSize.X/2 * 0.8)\n\tlocal z = mapCenter.Z + rng:NextNumber(-mapSize.Z/2 * 0.8, mapSize.Z/2 * 0.8)\n\n\treturn Vector3.new(x, baseY, z)\nend\n\n--------------------------------------------------------------------------------\n-- DAMAGE INTERACTIONS\n--------------------------------------------------------------------------------\n\nfunction TornadoService:DetectCollisions()\n\tif not currentTornado or not currentMap then return end\n\n\tlocal tornadoPos = currentTornado:GetPivot().Position\n\n\t-- Create bounding box centered on tornado\n\t-- Box extends from ground up to capture tall buildings\n\tlocal boxCFrame = CFrame.new(tornadoPos)\n\tlocal boxSize = PULL_BOX_SIZE\n\n\t-- Get all parts in bounding box\n\tlocal partsInBox = workspace:GetPartBoundsInBox(boxCFrame, boxSize)\n\n\t-- Track which players are in range this frame\n\tlocal playersInRange = {}\n\n\tfor _, part in ipairs(partsInBox) do\n\t\t-- Skip tornado itself\n\t\tif part:IsDescendantOf(currentTornado) then continue end\n\n\t\t-- Calculate distance (horizontal distance for kill radius, 3D for pull strength)\n\t\tlocal horizontalDistance = (Vector3.new(part.Position.X, 0, part.Position.Z) - Vector3.new(tornadoPos.X, 0, tornadoPos.Z)).Magnitude\n\t\tlocal fullDistance = (part.Position - tornadoPos).Magnitude\n\n\t\t-- Check if player\n\t\tlocal character = part.Parent\n\t\tlocal player = Players:GetPlayerFromCharacter(character)\n\n\t\tif player and StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\tplayersInRange[player] = true\n\t\t\tself:PullPlayer(player, character, part, tornadoPos, horizontalDistance, fullDistance)\n\t\telseif part:IsDescendantOf(currentMap.InteractiveParts) then\n\t\t\tself:PullStructure(part, tornadoPos, horizontalDistance, fullDistance)\n\t\tend\n\tend\n\n\t-- Clean up players who escaped the tornado\n\tself:CleanupEscapedPlayers(playersInRange)\nend\n\nfunction TornadoService:PullPlayer(player, character, rootPart, tornadoPos, horizontalDistance, fullDistance)\n\tlocal humanoid = character:FindFirstChild(\"Humanoid\")\n\tif not humanoid or humanoid.Health <= 0 then return end\n\n\t-- Force player to stand if they are sitting\n\tMovementService:ForceStand(player)\n\n\t-- Kill if too close (based on horizontal distance only)\n\tif horizontalDistance < KILL_RADIUS then\n\t\thumanoid.Health -= TORNADO_DAMAGE\n\t\tself:RemoveTornadoForces(rootPart)\n\t\treturn\n\tend\n\n\t-- Pull toward tornado (spiral upward)\n\tif rootPart:IsA(\"BasePart\") and rootPart.Name == \"HumanoidRootPart\" then\n\t\t-- Calculate pull strength (stronger when closer)\n\t\t-- Use full 3D distance for pull strength so higher parts still get pulled\n\t\tlocal pullStrength = PLAYER_PULL_STRENGTH / math.max(fullDistance, 1)\n\n\t\t-- Direction toward tornado center, with strong upward component\n\t\tlocal horizontalDir = (tornadoPos - rootPart.Position) * Vector3.new(1, 0, 1)\n\n\t\t-- Upward force increases the higher you are (simulate updraft)\n\t\tlocal heightFactor = math.clamp((rootPart.Position.Y - tornadoPos.Y) / 50, 0, 1)\n\t\tlocal upwardStrength = 0.3 + (heightFactor * 0.4) -- 0.3 to 0.7\n\n\t\tlocal direction = (horizontalDir.Unit + Vector3.new(0, upwardStrength, 0)).Unit\n\n\t\t-- Apply velocity\n\t\tlocal bodyVel = rootPart:FindFirstChild(\"TornadoPull\")\n\t\tif not bodyVel then\n\t\t\tbodyVel = Instance.new(\"BodyVelocity\")\n\t\t\tbodyVel.Name = \"TornadoPull\"\n\t\t\tbodyVel.MaxForce = Vector3.new(100000, 100000, 100000)\n\t\t\tbodyVel.Parent = rootPart\n\t\tend\n\n\t\tbodyVel.Velocity = direction * (pullStrength / 1000)\n\n\t\t-- Spin player\n\t\tlocal bodyGyro = rootPart:FindFirstChild(\"TornadoSpin\")\n\t\tif not bodyGyro then\n\t\t\tbodyGyro = Instance.new(\"BodyAngularVelocity\")\n\t\t\tbodyGyro.Name = \"TornadoSpin\"\n\t\t\tbodyGyro.MaxTorque = Vector3.new(0, 100000, 0)\n\t\t\tbodyGyro.AngularVelocity = Vector3.new(0, 10, 0)\n\t\t\tbodyGyro.Parent = rootPart\n\t\tend\n\tend\nend\n\nfunction TornadoService:PullStructure(part, tornadoPos, horizontalDistance, fullDistance)\n\tif not part:IsA(\"BasePart\") then return end\n\n\tlocal damageRadius = PULL_BOX_SIZE.X / 2 * 0.5\n\tif horizontalDistance < damageRadius and math.random() < DAMAGE_CHANCE then\n\t\tStructureService:Collapse(part, IMPULSE_COLLISIONS)\n\tend\n\n\tif not part.Anchored then\n\t\tlocal heightAboveTornado = part.Position.Y - tornadoPos.Y\n\n\t\tif heightAboveTornado > EJECT_HEIGHT_THRESHOLD then\n\t\t\t-- Random ejection\n\t\t\tlocal angle = math.random() * math.pi * 2\n\t\t\tlocal ejectDir = Vector3.new(\n\t\t\t\tmath.cos(angle),\n\t\t\t\tmath.random(0.3, 0.7),  -- Random upward angle\n\t\t\t\tmath.sin(angle)\n\t\t\t).Unit\n\n\t\t\tlocal ejectForce = ejectDir * EJECT_FORCE * part.AssemblyMass\n\t\t\tpart:ApplyImpulse(ejectForce)\n\n\t\t\tpart.AssemblyAngularVelocity = Vector3.new(\n\t\t\t\tmath.random(-25, 25),\n\t\t\t\tmath.random(-25, 25),\n\t\t\t\tmath.random(-25, 25)\n\t\t\t)\n\t\telse\n\t\t\t-- Normal pull\n\t\t\tlocal pullStrength = STRUCTURE_PULL_STRENGTH / math.max(fullDistance, 1)\n\t\t\tlocal horizontalDir = (tornadoPos - part.Position) * Vector3.new(1, 0, 1)\n\t\t\tlocal heightFactor = math.clamp(heightAboveTornado / 50, 0, 1)\n\t\t\tlocal upwardStrength = 0.5 + (heightFactor * 0.3)\n\t\t\tlocal direction = (horizontalDir.Unit + Vector3.new(0, upwardStrength, 0)).Unit\n\n\t\t\tlocal force = direction * pullStrength * part.AssemblyMass * 0.1\n\t\t\tpart:ApplyImpulse(force)\n\n\t\t\tpart.AssemblyAngularVelocity = Vector3.new(\n\t\t\t\tmath.random(-10, 10),\n\t\t\t\tmath.random(-10, 10),\n\t\t\t\tmath.random(-10, 10)\n\t\t\t)\n\t\tend\n\tend\nend\n\n\n-- Clean up players who escaped the pull radius\nfunction TornadoService:CleanupEscapedPlayers(playersInRange)\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\t-- If player was not in range this frame, clean up their forces\n\t\tif not playersInRange[player] and player.Character then\n\t\t\tlocal rootPart = player.Character:FindFirstChild(\"HumanoidRootPart\")\n\t\t\tif rootPart then\n\t\t\t\tself:RemoveTornadoForces(rootPart)\n\t\t\tend\n\t\tend\n\tend\nend\n\n-- Remove tornado forces from a part\nfunction TornadoService:RemoveTornadoForces(rootPart)\n\tlocal bodyVel = rootPart:FindFirstChild(\"TornadoPull\")\n\tif bodyVel then\n\t\tbodyVel:Destroy()\n\tend\n\n\tlocal bodyGyro = rootPart:FindFirstChild(\"TornadoSpin\")\n\tif bodyGyro then\n\t\tbodyGyro:Destroy()\n\tend\nend\n\n--------------------------------------------------------------------------------\n-- CLEANUP\n--------------------------------------------------------------------------------\n\n-- Clean up all players when tornado ends\nfunction TornadoService:CleanupAllPlayers()\n\tfor _, player in ipairs(Players:GetPlayers()) do\n\t\tif player.Character then\n\t\t\tlocal rootPart = player.Character:FindFirstChild(\"HumanoidRootPart\")\n\t\t\tif rootPart then\n\t\t\t\tself:RemoveTornadoForces(rootPart)\n\t\t\tend\n\t\tend\n\tend\nend\n\nreturn TornadoService"}},"referenceId":"9712"},{"className":"Folder","name":"MapToys","parentId":"9356","path":"ServerScriptService/Server/Services/MapToys","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9361"},{"className":"ModuleScript","name":"SwingsService","parentId":"9361","path":"ServerScriptService/Server/Services/MapToys/SwingsService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- SWINGS SERVICE\n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal CollectionService = game:GetService(\"CollectionService\")\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\n\n-- ENUMS --\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\n\n-- VARIABLES --\nlocal TAG = \"Swing\"\nlocal SwingsService = {}\n\n-- CONFIGS -- \nlocal SWING_FORCE = 300\n\n\n--------------------------------------------------------------------------------\n-- SWINGS FUNCTIONS\n--------------------------------------------------------------------------------\n\nfunction SwingsService:CreateSeatConnection(seat)\n\tif not seat or not seat:IsA(\"VehicleSeat\") then return end\n\t\n\t-- If throttle input is changed\n\tseat:GetPropertyChangedSignal(\"ThrottleFloat\"):Connect(function()\n\t\tif seat.Occupant then\n\t\t\tlocal player = Players:GetPlayerFromCharacter(seat.Occupant.Parent)\n\t\t\tif player and not StateService:GetState(player, StateDefinitions.FROZEN) then\n\t\t\t\tseat.BodyThrust.Force = Vector3.new(0, 0, -SWING_FORCE * seat.ThrottleFloat)\n\t\t\tend\n\t\tend\n\tend)\n\t\n\t-- If seat becomes occupied/unoccpied (reset its force)\n\tseat:GetPropertyChangedSignal(\"Occupant\"):Connect(function()\n\t\tif not seat.Occupant then\n\t\t\tseat.BodyThrust.Force = Vector3.new(0, 0, 0)\n\t\tend\n\tend)\n\t\t\nend\n\n\n--------------------------------------------------------------------------------\n-- INIT SWINGS\n--------------------------------------------------------------------------------\n\nfunction SwingsService:Init()\n\t-- Initiate any tagged seats already in the workspace\n\tfor _, seat in CollectionService:GetTagged(TAG) do\n\t\tself:CreateSeatConnection(seat)\n\tend\n\n\t-- Initiate any newly placed seat in the workspace\n\tCollectionService:GetInstanceAddedSignal(TAG):Connect(function(seat)\n\t\tself:CreateSeatConnection(seat)\n\tend)\nend\n\nSwingsService:Init()\nreturn SwingsService\n"}},"referenceId":"9713"},{"className":"Folder","name":"Items","parentId":"9356","path":"ServerScriptService/Server/Services/Items","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9362"},{"className":"ModuleScript","name":"ItemDefinitions","parentId":"9362","path":"ServerScriptService/Server/Services/Items/ItemDefinitions","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- ITEM DEFINITIONS MODULE SCRIPT \n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\n\n-- MODULES --\nlocal StateService = require(game.ServerScriptService.Server.Services.Player.StateService)\nlocal StateDefinitions = require(game.ServerScriptService.Server.Services.Player.StateDefinitions)\nlocal ModifierService = require(game.ServerScriptService.Server.Services.Player.ModifierService)\n\nlocal ItemDefinitions = {\n\t\n\t--------------------------------------------------------------------------------\n\t-- CONSUMABLES\n\t--------------------------------------------------------------------------------\n\n\t-- CONSUMABLES (Temporary modifiers)\n\tBloxyCola = {\n\t\tId = \"BloxyCola\",\n\t\tName = \"Bloxy Cola\",\n\t\tDescription = \"2x speed for 10 seconds\",\n\t\tCategory = \"Consumable\",\n\t\tTokenPrice = 100,\n\t\tRobuxPrice = 10,\n\t\tIcon = \"rbxassetid://80503995013152\",\n\t\tDeveloperProductId = \"\",\n\t\tMaxStack = 3,\n\n\t\tOnUse = function(player)\n\t\t\tif not StateService:GetState(player, StateDefinitions.PLAYING) then\n\t\t\t\treturn false, \"Not in game\"\n\t\t\tend\n\n\t\t\t-- Check if this specific item is already active\n\t\t\tif ModifierService:HasModifier(player, \"Speed\", \"BloxyCola\") then\n\t\t\t\treturn false, \"Bloxy Cola already active\"\n\t\t\tend\n\n\t\t\t-- Add temporary +16 speed for 10 seconds\n\t\t\tModifierService:AddModifier(player, \"Speed\", \"BloxyCola\", 16, 10)\n\n\t\t\treturn true, \"Speed boost activated!\"\n\t\tend\n\t},\n\n\n\t--------------------------------------------------------------------------------\n\t-- GEAR ITEMS (Permanent)\n\t--------------------------------------------------------------------------------\n\n\tGravityCoil = {\n\t\tId = \"GravityCoil\",\n\t\tName = \"Gravity Coil\",\n\t\tDescription = \"Grants a major jump boost when held!\",\n\t\tCategory = \"Gear\",\n\t\tTokenPrice = 1000,\n\t\tRobuxPrice = 200,\n\t\tIcon = \"rbxassetid://82164661631248\",\n\t\tDeveloperProductId = \"3538967382\",\n\t\t\n\t\tOnEquip = function(player)\n\t\t\t-- Add permanent 2x jump (7.2 * 2 = 14.4) when held\n\t\t\tModifierService:AddModifier(player, \"Jump\", \"GravityCoil\", 7.2, nil)\n\t\tend,\n\t\t\n\t\tOnUnequip = function(player)\n\t\t\t-- Remove the permanent jump boost when not held\n\t\t\tModifierService:RemoveModifier(player, \"Jump\", \"GravityCoil\")\n\t\tend,\n\t\t\n\t},\n\n\tTeddyBear = {\n\t\tId = \"TeddyBear\",\n\t\tName = \"Teddy Bear\",\n\t\tDescription = \"He will love you forever\",\n\t\tCategory = \"Gear\",\n\t\tTokenPrice = 0,\n\t\tRobuxPrice = 0,\n\t\tIcon = \"rbxassetid://100232523759017\",\n\t\tDeveloperProductId = \"\",\n\t\tModel = nil,\n\t\t\n\t\tOnUse = function(player)\n\t\t\tprint(\"Used Teddy Bear\")\n\t\tend\n\t},\n\t\n\t\n\t--------------------------------------------------------------------------------\n\t-- COSMETICS\n\t--------------------------------------------------------------------------------\n\n\t--FireworksVictory = {\n\t--\tId = \"FireworksVictory\",\n\t--\tName = \"Fireworks Victory\",\n\t--\tDescription = \"Fireworks when you win\",\n\t--\tCategory = \"Cosmetic\",\n\t--\tPrice = 1000,\n\t--\tIcon = \"rbxassetid://123460\",\n\t--},\n\n\t--ExplosionDeath = {\n\t--\tId = \"ExplosionDeath\",\n\t--\tName = \"Explosion Death\",\n\t--\tDescription = \"Explode when you die\",\n\t--\tCategory = \"Cosmetic\",\n\t--\tPrice = 800,\n\t--\tIcon = \"rbxassetid://123461\",\n\t--},\n}\n\nreturn ItemDefinitions"}},"referenceId":"9714"},{"className":"ModuleScript","name":"ShopService","parentId":"9362","path":"ServerScriptService/Server/Services/Items/ShopService","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LinkedSource":{"originalType":"ContentId","type":"string","value":""},"Source":{"type":"ProtectedString","value":"----------------------------------------\n-- SHOP SERVICE MODULE SCRIPT \n-- @carsondev7\n----------------------------------------\n\n-- SERVICES --\nlocal Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\n-- MODULES -- \nlocal DataService = require(game.ServerScriptService.Server.Services.Player.DataService)\nlocal ItemDefinitions = require(script.Parent.ItemDefinitions)\n\n-- VARIABLES\nlocal ShopService = {}\n\nlocal remoteFunctions = ReplicatedStorage.RemoteFunctions\nlocal getShopData = remoteFunctions.Items.GetShopData\nlocal purchaseItem = remoteFunctions.Items.PurchaseItem\n\n--------------------------------------------------------------------------------\n-- CLIENT REQUESTS\n--------------------------------------------------------------------------------\n\ngetShopData.OnServerInvoke = function(player)\n\t-- Verify player is sending valid request\n\tif not player then return end\n\t\n\treturn ShopService:GetShopData(player)\nend\n\npurchaseItem.OnServerInvoke = function(player, itemId, purchaseMethod)\n\tif not player then return false, \"Invalid player\" end\n\tif not itemId then return false, \"Invalid item\" end\n\n\tif purchaseMethod == \"Tokens\" then\n\t\treturn ShopService:PurchaseItemWithTokens(player, itemId)\n\tend\n\n\treturn false, \"Invalid purchase method\"\nend\n\n--------------------------------------------------------------------------------\n-- ITEM PROCESSING\n--------------------------------------------------------------------------------\n\n-- Purchase an item\nfunction ShopService:PurchaseItemWithTokens(player, itemId)\n\tlocal item = ItemDefinitions[itemId]\n\tif not item then\n\t\twarn(\"Item not found:\", itemId)\n\t\treturn false, \"Item not found\"\n\tend\n\n\t-- Get player data\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then\n\t\treturn false, \"Data not loaded\"\n\tend\n\n\t-- Check if can afford\n\tif profile.Data.Tokens < item.TokenPrice then\n\t\treturn false, \"Not enough tokens\"\n\tend\n\n\t-- Handle different item types\n\tif item.Category == \"Consumable\" then\n\t\t-- Check if already at max stack\n\t\tlocal currentAmount = profile.Data.Inventory.Consumables[itemId] or 0\n\t\tif currentAmount >= item.MaxStack then\n\t\t\treturn false, \"Already at max stack\"\n\t\tend\n\n\t\t-- Add to inventory\n\t\tprofile.Data.Inventory.Consumables[itemId] = currentAmount + 1\n\n\telseif item.Category == \"Gear\" then\n\t\t-- Check if already owned\n\t\tif table.find(profile.Data.Inventory.Gear, itemId) then\n\t\t\treturn false, \"Already owned\"\n\t\tend\n\n\t\t-- Add to gear (permanent) items\n\t\ttable.insert(profile.Data.Inventory.Gear, itemId)\n\n\telseif item.Category == \"Cosmetic\" then  -- Cosmetics\n\t\t-- Check if already owned\n\t\tif table.find(profile.Data.Inventory.Cosmetics, itemId) then\n\t\t\treturn false, \"Already owned\"\n\t\tend\n\n\t\t-- Add to owned cosmetics\n\t\ttable.insert(profile.Data.Inventory.Cosmetics, itemId)\n\n\t\t-- Auto-equip if nothing equipped in this category\n\t\tif not profile.Data.Inventory.EquippedCosmetics[item.Category] then\n\t\t\tprofile.Data.Inventory.EquippedCosmetics[item.Category] = itemId\n\t\tend\n\telse\n\t\twarn(\"Unknown item category:\", item.Category)\n\t\treturn false, \"Unknown item type\"\n\tend\n\n\t-- Deduct tokens\n\tDataService.RemoveTokens(player, item.TokenPrice, \"Purchased \" .. item.Name)\n\n\treturn true, \"Purchase successful\"\nend\n\n\n-- Equip a cosmetic\nfunction ShopService:EquipCosmetic(player, itemId)\n\tlocal item = ItemDefinitions[itemId]\n\tif not item then return false end\n\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return false end\n\n\t-- Check if owned\n\tif not table.find(profile.Data.Inventory.Cosmetics, itemId) then\n\t\treturn false, \"Don't own this item\"\n\tend\n\n\t-- Equip\n\tprofile.Data.Inventory.EquippedCosmetics[item.Category] = itemId\n\n\treturn true\nend\n\n-- Use a consumable item\nfunction ShopService:UseItem(player, itemId)\n\tlocal item = ItemDefinitions[itemId]\n\tif not item or item.Category ~= \"Consumable\" then\n\t\treturn false, \"Can't use this item\"\n\tend\n\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return false end\n\n\t-- Check if have item\n\tlocal currentAmount = profile.Data.Inventory.Consumables[itemId] or 0\n\tif currentAmount <= 0 then\n\t\treturn false, \"Don't have this item\"\n\tend\n\n\t-- Try to use item\n\tlocal success = item.OnUse(player)\n\tif not success then\n\t\treturn false, \"Failed to use\"\n\tend\n\n\t-- Decrease quantity\n\tprofile.Data.Inventory.Consumables[itemId] = currentAmount - 1\n\n\treturn true\nend\n\n\n--------------------------------------------------------------------------------\n-- HELPERS\n--------------------------------------------------------------------------------\n\n-- Check if player owns an item or is at max capacity\nfunction ShopService:OwnsItem(player, item)\n\tlocal profile = DataService:GetProfile(player)\n\tif not profile then return false end\n\t\n\tif item.Category == \"Consumable\" then\n\t\treturn (profile.Data.Inventory.Consumables[item.Id] or 0) >= item.MaxStack\n\telseif item.Category == \"Gear\" then\n\t\treturn table.find(profile.Data.Inventory.Gear, item.Id) ~= nil\n\telseif item.Category == \"Cosmetic\" then\n\t\treturn table.find(profile.Data.Inventory.Cosmetics, item.Id) ~= nil\n\tend\nend\n\n\n--------------------------------------------------------------------------------\n-- REMOTE FUNCTIONS\n--------------------------------------------------------------------------------\n\n-- Strip sensitive data for client display\nfunction ShopService:GetShopData(player)\n\tlocal clientSafeData = {}\n\t\n\tfor itemId, item in pairs(ItemDefinitions) do\n\t\tlocal ownsItem = self:OwnsItem(player, item)\n\t\t\n\t\tclientSafeData[itemId] = {\n\t\t\tId = item.Id,\n\t\t\tName = item.Name,\n\t\t\tDescription = item.Description,\n\t\t\tCategory = item.Category,\n\t\t\tTokenPrice = item.TokenPrice,\n\t\t\tRobuxPrice = item.RobuxPrice,\n\t\t\tIcon = item.Icon,\n\t\t\tDeveloperProductId = item.DeveloperProductId,\n\t\t\tOwnsItem = ownsItem,\n\t\t}\n\tend\n\n\treturn clientSafeData\nend\n\n\nreturn ShopService"}},"referenceId":"9715"},{"className":"ServerStorage","name":"ServerStorage","parentId":"121922","path":"ServerStorage","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"12132"},{"className":"Folder","name":"Disasters","parentId":"12132","path":"ServerStorage/Disasters","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9363"},{"className":"Folder","name":"Fire","parentId":"9363","path":"ServerStorage/Disasters/Fire","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9364"},{"className":"Fire","name":"Fire","parentId":"9364","path":"ServerStorage/Disasters/Fire/Fire","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"Color3","value":{"b":0.27450981736183167,"g":0.545098066329956,"r":0.9254902601242064}},"Enabled":{"type":"bool","value":true},"SecondaryColor":{"type":"Color3","value":{"b":0.21568629145622256,"g":0.3137255012989044,"r":0.545098066329956}},"Size":{"type":"float","value":15},"TimeScale":{"type":"float","value":1}},"referenceId":"9316"},{"className":"Part","name":"FireSoundPart","parentId":"9364","path":"ServerStorage/Disasters/Fire/FireSoundPart","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[21.12109375,-398.875,-176.69381713867188],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":4,"y":1,"z":2}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":1}},"referenceId":"9772"},{"className":"Folder","name":"AcidRain","parentId":"9363","path":"ServerStorage/Disasters/AcidRain","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9365"},{"className":"Model","name":"AcidRainClouds","parentId":"9365","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LevelOfDetail":{"type":"Enum","value":{"enumType":"ModelLevelOfDetail","value":"Automatic"}},"ModelStreamingMode":{"type":"Enum","value":{"enumType":"ModelStreamingMode","value":"Default"}},"PrimaryPart":{"type":"Ref","value":"9777"}},"referenceId":"9528"},{"className":"Part","name":"AcidRainSky","parentId":"9528","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/AcidRainSky","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":false},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":318},"CFrame":{"type":"CFrame","value":{"position":[2667,-112.625,1307],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.5490196347236633,"g":0.686274528503418,"r":0.5490196347236633}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":2040,"y":1,"z":2040}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":0.25}},"referenceId":"9773"},{"className":"Part","name":"AcidRainSky","parentId":"9528","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/AcidRainSky~9774","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":false},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":318},"CFrame":{"type":"CFrame","value":{"position":[3039,-112.625,3347],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.5490196347236633,"g":0.686274528503418,"r":0.5490196347236633}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":1296,"y":1,"z":2040}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":0.25}},"referenceId":"9774"},{"className":"Part","name":"AcidRainSky","parentId":"9528","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/AcidRainSky~9775","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":false},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":318},"CFrame":{"type":"CFrame","value":{"position":[1371,-112.625,3347],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.5490196347236633,"g":0.686274528503418,"r":0.5490196347236633}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":2040,"y":1,"z":2040}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":0.25}},"referenceId":"9775"},{"className":"Part","name":"AcidRainSky","parentId":"9528","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/AcidRainSky~9776","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":false},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":318},"CFrame":{"type":"CFrame","value":{"position":[999.5,-112.625,1307],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.5490196347236633,"g":0.686274528503418,"r":0.5490196347236633}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":1297,"y":1,"z":2040}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":0.25}},"referenceId":"9776"},{"className":"Part","name":"PrimaryPart","parentId":"9528","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/PrimaryPart","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":false},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[2040,-111.625,2327],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":4,"y":1,"z":2}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":1}},"referenceId":"9777"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9777","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/PrimaryPart/WeldConstraint","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9777"},"Part1":{"type":"Ref","value":"9776"}},"referenceId":"12615"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9777","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/PrimaryPart/WeldConstraint~12616","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9777"},"Part1":{"type":"Ref","value":"9775"}},"referenceId":"12616"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9777","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/PrimaryPart/WeldConstraint~12617","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9777"},"Part1":{"type":"Ref","value":"9774"}},"referenceId":"12617"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9777","path":"ServerStorage/Disasters/AcidRain/AcidRainClouds/PrimaryPart/WeldConstraint~12618","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9777"},"Part1":{"type":"Ref","value":"9773"}},"referenceId":"12618"},{"className":"Folder","name":"Tsunami","parentId":"9363","path":"ServerStorage/Disasters/Tsunami","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9366"},{"className":"Model","name":"TsunamiWave","parentId":"9366","path":"ServerStorage/Disasters/Tsunami/TsunamiWave","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"LevelOfDetail":{"type":"Enum","value":{"enumType":"ModelLevelOfDetail","value":"Automatic"}},"ModelStreamingMode":{"type":"Enum","value":{"enumType":"ModelStreamingMode","value":"Default"}},"PrimaryPart":{"type":"Ref","value":"9779"}},"referenceId":"9529"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[107.25997924804688,-441.4849548339844,-132],"rotation":[0,1,0,0,0,-1,-1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":21.119997024536136,"z":5.279999732971191}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12566"},{"className":"Texture","name":"Left","parentId":"12566","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12277"},{"className":"Texture","name":"Right","parentId":"12566","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12278"},{"className":"Texture","name":"Top","parentId":"12566","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12279"},{"className":"Texture","name":"Bottom","parentId":"12566","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12280"},{"className":"Texture","name":"Back","parentId":"12566","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12281"},{"className":"Texture","name":"Front","parentId":"12566","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12282"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12567","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[89.77000427246094,-436.2049865722656,-132],"rotation":[0,1,0,0,0,-1,-1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":13.859999656677246,"z":5.279999732971191}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12567"},{"className":"Texture","name":"Left","parentId":"12567","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12567/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12283"},{"className":"Texture","name":"Right","parentId":"12567","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12567/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12284"},{"className":"Texture","name":"Top","parentId":"12567","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12567/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12285"},{"className":"Texture","name":"Bottom","parentId":"12567","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12567/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12286"},{"className":"Texture","name":"Back","parentId":"12567","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12567/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12287"},{"className":"Texture","name":"Front","parentId":"12567","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12567/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12288"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12568","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[74.5899887084961,-427.625,-132],"rotation":[0,1,0,0,0,-1,-1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":16.499998092651367,"z":11.880000114440918}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12568"},{"className":"Texture","name":"Left","parentId":"12568","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12568/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12289"},{"className":"Texture","name":"Right","parentId":"12568","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12568/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12290"},{"className":"Texture","name":"Top","parentId":"12568","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12568/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12291"},{"className":"Texture","name":"Bottom","parentId":"12568","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12568/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12292"},{"className":"Texture","name":"Back","parentId":"12568","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12568/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12293"},{"className":"Texture","name":"Front","parentId":"12568","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12568/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12294"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12569","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[59.73999786376953,-418.7149963378906,-132],"rotation":[0,1,0,0,0,-1,-1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":13.19999885559082,"z":5.940000057220459}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12569"},{"className":"Texture","name":"Left","parentId":"12569","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12569/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12295"},{"className":"Texture","name":"Right","parentId":"12569","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12569/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12296"},{"className":"Texture","name":"Top","parentId":"12569","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12569/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12297"},{"className":"Texture","name":"Bottom","parentId":"12569","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12569/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12298"},{"className":"Texture","name":"Back","parentId":"12569","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12569/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12299"},{"className":"Texture","name":"Front","parentId":"12569","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12569/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12300"},{"className":"Part","name":"Part","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[59.07999801635742,-436.2049865722656,-132],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":47.519981384277344,"y":5.279999256134033,"z":330}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"9778"},{"className":"Texture","name":"Left","parentId":"9778","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12301"},{"className":"Texture","name":"Right","parentId":"9778","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12302"},{"className":"Texture","name":"Top","parentId":"9778","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12303"},{"className":"Texture","name":"Bottom","parentId":"9778","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12304"},{"className":"Texture","name":"Back","parentId":"9778","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12305"},{"className":"Texture","name":"Front","parentId":"9778","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12306"},{"className":"Part","name":"Base","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[63.03999710083008,-441.4849548339844,-132],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[-4.3711388286737935e-8,0,1,0,1,0,-1,0,-4.3711388286737935e-8]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":67.31998443603516,"y":5.279999256134033,"z":330}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"9779"},{"className":"Texture","name":"Left","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12307"},{"className":"Texture","name":"Right","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12308"},{"className":"Texture","name":"Top","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12309"},{"className":"Texture","name":"Bottom","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12310"},{"className":"Texture","name":"Back","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12311"},{"className":"Texture","name":"Front","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12312"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"9780"}},"referenceId":"12619"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12620","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"9778"}},"referenceId":"12620"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12621","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"9781"}},"referenceId":"12621"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12622","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12566"}},"referenceId":"12622"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12623","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12567"}},"referenceId":"12623"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12624","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12568"}},"referenceId":"12624"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12625","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12569"}},"referenceId":"12625"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12626","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12570"}},"referenceId":"12626"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12627","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12571"}},"referenceId":"12627"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12628","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12572"}},"referenceId":"12628"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12629","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12573"}},"referenceId":"12629"},{"className":"WeldConstraint","name":"WeldConstraint","parentId":"9779","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Base/WeldConstraint~12630","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Part0":{"type":"Ref","value":"9779"},"Part1":{"type":"Ref","value":"12574"}},"referenceId":"12630"},{"className":"Part","name":"Center","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Center","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[50.83000946044922,-427.625,-132],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":31.01999282836914,"y":11.879999160766602,"z":330}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"9780"},{"className":"Texture","name":"Left","parentId":"9780","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Center/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12313"},{"className":"Texture","name":"Right","parentId":"9780","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Center/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12314"},{"className":"Texture","name":"Top","parentId":"9780","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Center/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12315"},{"className":"Texture","name":"Bottom","parentId":"9780","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Center/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12316"},{"className":"Texture","name":"Back","parentId":"9780","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Center/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12317"},{"className":"Texture","name":"Front","parentId":"9780","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Center/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12318"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12570","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[42.25,-413.43499755859375,-132],"rotation":[0,1,0,0,0,-1,-1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":21.779998779296875,"z":4.619999408721924}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12570"},{"className":"Texture","name":"Left","parentId":"12570","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12570/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12319"},{"className":"Texture","name":"Right","parentId":"12570","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12570/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12320"},{"className":"Texture","name":"Top","parentId":"12570","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12570/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12321"},{"className":"Texture","name":"Bottom","parentId":"12570","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12570/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12322"},{"className":"Texture","name":"Back","parentId":"12570","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12570/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12323"},{"className":"Texture","name":"Front","parentId":"12570","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12570/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12324"},{"className":"Part","name":"Part","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part~9781","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[44.230010986328125,-418.7149963378906,-132],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":17.81999397277832,"y":5.939999580383301,"z":330}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"9781"},{"className":"Texture","name":"Left","parentId":"9781","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part~9781/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12325"},{"className":"Texture","name":"Right","parentId":"9781","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part~9781/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12326"},{"className":"Texture","name":"Top","parentId":"9781","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part~9781/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12327"},{"className":"Texture","name":"Bottom","parentId":"9781","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part~9781/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12328"},{"className":"Texture","name":"Back","parentId":"9781","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part~9781/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12329"},{"className":"Texture","name":"Front","parentId":"9781","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Part~9781/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12330"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12571","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[33.34001541137695,-419.375,-132],"rotation":[0,0,1,0,-1,0,1,0,-0.0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":7.25999927520752,"z":3.9599997997283936}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12571"},{"className":"Texture","name":"Left","parentId":"12571","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12571/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12331"},{"className":"Texture","name":"Right","parentId":"12571","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12571/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12332"},{"className":"Texture","name":"Top","parentId":"12571","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12571/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12333"},{"className":"Texture","name":"Bottom","parentId":"12571","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12571/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12334"},{"className":"Texture","name":"Back","parentId":"12571","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12571/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12335"},{"className":"Texture","name":"Front","parentId":"12571","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12571/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12336"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12572","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[32.35000228881836,-435.2149963378906,-132],"rotation":[0,-1,0,0,0,-1,1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":5.939999580383301,"z":7.259999752044678}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12572"},{"className":"Texture","name":"Left","parentId":"12572","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12572/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12337"},{"className":"Texture","name":"Right","parentId":"12572","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12572/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12338"},{"className":"Texture","name":"Top","parentId":"12572","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12572/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12339"},{"className":"Texture","name":"Bottom","parentId":"12572","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12572/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12340"},{"className":"Texture","name":"Back","parentId":"12572","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12572/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12341"},{"className":"Texture","name":"Front","parentId":"12572","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12572/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12342"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12573","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[28.39001846313477,-413.43499755859375,-132],"rotation":[0,-1,0,0,0,1,-1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":5.939999580383301,"z":4.619999408721924}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12573"},{"className":"Texture","name":"Left","parentId":"12573","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12573/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12343"},{"className":"Texture","name":"Right","parentId":"12573","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12573/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12344"},{"className":"Texture","name":"Top","parentId":"12573","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12573/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12345"},{"className":"Texture","name":"Bottom","parentId":"12573","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12573/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12346"},{"className":"Texture","name":"Back","parentId":"12573","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12573/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12347"},{"className":"Texture","name":"Front","parentId":"12573","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12573/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12348"},{"className":"WedgePart","name":"Wedge","parentId":"9529","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12574","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"BrickColor":{"type":"BrickColor","value":1013},"CFrame":{"type":"CFrame","value":{"position":[22.780010223388672,-441.4849548339844,-132],"rotation":[0,0,1,0,1,-0.0,-1,0,0]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.9254902005195618,"g":0.686274528503418,"r":0.01568627543747425}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"RootPriority":{"type":"int","value":0},"Size":{"type":"Vector3","value":{"x":329.9999084472656,"y":5.279999256134033,"z":13.199999809265137}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"SmoothNoOutlines"}},"Transparency":{"type":"float","value":0}},"referenceId":"12574"},{"className":"Texture","name":"Left","parentId":"12574","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12574/Left","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Left"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12349"},{"className":"Texture","name":"Right","parentId":"12574","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12574/Right","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Right"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12350"},{"className":"Texture","name":"Top","parentId":"12574","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12574/Top","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Top"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12351"},{"className":"Texture","name":"Bottom","parentId":"12574","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12574/Bottom","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Bottom"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12352"},{"className":"Texture","name":"Back","parentId":"12574","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12574/Back","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Back"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12353"},{"className":"Texture","name":"Front","parentId":"12574","path":"ServerStorage/Disasters/Tsunami/TsunamiWave/Wedge~12574/Front","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color3":{"type":"Color3","value":{"b":1,"g":1,"r":1}},"ColorMap":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"Face":{"type":"Enum","value":{"enumType":"NormalId","value":"Front"}},"MetalnessMapContent":{"type":"Content"},"NormalMapContent":{"type":"Content"},"OffsetStudsU":{"type":"float","value":0},"OffsetStudsV":{"type":"float","value":0},"RoughnessMapContent":{"type":"Content"},"StudsPerTileU":{"type":"float","value":9},"StudsPerTileV":{"type":"float","value":9},"Texture":{"originalType":"ContentId","type":"string","value":"rbxassetid://10024514185"},"TextureContent":{"type":"Content"},"Transparency":{"type":"float","value":0.8999999761581421},"UVOffset":{"type":"Vector2","value":{"x":0,"y":0}},"UVScale":{"type":"Vector2","value":{"x":1,"y":1}},"ZIndex":{"type":"int","value":1}},"referenceId":"12354"},{"className":"Folder","name":"MeteorStrike","parentId":"9363","path":"ServerStorage/Disasters/MeteorStrike","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9367"},{"className":"Part","name":"Meteor","parentId":"9367","path":"ServerStorage/Disasters/MeteorStrike/Meteor","properties":{"Anchored":{"type":"bool","value":false},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":149},"CFrame":{"type":"CFrame","value":{"position":[99.875,-367.6000061035156,-245.25],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":true},"CanQuery":{"type":"bool","value":true},"CanTouch":{"type":"bool","value":true},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.13333334028720856,"g":0.11764705926179886,"r":0.1137254908680916}},"CustomPhysicalProperties":{"type":"PhysicalProperties","value":{"density":2.6700000762939458,"elasticity":0,"elasticityWeight":100,"friction":0.5,"frictionWeight":1}},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Rock"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Ball"}},"Size":{"type":"Vector3","value":{"x":15.503520965576172,"y":12.950000762939453,"z":13.679576873779297}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":0}},"referenceId":"9782"},{"className":"Fire","name":"Fire","parentId":"9782","path":"ServerStorage/Disasters/MeteorStrike/Meteor/Fire","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"Color3","value":{"b":0.2941176593303681,"g":0.458823561668396,"r":1}},"Enabled":{"type":"bool","value":true},"SecondaryColor":{"type":"Color3","value":{"b":0.545098066329956,"g":0.3490196168422699,"r":0.5176470875740051}},"Size":{"type":"float","value":30},"TimeScale":{"type":"float","value":1}},"referenceId":"9317"},{"className":"Smoke","name":"Smoke","parentId":"9782","path":"ServerStorage/Disasters/MeteorStrike/Meteor/Smoke","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"Color3","value":{"b":0,"g":0,"r":0}},"Enabled":{"type":"bool","value":false},"Size":{"type":"float","value":10},"TimeScale":{"type":"float","value":1}},"referenceId":"12135"},{"className":"Folder","name":"LightningStorm","parentId":"9363","path":"ServerStorage/Disasters/LightningStorm","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0}},"referenceId":"9368"},{"className":"Part","name":"SoundPart","parentId":"9368","path":"ServerStorage/Disasters/LightningStorm/SoundPart","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":false},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[15.12109375,-398.875,-167.31881713867188],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":4,"y":1,"z":2}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":1}},"referenceId":"9783"},{"className":"Smoke","name":"Smoke","parentId":"9783","path":"ServerStorage/Disasters/LightningStorm/SoundPart/Smoke","properties":{"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"Color3","value":{"b":0.11764705926179886,"g":0.11764705926179886,"r":0.11764705926179886}},"Enabled":{"type":"bool","value":false},"Size":{"type":"float","value":0.30000001192092896},"TimeScale":{"type":"float","value":1}},"referenceId":"12136"},{"className":"Part","name":"LightningPart","parentId":"9368","path":"ServerStorage/Disasters/LightningStorm/LightningPart","properties":{"Anchored":{"type":"bool","value":true},"AudioCanCollide":{"type":"bool","value":true},"BackSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BottomSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"BrickColor":{"type":"BrickColor","value":194},"CFrame":{"type":"CFrame","value":{"position":[6.99609375,-386.25,-178.31881713867188],"rotation":[1,0,0,0,1,0,0,0,1]}},"CanCollide":{"type":"bool","value":false},"CanQuery":{"type":"bool","value":false},"CanTouch":{"type":"bool","value":false},"Capabilities":{"type":"SecurityCapabilities","value":0},"CastShadow":{"type":"bool","value":true},"CollisionGroup":{"type":"string","value":"Default"},"Color":{"type":"Color3","value":{"b":0.6470588445663452,"g":0.6352941393852234,"r":0.6392157077789307}},"CustomPhysicalProperties":{"type":"nil"},"EnableFluidForces":{"type":"bool","value":true},"FrontSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"LeftSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Locked":{"type":"bool","value":false},"Massless":{"type":"bool","value":false},"Material":{"type":"Enum","value":{"enumType":"Material","value":"Plastic"}},"PivotOffset":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Reflectance":{"type":"float","value":0},"RightSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"RootPriority":{"type":"int","value":0},"Shape":{"type":"Enum","value":{"enumType":"PartType","value":"Block"}},"Size":{"type":"Vector3","value":{"x":4,"y":1,"z":2}},"TopSurface":{"type":"Enum","value":{"enumType":"SurfaceType","value":"Smooth"}},"Transparency":{"type":"float","value":1}},"referenceId":"9784"},{"className":"Beam","name":"Beam1_2","parentId":"9784","path":"ServerStorage/Disasters/LightningStorm/LightningPart/Beam1_2","properties":{"Attachment0":{"type":"Ref","value":"9267"},"Attachment1":{"type":"Ref","value":"9268"},"Brightness":{"type":"float","value":1},"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"ColorSequence","value":{"keypoints":[{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":0},{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":1}]}},"CurveSize0":{"type":"float","value":0},"CurveSize1":{"type":"float","value":0},"Enabled":{"type":"bool","value":true},"FaceCamera":{"type":"bool","value":true},"LightEmission":{"type":"float","value":0},"LightInfluence":{"type":"float","value":1},"Segments":{"type":"int","value":1},"Texture":{"originalType":"ContentId","type":"string","value":""},"TextureLength":{"type":"float","value":1},"TextureMode":{"type":"Enum","value":{"enumType":"TextureMode","value":"Wrap"}},"TextureSpeed":{"type":"float","value":1},"Transparency":{"type":"NumberSequence","value":{"keypoints":[{"envelope":0,"time":0,"value":0},{"envelope":0,"time":1,"value":0}]}},"Width0":{"type":"float","value":0},"Width1":{"type":"float","value":1},"ZOffset":{"type":"float","value":0}},"referenceId":"9286"},{"className":"Attachment","name":"A1","parentId":"9784","path":"ServerStorage/Disasters/LightningStorm/LightningPart/A1","properties":{"CFrame":{"type":"CFrame","value":{"position":[0,0,0],"rotation":[1,0,0,0,1,0,0,0,1]}},"Capabilities":{"type":"SecurityCapabilities","value":0},"Visible":{"type":"bool","value":false}},"referenceId":"9267"},{"className":"Beam","name":"Beam2_3","parentId":"9784","path":"ServerStorage/Disasters/LightningStorm/LightningPart/Beam2_3","properties":{"Attachment0":{"type":"Ref","value":"9268"},"Attachment1":{"type":"Ref","value":"9269"},"Brightness":{"type":"float","value":1},"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"ColorSequence","value":{"keypoints":[{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":0},{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":1}]}},"CurveSize0":{"type":"float","value":0},"CurveSize1":{"type":"float","value":0},"Enabled":{"type":"bool","value":true},"FaceCamera":{"type":"bool","value":true},"LightEmission":{"type":"float","value":0},"LightInfluence":{"type":"float","value":1},"Segments":{"type":"int","value":1},"Texture":{"originalType":"ContentId","type":"string","value":""},"TextureLength":{"type":"float","value":1},"TextureMode":{"type":"Enum","value":{"enumType":"TextureMode","value":"Wrap"}},"TextureSpeed":{"type":"float","value":1},"Transparency":{"type":"NumberSequence","value":{"keypoints":[{"envelope":0,"time":0,"value":0},{"envelope":0,"time":1,"value":0}]}},"Width0":{"type":"float","value":1},"Width1":{"type":"float","value":1},"ZOffset":{"type":"float","value":0}},"referenceId":"9287"},{"className":"Beam","name":"Beam3_4","parentId":"9784","path":"ServerStorage/Disasters/LightningStorm/LightningPart/Beam3_4","properties":{"Attachment0":{"type":"Ref","value":"9269"},"Attachment1":{"type":"Ref","value":"9270"},"Brightness":{"type":"float","value":1},"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"ColorSequence","value":{"keypoints":[{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":0},{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":1}]}},"CurveSize0":{"type":"float","value":0},"CurveSize1":{"type":"float","value":0},"Enabled":{"type":"bool","value":true},"FaceCamera":{"type":"bool","value":true},"LightEmission":{"type":"float","value":0},"LightInfluence":{"type":"float","value":1},"Segments":{"type":"int","value":1},"Texture":{"originalType":"ContentId","type":"string","value":""},"TextureLength":{"type":"float","value":1},"TextureMode":{"type":"Enum","value":{"enumType":"TextureMode","value":"Wrap"}},"TextureSpeed":{"type":"float","value":1},"Transparency":{"type":"NumberSequence","value":{"keypoints":[{"envelope":0,"time":0,"value":0},{"envelope":0,"time":1,"value":0}]}},"Width0":{"type":"float","value":1},"Width1":{"type":"float","value":1},"ZOffset":{"type":"float","value":0}},"referenceId":"9288"},{"className":"Beam","name":"Beam4_5","parentId":"9784","path":"ServerStorage/Disasters/LightningStorm/LightningPart/Beam4_5","properties":{"Attachment0":{"type":"Ref","value":"9270"},"Attachment1":{"type":"Ref","value":"9271"},"Brightness":{"type":"float","value":1},"Capabilities":{"type":"SecurityCapabilities","value":0},"Color":{"type":"ColorSequence","value":{"keypoints":[{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":0},{"color":{"b":1,"g":0.9411764740943908,"r":0.9333333373069764},"time":1}]}},"CurveSize0":{"type":"float","value":0},"CurveSize1":{"type":"float","value":0},"Enabled":{"type":"bool","value":true},"FaceCamera":{"type":"bool","value":true},"LightEmission":{"type":"float","value":0},"LightInfluence":{"type":"float","value":1},"Segments":{"type":"int","value":1},"Texture":{"originalType":"ContentId","type":"string","value":""},"TextureLength":{"type":"float","value":1},"TextureMode":{"type":"Enum","value":{"enumType":"TextureMode","value":"Wrap"}},"TextureSpeed":{"type":"float","value":1},"Transparency":{"type":"NumberSequence","value":{"keypoints":[{"envelope":0,"time":0,"value":0},{"envelope":0,"time":1,"value":0}]}},"Width0":{"type":"float","value":1},"Width1":{"type":"float","value":1},"ZOffset":{"type":"float","value":0}},"referenceId":"9289"}]